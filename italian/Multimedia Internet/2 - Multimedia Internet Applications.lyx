#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language italian
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1cm
\topmargin 1cm
\rightmargin 1cm
\bottommargin 1cm
\headheight 1cm
\headsep 1cm
\footskip 0.5cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Multimedia Internet Applications
\begin_inset Foot
status open

\begin_layout Plain Layout
Quest'opera è sotto licenza Creative Commons Attribuzione - Condividi allo
 stesso modo 2.5 Italia License.
\end_layout

\end_inset


\end_layout

\begin_layout Author
Daniele Iamartino
\end_layout

\begin_layout Date
Anno scolastico 2012/2013
\end_layout

\begin_layout Section*
Lezione 3 - (Seconda parte del corso)
\end_layout

\begin_layout Standard
In questa seconda parte vedremo applicazioni, mentre nella prima parte vederemo
 architetture di rete.
\end_layout

\begin_layout Standard
Nella parte di applicazione ci occuperemo di quello che è chiamato 
\begin_inset Quotes eld
\end_inset


\emph on
control plane
\emph default

\begin_inset Quotes erd
\end_inset

 (cioè signaling).
 È la parte della rete che verifica il controlo della connessione.
\end_layout

\begin_layout Standard
Nella parte applicativa distinguiamo tra:
\end_layout

\begin_layout Itemize
User plane:
\end_layout

\begin_deeper
\begin_layout Itemize
Applications
\end_layout

\begin_layout Itemize
Control plane
\end_layout

\end_deeper
\begin_layout Itemize
Management plane
\end_layout

\begin_layout Standard
Però oggi iniziamo con problemi a livello di rete a basso livello.
\end_layout

\begin_layout Standard
Per prima cosa vedremo il passaggio tra una rete basata su doppini in rame
 e una rete basata su fibra.
\end_layout

\begin_layout Standard
Le prime due lezioni di questa seconda parte saranno riguardo alle NGN:
 
\series bold
\emph on
Next Generation Networks
\series default
\emph default
.
\end_layout

\begin_layout Standard
In alcuni paesi è iniziata la migrazione, in altri si è a 
\begin_inset Quotes eld
\end_inset

metà
\begin_inset Quotes erd
\end_inset

, in altri è già diffusa.
\end_layout

\begin_layout Standard
Il principale problema è il costo, anche con aiuti governativi non si riesce
 a sostituire tutto il rame con fibra in poco tempo.
\end_layout

\begin_layout Standard
Quindi questo processo richiederà sicuramente ancora molto tempo.
\end_layout

\begin_layout Subsection*
Com'è formata una rete ad accesso in rame
\end_layout

\begin_layout Standard
Stiamo parlando di una 
\series bold
rete di accesso
\series default
 (
\emph on
access network
\emph default
).
 Ci sono diversi livelli gerarchici di reti, principalmente divise in 
\emph on
access network
\emph default
 e 
\emph on
backbone network
\emph default
.
 La rete di accesso è quella che collega l'utente finale alla rete dell'operator
e.
 La rete di accesso è la più vasta.
 Quindi è molto più facile fare la migrazione alla fibra per la rete di
 backbone, che è la meno vasta.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename copper_network.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Come è strutturata la rete solitamente?
\end_layout

\begin_layout Itemize

\series bold
Backbone
\series default
 dell'ISP
\end_layout

\begin_layout Itemize
Un 
\series bold
\emph on
Central Office
\series default
\emph default
 dell'ISP (in italiano chiamato 
\series bold
SGU
\series default
)
\end_layout

\begin_deeper
\begin_layout Itemize
Abbiamo circa 700 
\emph on
central office
\emph default
 in Italia.
\end_layout

\begin_layout Itemize
Solitamente il central office è collegato al backbone tramite una rete in
 fibra.
\end_layout

\begin_layout Itemize
Spesso nelle grandi città il costo del posto fisico dove mettere il 
\emph on
central office
\emph default
 è abbastanza critico.
 Si cerca di risparmiare lo spazio, eventualmente accorpando con l'
\emph on
SL
\emph default
.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Exchange
\series default
, in italiano chiamati 
\series bold
\emph on
Stadio di Linea 
\series default
\emph default
(
\series bold
\emph on
SL
\series default
\emph default
), sono altri 
\begin_inset Quotes eld
\end_inset

edifici
\begin_inset Quotes erd
\end_inset

 che contengono una serie di elementi di rete che si collegano ad un unico
 
\emph on
central office
\emph default
 (in rame o fibra a seconda del livello di sviluppo della rete).
 L'elemento principale nello stadio di linea è il 
\series bold
DSLAM
\series default
 (
\emph on
Digital Subscriber
\emph default
 
\emph on
Line Access Multiplexer
\emph default
).
 Questo 
\emph on
DSLAM
\emph default
 risuddivide a sua volta la rete.
 Il DSLAM ha poi una serie di collegamenti in rame con un altro dispositivo
 (SDF).
 In italia ci sono circa 10'000 SL.
 Insieme al 
\emph on
dslam
\emph default
 c'è prima l'
\emph on
ODF
\emph default
 (
\emph on
Optical Distribution Frame
\emph default
), una matrice di collegamenti in fibra.
 E dopo il 
\emph on
dslam
\emph default
 c'è il 
\emph on
MDF
\emph default
 (
\emph on
Main Distribution Frame
\emph default
), che è invece una matrice di collegamenti in rame.
\end_layout

\begin_deeper
\begin_layout Itemize
Quindi nello 
\emph on
stadio di linea
\emph default
 c'è: 
\begin_inset Formula $\text{ODF}\:\rightarrow\:\text{DSLAM}\:\rightarrow\:\text{MDF}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
SDF
\series default
 (
\emph on
Service Distribution Frame
\emph default
), in italiano 
\begin_inset Quotes eld
\end_inset


\series bold
\emph on
armadio
\series default
\emph default

\begin_inset Quotes erd
\end_inset

 o 
\begin_inset Quotes eld
\end_inset


\emph on
chiostrino
\emph default

\begin_inset Quotes erd
\end_inset

.
 Sono quei dispositivi che vediamo per strada.
 Essi si collegano con il DSLAM in rame e le abitazioni.
 Questi elementi di rete sono 
\series bold
passivi
\series default
! È semplicemente una matrice di collegamenti che mappa un cavo verso l'abitazio
ne verso un cavo verso il DSLAM.
 Quindi non effettua multiplexing.
 È comodo perché permette di cambiare facilmente i collegamenti verso le
 abitazioni.
 In Italia ce ne sono circa 150'000.
\end_layout

\begin_layout Itemize

\series bold
DF 
\series default
(
\emph on
Distribution Frame
\emph default
): È un dispositivo presente solitamente solo in alcuni grossi edifici,
 è sostanzialmente uguale all'SDF e serve a gestire i collegamenti del palazzo.
 In Italia ce ne sono circa 1,5 milioni.
\end_layout

\begin_layout Standard
I segmenti di rete sono chiamati in questo modo:
\end_layout

\begin_layout Itemize

\series bold
Rete di giunzione 
\series default
(
\emph on
\bar under
junction network
\emph default
\bar default
): il segmento che collega il 
\emph on
central office
\emph default
 al 
\emph on
backbone
\emph default
.
 
\end_layout

\begin_layout Itemize

\series bold
Rete di distribuzione primaria
\series default
 (
\emph on
\bar under
primary distribution network
\emph default
\bar default
): il segmento che collega il central office all'armadio (solitamente tra
 200 e 3000 metri, a seconda del tipo di zona montuosa o meno).
\end_layout

\begin_layout Itemize

\series bold
Rete di distribuzione secondaria
\series default
 (
\emph on
\bar under
secondary distribution network
\emph default
\bar default
): il segmento che collega l'armadio all'abitazione (solitamente tra 100
 e 700 metri).
\end_layout

\begin_layout Standard
Solitamente l'unica cosa che vediamo di tutta questa rete è l'SDF (l'armadio).
 Tutto il resto della rete è sottoterra o all'interno di edifici.
\end_layout

\begin_layout Standard
I collegamenti in rame sono dei collegamenti in rame ad alta capacità.
 Sono dei grossi cavi che contengono tantissimi sottocavi.
\end_layout

\begin_layout Standard
Solitamente questi cavi sono pressurizzati, cioè sono riempiti di gas.
 Se qualcosa buca i cavi c'è un sensore che si accorge della pressione e
 viene inviata una squadra tecnica per dei controlli.
\end_layout

\begin_layout Standard
In Italia la lunghezza media dei collegamenti in rame è pù bassa che negli
 altri paesi.
\end_layout

\begin_layout Subsubsection*
Tipico caso di ADSL
\end_layout

\begin_layout Standard
Con l'ADSL classica abbiamo qualche Mbit/s di downstream e ~100kB/s di upstream.
 Abbiamo più capacità in downstream rispetto a capacità in upstream perché
 è una linea asimmetrica.
\end_layout

\begin_layout Standard
Era una buona soluzione fino a 15 anni fa probabilmente, quando il web browsing
 era il servizio principale (ed era ancora il web 
\begin_inset Quotes eld
\end_inset

1.0
\begin_inset Quotes erd
\end_inset

).
\end_layout

\begin_layout Standard
Però adesso siamo nel 
\begin_inset Quotes eld
\end_inset

web 2.0
\begin_inset Quotes erd
\end_inset

 o 
\begin_inset Quotes eld
\end_inset

web 3.0
\begin_inset Quotes erd
\end_inset

, dove abbiamo applicazioni p2p.
 Più di metà del traffico di internet è generato da applicazioni p2p, quindi
 serve anche traffico upstream.
\end_layout

\begin_layout Standard
Nei sistemi p2p gli utenti che riescono a condividere con più persone salgono
 all'interno della 
\begin_inset Quotes eld
\end_inset

classifica
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Quindi non è buono per gli utenti finali perché non abbiamo buona capacità
 di upstream quanto vorremmo, ed è male anche per l'ISP perché hanno un
 grosso livello di traffico pagato con una tariffa flat.
\end_layout

\begin_layout Standard
Molti operatori hanno osservato che la percentuale di guadagni provenienti
 dai contratti telefonici ha iniziato a scendere rispetto ai guadagni per
 le connessioni Internet.
 Nel 2008 la telecom inglese ha visto scendere sotto il 50% i guadagni dei
 contratti telefonici rispetto ai guadagni per connettività Internet.
\end_layout

\begin_layout Standard
Inoltre gli operatori hanno anche osservato che il loro servizio dominante
 (la telefonia) è diventato quello con meno traffico all'interno delle loro
 reti, arrivando a pochi punti percentuali rispetto all'intero traffico.
\end_layout

\begin_layout Itemize
Abbiamo poca banda per avere 
\series bold
video streaming
\end_layout

\begin_layout Itemize
Abbiamo poca banda per avere 
\series bold
servizi
\series default
 
\series bold
p2p
\end_layout

\begin_layout Standard
Quindi servono reti di nuova generazione.
\end_layout

\begin_layout Subsection*
Next Generation Access Network
\end_layout

\begin_layout Standard
Il nostro scopo è di sostituire il collegamento fino a casa dell'utente
 con un collegamento in fibra ottica.
\end_layout

\begin_layout Standard
I vari modi per ottenere una rete di nuova generazione sono diversi:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Fiber to the Exchange 
\series default
\emph default
(
\series bold
\emph on
FTTE
\series default
\emph default
)
\end_layout

\begin_layout Itemize

\series bold
\emph on
Fiber to the Cabinet 
\series default
\emph default
(
\series bold
\emph on
FTT
\emph default
C
\series default
)
\end_layout

\begin_layout Itemize

\series bold
\emph on
Fiber to the Building 
\series default
\emph default
(
\series bold
\emph on
FTT
\emph default
B
\series default
)
\end_layout

\begin_layout Itemize

\series bold
\emph on
Fiber to the Home 
\series default
\emph default
(
\series bold
\emph on
FTT
\emph default
H
\series default
)
\end_layout

\begin_layout Standard
Ovviamente abbiamo un trade-off in base alla scelta che facciamo.
 L'ultima è la più costosa ma anche la migliore, la prima è la più economica
 ma anche la peggiore (in termini di velocità).
\end_layout

\begin_layout Subsubsection*
Fiber to the Exchange (FTTE)
\end_layout

\begin_layout Standard
È la soluzione già adottata in Italia e in molti altri pesi per raggiungere
 le velocità classiche dell'ADSL moderna.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename copper_network2.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Si tratta di far arrivare la fibra ottica dal 
\emph on
central office
\emph default
 allo 
\emph on
stadio di linea
\emph default
.
 Quindi insieme al dislam ci dovrà essere un qualche dispositivo per la
 conversione ottica/elettrica.
 Nei vecchi sistemi italiani lo 
\emph on
stadio di linea
\emph default
 e il 
\emph on
dislam
\emph default
 sono collegati al 
\emph on
central office
\emph default
 tramite il protocollo ATM (o Ethernet in alcuni casi).
 Dal 
\emph on
dislam
\emph default
 verso la rete dell'utente si riesce poi ad utilizzare tecnologie tipo ADSL,
 ADSL2 o ADSL2+.
 Per connessioni con collegamenti inferiori ai 400 metri è possibile anche
 utilizzare VDSL2 (che arriva a velocità molto elevate).
\end_layout

\begin_layout Subsubsection*
Fiber to the Cabinet (FTTC)
\end_layout

\begin_layout Standard
Abbiamo il vantaggio di poter andare più veloce perché il collegamento tra
 cabinet e casa resta in fibra ma è molto più corto del collegamento tra
 cabinet e central office (che invece è in fibra).
 Possiamo arrivare ad utilizzare collegamenti VDSL con 50Mb/s di download
 e 10 Mb/s di upload.
\end_layout

\begin_layout Standard
Abbiamo il problema che al cabinet arriva un segnale ottico e deve uscire
 un segnale elettrico.
 Serve un adattatore nel cabinet, non è più una matrice di collegamenti.
\end_layout

\begin_layout Standard
Quindi il cabinet diventa un dispositivo attivo! Quindi serve anche energia
 al cabinet! Il cabinet diventa più grande, bisogna chiedere dei permessi..
 Diventa complicato aumentare le dimensioni del cabinet.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 001.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
In questo caso con VDSL2 si riesce a raggiungere 50 Mbps in download e 10
 Mbps in upload.
\end_layout

\begin_layout Standard
Come fa un nuovo ISP a entrare nel mercato? Solitamente le leggi di molti
 stati obbligano il provider di linea principale a permettere ad altri ISP
 di usare la rete di accesso (sotto pagamento fissato dall'autorità per
 la competizione nelle telecomunicazioni).
\end_layout

\begin_layout Standard
L'ISP dominante si chiama 
\emph on
inconbent
\emph default
, quelli secondari si chiamano operatori 
\emph on
OLO
\emph default
.
\end_layout

\begin_layout Standard
Quindi può succedere che all'interno dello stesso cabinet sia presente hardware
 di più operatori.
 Quindi il cabinet deve diventare ancora più grande.
\end_layout

\begin_layout Subsubsection*
Fiber To The Building (FTTB)
\end_layout

\begin_layout Standard
Abbiamo un collegamento ottico dal central office fino al distribution frame
 dell'edificio, non passiamo per nessun cabinet.
 Quindi possiamo rimuovere i cabinet.
 Però poi dal distribution frame al collegamento domestico c'è un breve
 collegamento in rame.
 Nel distribution frame c'è un convertitore ottico-elettrico.
\end_layout

\begin_layout Standard
Sfruttando VDSL2 sul distribution frame possiamo raggiungere anche i 100Mbps.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 002.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Il problema è che dobbiamo scavare diversi chilometri nelle strade per posare
 la fibra.
 
\bar under
Non abbiamo il costo dei cabinet
\bar default
 ma abbiamo il costo degli scavi.
\end_layout

\begin_layout Subsubsection*
Fiber To The Home (FTTH)
\end_layout

\begin_layout Standard
È il metodo migliore di tutti, la terminazione ottica arriva all'interno
 dell'appartamento.
 Nell'interno o l'esterno dell'edificio, nel distribution frame abbiamo
 una matrice di collegamenti.
 Abbiamo una rete di accesso completamente in fibra.
\end_layout

\begin_layout Standard
Inoltre possiamo avere collegamenti simmetrici, possiamo arrivare fino a
 1 Gbps di banda 
\series bold
simmetrica
\series default
.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 003.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Abbiamo lo stesso problema di FTTB e dobbiamo anche arrivare all'interno
 degli appartamenti.
\end_layout

\begin_layout Standard
È uguale mettere il distribution frame dentro o fuori l'edificio?
\end_layout

\begin_layout Itemize
Se lo mettiamo dentro l'edificio bisogna anche bucare un muro e portare
 il cavo all'interno di qualche locale all'interno dell'edificio.
\end_layout

\begin_deeper
\begin_layout Itemize
Questo può essere un problema perché spesso il punto d'ingresso più semplice
 è la porta o il cancello d'ingresso.
\end_layout

\end_deeper
\begin_layout Itemize
Se lo lasciamo all'esterno ci potrebbero essere meno problemi.
\end_layout

\begin_layout Standard
Il tratto tra l'esterno dell'abitazione e l'interno è chiamato 
\emph on
tratto di adduzione
\emph default
.
\end_layout

\begin_layout Standard
A volte si possono sfruttare i buchi presenti per i tubi del gas, acqua,
 elettricità.
\end_layout

\begin_layout Standard
A volte dal distribution frame dell'edificio si fa partire un cavo per ogni
 piano, dove poi c'è un 
\bar under
collegamento a stella
\bar default
, chiamato 
\emph on
straccietto
\emph default
 che collega più appartamenti.
\end_layout

\begin_layout Standard
La terminazione ottica che arriva all'utente è chiamata anche 
\series bold
\emph on
ONU
\series default
\emph default
 (
\emph on
Optical Network Unit
\emph default
).
\end_layout

\begin_layout Standard
Arriva solitamente 1 fibra per utente da OLT (Optical Line Termination,
 dove c'è il central office) fino all'ONU.
\end_layout

\begin_layout Standard
Per utilizzare la fibra possiamo avere:
\end_layout

\begin_layout Itemize

\series bold
PTP
\series default
 (
\emph on
Point-To-Point Systems
\emph default
): fibra ottica dedicata che utilizza Fast Ethernet o Gigabit Ethernet dall'ONU
 fino al central office dell'ISP.
\end_layout

\begin_layout Itemize

\series bold
PON
\series default
 (
\emph on
Passive Optical Network
\emph default
): Una unica fibra viene condivisa tra più utenti che accedono alla rete
 (abbiamo visto l'esempio del piano).
 Vediamo di seguito alcune tecniche per realizzare questa soluzione.
\end_layout

\begin_layout Subsection*
Elementi delle reti di accesso di nuova generazione (NGAN)
\end_layout

\begin_layout Itemize

\series bold
OLT
\series default
 (
\emph on
Optical Line Termination
\emph default
): È il dispositivo terminale che può essere posto nell' SL o nel 
\emph on
central office
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
ONU
\series default
 (
\emph on
Optical Network Unit
\emph default
): É il dispositivo lato utente che effettua la conversione tra segnale
 ottico e segnale elettrico.
 È posto il più vicino possibile all'utente.
 Più ONU possono essere collegati ad un unico OLT.
\end_layout

\begin_deeper
\begin_layout Itemize
Nel caso di FTTC si trova all'interno del 
\bar under
cabinet
\end_layout

\begin_layout Itemize
Nel caso di FTTB si trova nel 
\bar under
distribution frame
\bar default
 dell'edificio
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
ONT 
\series default
(
\emph on
Optical Network Termination
\emph default
): Nel caso di FTTH è la terminazione in fibra che arriva 
\bar under
a casa
\bar default
 dell'utente.
\end_layout

\begin_layout Itemize

\series bold
ODF
\series default
 (
\emph on
Optical Distribution Frame
\emph default
): È un dispositivo che sostituisce l'MDF all'interno degli edifici dello
 
\emph on
stadio di linea
\emph default
 (SL).
\end_layout

\begin_layout Standard
In alcuni casi quando si effettua un collegamento all'utente può arrivare
 una sola fibra.
 Questo significa che per inviare e ricevere si utilizzano due lunghezze
 d'onda diverse.
 Si divide il canale con WDMA.
\end_layout

\begin_layout Standard
Però di solito il collegamento OLT-ONU utilizza due fibre distinte.
 In altri casi ancora si tiene una fibra aggiuntiva ma spenta (spesso per
 questioni legate all'affitto della linea ad altri operatori.
\end_layout

\begin_layout Standard
I 
\series bold
sistemi punto-punto (PTP systems)
\series default
 sono quei sistemi dove c'è una connessione ottica dedicata tra OLT e ONU
 (oppure ONT).
 Utilizza collegamenti Fast Ethernet (100 Mbps) o Gigabit Ethernet (1 Gbps)
\end_layout

\begin_layout Standard
Solitamente la rete di accesso ha una topologia a stella, comune anche alle
 reti in rame.
\end_layout

\begin_layout Standard
Essendo la linea completamente dedicata per l'utente si raggiungono le prestazio
ni massime.
 Però tutta questa fibra ha un costo non indifferente.
 
\end_layout

\begin_layout Subsection*
Sistemi punto-punto
\end_layout

\begin_layout Subsubsection*
Caso (FTTC) Fiber To The Cabinet
\end_layout

\begin_layout Standard
La fibra arriva dal 
\emph on
central office 
\emph default
oppure dallo 
\emph on
stadio di linea
\emph default
, fino al 
\emph on
cabinet
\emph default
.
\end_layout

\begin_layout Standard
In questo caso nel 
\emph on
cabinet
\emph default
 c'è l'ONU dove si intercollegano fibra e rame.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 004.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsubsection*
Caso (FTTB) Fiber To The Building
\end_layout

\begin_layout Standard
In questo caso la fibra ottica arriva fino al 
\emph on
distribution frame
\emph default
 al'interno dell'edificio.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 005.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Il dispositivo ONU in questo caso è posto all'interno del 
\emph on
distribution frame
\emph default
.
\end_layout

\begin_layout Subsubsection*
Caso (FTTH) Fiber To The Home
\end_layout

\begin_layout Standard
È il caso in cui la fibra arriva fino all'interno degli apparamenti.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 006.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Le terminazioni ottiche sono poste ad ogni piano dell'edificio.
\end_layout

\begin_layout Standard
Se l'edificio è molto distante dallo stadio di linea o central office può
 essere necessario l'utilizzo di due fibre per raggiungere la velocità di
 1Gbps o 10Gbps.
\end_layout

\begin_layout Subsection*
POM - Passive Optical Network
\end_layout

\begin_layout Standard
Nelle reti di tipo POM si utilizzano solo dispositivi passivi tra l'OLT
 (all'interno del 
\emph on
central office 
\emph default
o 
\emph on
stadio di linea
\emph default
) e l'ONU/ONT.
\end_layout

\begin_layout Standard
In questo caso la capacità della fibra ottica è condivisa tra più utenti.
\end_layout

\begin_layout Standard
I dispositivi passivi possono essere 
\series bold
\emph on
splitters
\series default
\emph default
, dispositivi che sudidvidono la banda per più utenti.
 Cioè effettua il multiplexing del segnale da più fibre su una fibra unica.
\end_layout

\begin_layout Standard
Uno splitter è caratterizzato da:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Split ratio:
\series default
\emph default
 
\begin_inset Formula $\left(1:n\right)$
\end_inset

 dove 
\emph on
n
\emph default
 è il numero di fibre ottiche in uscita (in direzione downlink)
\end_layout

\begin_deeper
\begin_layout Itemize
Il valore di 
\begin_inset Formula $n$
\end_inset

 può variare tra valori tipici di 32,64,128.
\end_layout

\end_deeper
\begin_layout Standard
Il segnale in ingresso allo splitter (in direzione di downlink) viene ritrasmess
o su tutte le 
\begin_inset Formula $n$
\end_inset

 fibre di uscita.
\end_layout

\begin_layout Standard
La 
\series bold
privacy
\series default
 dei dati in questo caso è un problema!
\end_layout

\begin_layout Standard
In figura vediamo un esempio di utilizzo di splitter in una architettura
 FTTB:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 007.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Questi splitter vengono solitamente posti all'interno di cabinet sotterranei.
\end_layout

\begin_layout Standard
Lo splitting può essere effettuato più volte, come in figura sopra.
\end_layout

\begin_layout Standard
Lo scopo del secondo splitter è quello di posare meno fibre nell'ultimo
 tratto.
\end_layout

\begin_layout Subsubsection*
Architettura PON nel caso FTTH
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 008.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
In questo caso di solito gli splitters si mettono all'interno del 
\emph on
cabinet
\emph default
 e nel 
\emph on
distribution frame 
\emph default
dell'edificio.
\end_layout

\begin_layout Standard
Gli splitters stradali in questo caso sono di solito 
\begin_inset Formula $\left(1:2\right)$
\end_inset

 o 
\begin_inset Formula $\left(1:4\right)$
\end_inset

, mentre quelli 
\emph on
distribution frame
\emph default
 sono 
\begin_inset Formula $\left(1:8\right)$
\end_inset

 o 
\begin_inset Formula $\left(1:32\right)$
\end_inset


\end_layout

\begin_layout Standard
Quindi si raggiunge alla fine un multiplex di valore 
\begin_inset Formula $\left(1:16\right)$
\end_inset

 fino a 
\begin_inset Formula $\left(1:128\right)$
\end_inset


\end_layout

\begin_layout Subsection*
TDM-PON
\end_layout

\begin_layout Standard
Time Division Multiplexing PONs utilizzano due diverse lunghezze d'onda
 per uplink e downlink.
 L'OLT all'interno del 
\emph on
central office
\emph default
 applica le procedure per l'accesso al mezzo condiviso.
 L'OLT applica una divisione di tempo: il tempo viene suddiviso in slots
 e ogni ramo di collegamento ONU-ONT (user-end) ha un time-slot dedicato.
\end_layout

\begin_layout Standard
Per evitare collisioni viene trasmesso un segnale di sincronizzazione dall'ONT.
\end_layout

\begin_layout Standard
Due standard che sono stati creati per le TDM-PONs sono:
\end_layout

\begin_layout Itemize
ITU G.984 Gigabit-capable-PON (
\series bold
GPON
\series default
)
\end_layout

\begin_deeper
\begin_layout Itemize
1480 nm - 1500 nm per il downlink
\end_layout

\begin_layout Itemize
1260 nm - 1360 nm per l'uplink
\end_layout

\begin_layout Itemize
Possiamo arrivare fino a circa 2.5 Gbps in downstream e 1.25 Gbps in upstream
\end_layout

\begin_layout Itemize
Il rapporto di splitting massimo è 1:128
\end_layout

\begin_layout Itemize
La lunghezza massima del collegamento può superare i 20 km
\end_layout

\begin_layout Itemize
GPON può trasportare ATM o Ethernet tramite incapsulamento
\end_layout

\end_deeper
\begin_layout Itemize
802.3ah Ethernet-PON (
\series bold
EPON
\series default
)
\end_layout

\begin_deeper
\begin_layout Itemize
Trasporta frame Ethernet nativi e utilizza una lunghezza d'onda 
\end_layout

\begin_deeper
\begin_layout Itemize
1490 nm per downstream
\end_layout

\begin_layout Itemize
1310 nm per upstream
\end_layout

\end_deeper
\begin_layout Itemize
Si raggiungono 1.25 Gbps simmetrici di velocità
\end_layout

\begin_layout Itemize
Un singolo collegamento EPON può raggiungere fino a 32 utenti con una distanza
 massima di 20 km
\end_layout

\end_deeper
\begin_layout Standard
Per aumentare la capacità delle reti di accesso ottiche condivise è possibile
 utilizzare la divisione del canale a lunghezza d'onda (WDMA).
\end_layout

\begin_layout Itemize

\series bold
Coarse WDM 
\series default
(
\series bold
CWDM
\series default
) si raggiungono fino a 18 lunghezze d'onda differenti.
\end_layout

\begin_layout Itemize

\series bold
Dense WDM
\series default
 (
\series bold
DWDM
\series default
) permette fino a 162 lunghezze d'onda differenti.
\end_layout

\begin_layout Subsubsection*
Dispositivi per reti WDM-PON
\end_layout

\begin_layout Standard
Il dispositivo fondamentale per creare un collegamento WDM-PON è la 
\emph on
Arrayed Waveguide Grating 
\emph default
(
\series bold
AWG
\series default
).
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 009.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Si tratta di un dispositivo passivo che suddivide diverse lunghezze d'onda
 provenienti da una fibra in differenti fibre.
\end_layout

\begin_layout Standard
È un dispositivo 
\series bold
bidirezionale.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 010.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Per collegare 
\begin_inset Formula $n$
\end_inset

 utenti sono necessarie 
\begin_inset Formula $2n$
\end_inset

 lunghezze d'onda, una per l'uplink e una per downlink per ogni utente.
\end_layout

\begin_layout Standard
Utilizzando fibre basate su WDM-PON si può condividere la stessa fibra tra
 più operatori.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 011.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsection*
Situazione attuale delle reti NGAN
\end_layout

\begin_layout Itemize
Definizione di 
\series bold
banda larga
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
La raccomandazione ITU-T I.113 definisce la banda larga come un 
\begin_inset Quotes eld
\end_inset


\series bold
collegamento con velocità superiore a quella di ISDN (Integrated Services
 Digital Network) a 1.5 o 2.0 Mbit/s
\series default

\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
La FCC definisce 
\end_layout

\begin_deeper
\begin_layout Itemize
Broadband: 200 kbit/s in una direzione
\end_layout

\begin_layout Itemize
Advanced broadband: almeno 200 kbit/s in entrambe le direzioni
\end_layout

\end_deeper
\begin_layout Itemize
La commissione europea definisce la banda larga come: capacità di downstream
 superiore a 144 kbit/s
\end_layout

\end_deeper
\begin_layout Itemize
Definizione di 
\series bold
Ultra Large Bandwidth
\series default
 (
\series bold
ULB
\series default
):
\end_layout

\begin_deeper
\begin_layout Itemize
È definita come il la banda 
\series bold
di picco
\series default
 superiore a 30 Mbit/s nella direzione di downstream, per un singolo utente.
\end_layout

\begin_layout Itemize
La vera capacità della linea (non di picco) può essere inferiore a causa
 delle policy per la concentrazione e shaping del traffico adottate dall'ISP.
\end_layout

\begin_layout Itemize
La ULB è definita in base alla capacità teorica della linea, poi bisogna
 vedere le scelte dell'ISP
\end_layout

\end_deeper
\begin_layout Subsubsection*
Sviluppo nei vari paesi
\end_layout

\begin_layout Itemize
In 
\series bold
Giappone
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Le soluzioni FTTH stanno aumentando, mentre diminuiscono quelle ADSL
\end_layout

\end_deeper
\begin_layout Itemize
In 
\series bold
America
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Le soluzioni FTTH stanno aumentando con un tasso di crescita molto elevato
\end_layout

\end_deeper
\begin_layout Subsubsection*
Ultra Large Bandwidth
\end_layout

\begin_layout Standard
Una strategia per lo sviluppo di una rete NGAN deve tenere conto di vari
 problemi economici.
\end_layout

\begin_layout Itemize
Gli investimenti richiesti per la rete NGAN, daranno realmente un miglioramento
 nei servizi forniti all'utente? Se sì, è conveniente sviluppare una rete
 NGAN?
\end_layout

\begin_layout Itemize
Nel caso delle utenze domestiche, si avranno dei miglioramenti tali da portare
 l'utente a spendere maggiormente? Solo un sottoinsieme della popolazione
 sarà interessato a pagare maggiormente per i servizi.
\end_layout

\begin_layout Itemize
NGAN aumenterà anche la velocità dei collegamenti P2P, quindi parte degli
 utenti potrebbe essere interessata per questo motivo.
 Infatti nei sistemi P2P il 
\begin_inset Quotes eld
\end_inset

ranking
\begin_inset Quotes erd
\end_inset

 dell'utente dipende soprattutto dalla capacità di acesso alla rete dell'utente!
\end_layout

\begin_layout Itemize
Quindi, è probabile che un aumento di velocità nei collegamenti crei nuova
 richiesta del servizio, in base al principio 
\begin_inset Quotes eld
\end_inset

nuove strade creno nuovo traffico
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Itemize
Inoltre gli utenti SOHO (
\emph on
Small Office Home Office
\emph default
) e SME (
\emph on
Small Medium Enterprise
\emph default
)
\emph on
 
\emph default
saranno potenzialmente interessati a migliorare i propri servizi.
\end_layout

\begin_layout Subsubsection*
Lo sviluppo delle reti NGAN
\end_layout

\begin_layout Standard
Tutte le varie soluzioni FTTx (FTTE,FTTC,...) richiedono infrastrutture costose.
\end_layout

\begin_layout Standard
La migrazione a una archiettura 100% FTTH richiede costi superiori a FTCC
 e FTTB ovviamente.
 Quindi gli operatori devono cercare un qualche tipo di 
\emph on
tradeoff
\emph default
 tra performance e costi.
\end_layout

\begin_layout Standard
In alcuni paesi comunuque, tipo in Italia, la differenza tra una migrazione
 FTTC/FTTB e FTTH non è così alta.
\end_layout

\begin_layout Standard
Questo dipende dallo stato attuale della rete di distribuzione, dalla popolazion
e, dalla struttura geografica e territorio nazionale.
\end_layout

\begin_layout Itemize
FTTH può richiedere fino a 5 volte costi maggiori rispetto a FTTC
\end_layout

\begin_layout Itemize
FTTH PTP può richiedere il 10% in più di investimento rispetto a FTTH PON.
\end_layout

\begin_layout Itemize
Le principali spese sono: cablaggio e scavi nelle strade.
\end_layout

\begin_layout Itemize
Un problema importante è replicare l'infrastruttura per permettere la condivisio
ne dei mezzi fisici da parte di più operatori.
 Questo è particolarmente vantaggioso nelle aree densamente popolate.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 012.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
La figura sopra mostra i dati relativi allo sviluppo di NGAN in UK per collegare
 tutta la popolazione (comparando FTTC/VDSL, FTTH/GPON, FTTH/PTP).
\end_layout

\begin_layout Itemize
FTTH/PTP offre performance migliori ma costi più elevati
\end_layout

\begin_layout Itemize
FTTH costa circa 5 volte di più di FTTC
\end_layout

\begin_layout Itemize
FTTH/PTP costa circa il 15% rispetto a FTTH/GPON
\end_layout

\begin_layout Itemize
Notiamo anche come i costi fissi (per costruire l'infrastruttura) sono molto
 più alti dei costi variabili (che sono invece i costi per attivare la connessio
ne dell'utente).
\end_layout

\begin_layout Itemize
Una strategia comune degli 
\emph on
Incumbent Operators
\emph default
 (gli operatori leader di mercato in un paese), è quella di costruire una
 infrastruttura FTTC come passo di transizione verso FTTH.
\end_layout

\begin_layout Subsubsection*
Sviluppo di NGAN in Italia
\end_layout

\begin_layout Standard
In Italia le soluzioni VDSL sono relativamente convenienti poiché la distanza
 dallo stadio di linea non è solitamente molto alta.
\end_layout

\begin_layout Standard
In Italia inoltre il 60% della popolazione vive in appartamenti in aree
 densamente popolate (mentre in UK solo il 15%!).
 Le due situazioni sono abbastanza diverse perché i costi di sviluppo per
 le aree urbane densamente popolate sono più bassi.
\end_layout

\begin_layout Subsubsection*
Sviluppo di NGAN e digital divide
\end_layout

\begin_layout Itemize
Il costo per utente crasce appena passiamo dagli utenti che vivono in aree
 metropolitane a utenti che vivono in aree rurali.
\end_layout

\begin_layout Itemize
Il costo per utente è 
\begin_inset Quotes eld
\end_inset

fisso
\begin_inset Quotes erd
\end_inset

 per il 60% della popolazione che vive in aree metropolitane, per il restante
 20-30% i costi salgono per raggiungere le aree rurali.
\end_layout

\begin_layout Itemize
Coprire il 100% della popolazione potrebbe non essere conveniente.
 Questo genererà però un nuovo 
\emph on
digital divide
\emph default
 tra gli utenti ULB e gli utenti con normale accesso LB.
\end_layout

\begin_layout Itemize
Ci si aspetta che questo nuovo 
\emph on
digital divide
\emph default
 possa essere risolto solo con fondi governativi, basati sull'idea di garantire
 uguale accesso a tutti.
\end_layout

\begin_layout Standard
Per esempio:
\end_layout

\begin_layout Itemize

\series bold
UK
\series default
: 
\end_layout

\begin_deeper
\begin_layout Itemize
Banda larga standard a tutti gli utenti entro la fine del 2012
\end_layout

\begin_layout Itemize
Accesso ULB al 90% degli utenti entro il 2017
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Francia
\end_layout

\begin_deeper
\begin_layout Itemize
Banda larga a 512 kbit/s a tutti gli utenti entro la fine del 2012
\end_layout

\end_deeper
\begin_layout Subsection*
Servizi consegnati tramite una rete NGAN
\end_layout

\begin_layout Standard
La migrazione tecnologica dalle reti attuali alle reti NGAN richiede un
 adattamento dei servizi che attualmente vengono forniti tramite una rete
 classica in rame.
\end_layout

\begin_layout Standard
I servizi possono essere emulati/simulati o sostituiti.
\end_layout

\begin_layout Standard
Partiamo classificando i tipi di servizi che ci interessano:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Intermediate services
\series default
\emph default
: Servizi utilizzati internamente da un operatore o da più operatori.
\end_layout

\begin_deeper
\begin_layout Itemize
Un esempio classico di questo è l'insieme di servizi per il collegamento
 delle antenne radiomobili (GSM/UMTS/LTE) al core della rete.
\end_layout

\begin_layout Itemize
Questo tipo di collegamento è chiamato 
\begin_inset Quotes eld
\end_inset


\emph on
backhauling connection
\emph default

\begin_inset Quotes erd
\end_inset

.
 Il problema di questi collegamenti non è la migrazione da rame a fibra.
 Il problema è che questi collegamenti lavorano su linee E1 (E1 è un segnale
 che lavora a 2.048 Mbps su rame o fibra).
 Questi segnali E1 è un segnale molto piccolo in banda e che deve essere
 precisamente sincronizzato.
 Inoltre questa linea non trasmette pacchetti ma stream di bit.
 Il problema è che se convertiamo la trasmissione da uno stream di bit in
 pacchetti IP perdiamo la sincronia (che viene sfruttata per diverse operazioni).
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
\emph on
Wholesale services
\series default
\emph default
:
\series bold
\emph on
 
\series default
\emph default
da operatori per altri operatori.
 Tra questi servizi c'è 
\emph on
colocation
\emph default
 (far ospitare dei propri apparati nelle infrastrutture di altri) e 
\emph on
unbundling
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
\emph on
Retail services
\series default
\emph default
: Sono i servizi per gli utenti finali.
\end_layout

\begin_layout Subsubsection*
Intermediate services
\end_layout

\begin_layout Standard
Un tipico esempio di questi servizi, come abbiamo già detto, è il collegamento
 di antenne radiomobili (GSM/UMTS/LTE) al core della rete.
\end_layout

\begin_layout Standard
In questo esempio specifico la tecnologia 
\emph on
pseudowire
\emph default
 potrebbe essere utilizzata come soluzione al problema.
 Un'altra possibilità è di utilizzare 
\emph on
Syncronous Ethernet
\emph default
.
\end_layout

\begin_layout Standard
Tutt'oggi gli operatori hanno questo problema e una delle soluzioni è di
 tenere un collegamento in fibra ottica affiancato da una linea E1 utilizzata
 unicamente per il sincronismo.
\end_layout

\begin_layout Standard
Un'altra soluzione al problema è di utilizzare dei ricevitori GPS per il
 sincronismo, però il sistema GPS è sotto il controllo del dipartimento
 della difesa americano, che può spegnerlo in qualunque momento.
\end_layout

\begin_layout Subsubsection*
Wholesale services
\end_layout

\begin_layout Standard
Un servizio di tipo 
\emph on
wholesale
\emph default
 può essere all'interno di tre categorie principali:
\end_layout

\begin_layout Itemize

\series bold
Bitstream access
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Da un punto di vista tecnico i servizi bitstream non generano problemi,
 il NGAN può offrire accesso a larga banda customizzabile.
 Solitamente per gli utenti business.
\end_layout

\begin_layout Itemize
La qualità del servizio (QoS) può essere differenziata almeno per i livello
 di priorità, per esempio con 802.1p
\end_layout

\begin_layout Itemize
Offrire diverse QoS tramite NGAN permette di condividere l'infrastruttura
 in modo intelligente per più applicazioni.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Wholesale Line Rental
\end_layout

\begin_deeper
\begin_layout Itemize
Il servizio classico di affitto di una linea può essere sostituito con una
 condivisione basata su trasmissione a pacchetti.
 
\end_layout

\begin_layout Itemize
Abbiamo anche qua però il problema di gestire il sincronismo
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Individual Line Rental
\end_layout

\begin_layout Itemize

\series bold
Unbundling 
\series default
e 
\series bold
colocation
\end_layout

\begin_deeper
\begin_layout Itemize
Solo i grossi operatori possono sostenere gli investimenti necessari per
 passare ad una rete NGAN.
 Permettere che anche i piccoli operatori possano competere è un problema.
\end_layout

\begin_layout Itemize
Per l'operatore 
\emph on
incumbent
\emph default
, la migrazione a NGAN porta alla rimozione dei 
\emph on
local exchange offices
\emph default
 (stadio di linea).
 Il problema è che queste strutture sono massicciamente utilizzate per la
 
\emph on
colocation
\emph default
 delle apparecchiature dei concorrenti, per implementare 
\emph on
unbundling 
\emph default
del 
\emph on
Local Loop
\emph default
 (ULL).
\end_layout

\begin_layout Itemize
In alcuni paesi come soluzione si lascia un po' di tempo (~5 anni) agli
 operatori per accordarsi su cosa fare.
\end_layout

\begin_layout Itemize
Un operatore in 
\emph on
colocation
\emph default
 può trasferire gli 
\emph on
unbundling 
\emph default
in altre locazioni oppure può realizzare dei 
\emph on
sub-loop unbundle 
\emph default
all'interno degli armadi stradali (solo nel caso FTTC).
\end_layout

\end_deeper
\begin_layout Subsubsection*
Reti di accesso metropolitane e rete di backbone
\end_layout

\begin_layout Standard
NGAN è riferito soltanto alla parte di accesso alla rete, in realtà il component
e centrale della rete dell'operatore è costituito dalla rete backbone nazionali
 o metropolitane.
\end_layout

\begin_layout Standard
Un possibile (non l'unica) soluzione architetturale è quella di operare
 a livello IP nella rete di accesso e backbone, mentre a livello Ethernet
 nella rete metropolitana, come mostrato in figura:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 013.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
La differenziazione della qualità del servizio è una questione abbastanza
 critica in questo caso.
\end_layout

\begin_layout Itemize
Nelle reti metropolitane il QoS può essere realizzato utilizzando più 
\series bold
VLANs IEEE 802.11q
\series default
 oppure 
\series bold
IEEE 802.1ad
\end_layout

\begin_layout Itemize
IEEE 802.1q differenzia la priorità all'interno delle VLAN tramite un campo
 di priorità inserito nel frame Ethernet.
 IEEE 802.1p è la reference che specifica il significato dei bit di priorità
 nel campo priorità di 802.1q
\end_layout

\begin_layout Itemize
Utilizzando 802.1q è possibile definire fino a 4096 VLAN differenti
\end_layout

\begin_layout Itemize
Con IEEE 802.1ad è possibile definire delle VLAN 802.1Q 
\begin_inset Quotes eld
\end_inset

stacked
\begin_inset Quotes erd
\end_inset

, cioè delle VLAN all'interno di una singola VLAN.
 Con questo metodo si può arrivare fino a 16'777'216 VLAN.
\end_layout

\begin_layout Itemize
La divisione delle VLAN potrebbe non essere così semplice.
 L'operatore potrebbe decidere di utilizzare alcune VLAN per operazioni
 di servizio: distizione tra 
\emph on
Customer VLANs 
\emph default
(
\series bold
C-VLAN
\series default
) e 
\emph on
Service VLANs
\emph default
 (
\series bold
S-VLAN
\series default
).
\end_layout

\begin_layout Itemize
Nelle reti metropolitane è spesso utilizato anche 
\series bold
MPLS
\series default
 (
\emph on
MultiProtocol Label Switching
\emph default
) 
\end_layout

\begin_deeper
\begin_layout Itemize
Un interessante feature di MPLS è la gestione del multicasting, che evita
 di replicare dei flussi identici.
 È utile per la distribuzione di contenuti audio/video.
\end_layout

\begin_layout Itemize
Per contrasto, nelle reti basate su VLAN Ethernet si replicano per forza
 tutti i flussi anche identici.
\end_layout

\end_deeper
\begin_layout Subsection*
Servizi multimediali IP nelle reti NGN
\end_layout

\begin_layout Standard
ETSI (
\emph on
European Telecommunications Standards Institute
\emph default
) ha creato un gruppo di lavoro chiamato 
\series bold
TISPAN
\series default
 (
\emph on
Telecommunications and Internet converged Services and Protocols for Advanced
 Networking
\emph default
) ha già definito diversi standard per le reti NGN.
 Una parte rilevante di questi standard copre i problemi relativi all'interconne
ssioni di diverse reti NGN di diversi operatori.
\end_layout

\begin_layout Standard
I requisiti 
\begin_inset Quotes eld
\end_inset

ad alto livello
\begin_inset Quotes erd
\end_inset

 sono:
\end_layout

\begin_layout Itemize
Il QoS deve essere negoziato sia al momento di instaurazione della connessione,
 sia quando la connessione è già stabilita.
\end_layout

\begin_layout Itemize
La negoziazione del QoS deve essere abilitata anche nel caso di 
\emph on
roaming
\emph default
 tra diversi operatori.
\end_layout

\begin_layout Itemize
Le sessioni multimediali IP devono supportare un vasto tipo di codecs audio
 e video.
\end_layout

\begin_layout Itemize
I servizi multimediali IP devono, il più possibile, essere forniti a una
 varietà di tecnologie di accesso (UTRAN, WiMAX, ...)
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 014.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Questa figura mostra la suddivisione logica tra i livelli di servizio e
 i livello di trasporto nelle NGN:
\end_layout

\begin_layout Itemize

\series bold
NGN Access Network Provider (NANP)
\series default
: concentra il traffico proveniente da più linee attraverso uno o più NGN
 Connectivity Providers.
\end_layout

\begin_layout Itemize

\series bold
NGN Connectivity Provider (NCP)
\series default
: fornisce la connettività al NGN Core Network Provider.
\end_layout

\begin_layout Itemize

\series bold
NGN Core Network Provider (NCNP)
\series default
: aggrega il traffico proveniente dai nodi estermi di diverse reti di accesso,
 verso diverse reti esterne.
\end_layout

\begin_layout Itemize

\series bold
NGN Service Provider (NSP)
\series default
: Si occupa dei servizi necessari al trasporto sulla NGN: autenticazione,
 service control, management, pagamenti.
 Nel caso dei servizi IPTV si occupa anche dei diritti d'autore (DRM).
\end_layout

\begin_layout Standard
Due operatori NGN interconnessi offrono dei servizi 
\emph on
end-to-end
\emph default
.
 La qualità del servizio deve essere garantita anche per collegamenti 
\emph on
end-to-end
\emph default
 tramite cooperazione tra gli operatori.
 Un esempio è Carrier-grade VoIP services.
\end_layout

\begin_layout Standard
TISPAN identifica la emulazione/sostituzione dei servizi PSTN/ISDN come
 punto chiave.
\end_layout

\begin_layout Standard
Con l'emulazione del servizio, un nuovo servizio è fornito tramite NGN con
 le stesse caratteristiche del vecchio servizio.
\end_layout

\begin_layout Standard
Per 
\begin_inset Quotes eld
\end_inset

sostituzione
\begin_inset Quotes erd
\end_inset

 si intende che alcune caratteristiche del servizio potrebbero cambiare.
\end_layout

\begin_layout Subsubsection*
Requisiti base per i servizi classici PSTN/ISDN
\end_layout

\begin_layout Itemize
Gestione della numerazione preservata
\end_layout

\begin_layout Itemize
Intercettazioni legali devono essere garantite
\end_layout

\begin_layout Itemize
I servizi di emergenza devono essere garantiti
\end_layout

\begin_layout Itemize
Il servizio 
\emph on
Malicious Call Identification
\emph default
 (MCID) deve essere garantito
\end_layout

\begin_layout Itemize
Il servizio 
\emph on
Anonymous Call Rejection
\emph default
 (ACR) deve essere garantito
\end_layout

\begin_layout Itemize
L'interoperabilità con il vecchio sistema deve essere garantita
\end_layout

\begin_layout Standard
Ci sono due categorie base in cui viene suddiviso il sistema telefonico:
\end_layout

\begin_layout Itemize
Servizi telefonici pubblici (PATS): È il servizio per mappare il servizio
 classico PSTN/ISDN e ha più stretti requisiti rispetto a ECS
\end_layout

\begin_layout Itemize
Electronic Communication Service, ECS
\end_layout

\begin_layout Standard
L'emulazione del servizio classico PSTN/ISDN è solitamente chiamato 
\series bold
ToIP
\series default
 (Telephony over IP), per distinguerlo da servizi ECS come VoIN (Voice over
 Internet).
\end_layout

\begin_layout Itemize
Nel servizio VoIN, solitamente gli operatori non controllano il servizio
 e non garantiscono QoS.
\end_layout

\begin_layout Itemize
Tipicamente i servizi VoIN sono la telefonia P2P come Skype o altri.
\end_layout

\begin_layout Itemize
Il servizio VoIN In&Out permette agli utenti di interconnettersi tramite
 reti esterne come PSTN/PLMN
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 015.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Chiamate a PSTN e PLMN
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Servizi addizionali (chiamate di emergenza, portabiltà numero, ...)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
VoIN P2P
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
no
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
no
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
VoIN In&Out
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sì (ma non completamente)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ToIP
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sì
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection*
Interconnessione di reti NGN
\end_layout

\begin_layout Standard
La interconnessione tra NGN è definita dallo standard ETSI/TISPAN di cui
 abbiamo già parlato.
\end_layout

\begin_layout Standard
In base a questi standard, l'interconnessione può essere effettuata mediante:
\end_layout

\begin_layout Itemize

\emph on
Service-Oriented Interconnection 
\emph default
(
\series bold
SoIx
\series default
)
\end_layout

\begin_layout Itemize

\emph on
Connectivity-Oriented Interconnection 
\emph default
(
\series bold
CoIx
\series default
)
\end_layout

\begin_layout Standard

\series bold
SoIx
\series default
 opera a livello a livello 
\emph on
service
\emph default
, mentre 
\series bold
CoIx 
\series default
opera a livello di trasporto.
\end_layout

\begin_layout Itemize

\series bold
SoIx
\series default
 è la interconnessione fisica e logica tra due diversi domini di due diversi
 operatori NGN.
 Permette agli operatori di offrire dei servizi con QoS 
\emph on
end-to-end
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
CoIx
\series default
 opera invece a livello IP, senza considerare QoS in stile 
\emph on
end-to-end
\emph default
.
 Può garantire solo requisiti di servizio a livello IP.
\end_layout

\begin_layout Subsubsection*
Funzionalità di interconnessione
\end_layout

\begin_layout Itemize
Riguardo alla interconnessione di diversi sistemi ToIP la funzione 
\series bold
\emph on
InterWorking Function 
\series default
\emph default
(
\series bold
IWF
\series default
) permette l'interconnessione tra diversi protocolli come SIP (
\emph on
Session Initiation Protocol
\emph default
) e ISUP (
\emph on
Integrated Services User Part
\emph default
)
\end_layout

\begin_layout Itemize
La 
\series bold
\emph on
Border Gateway Function 
\series default
\emph default
(
\series bold
BGF
\series default
) separa i due domini amministrativi permettendo QoS, sicurezza, tracciamento
 delle chiamate, log del traffico.
\end_layout

\begin_layout Itemize
La funzione di 
\series bold
\emph on
Resource and Admission Control Subsystem
\series default
\emph default
 (
\series bold
RACS
\series default
) controlla l'utilizzo di risorse a livello IP ed è resposabile del QoS
 a livello IP.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 016.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
La interconnessione di tipo CoIx permette agli operatori di fornire ai propri
 clienti la connettività necessaria per raggiungere le reti esterne.
 
\end_layout

\begin_layout Standard
Un esempio di interconnessione CoIx tipico è il peering IP.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="16" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Interconnection service
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Definizione
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Esempi di applicazione
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Termination
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Richieste di servizio originate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Terminazione telefonica, 
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dal lato OLO/SP e terminate a clienti 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
video streaming, sistemi di
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dell'operatore interconnesso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
messaggistica
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Collection
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Le richieste di servizio da parte degli
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Comunicazione con numeri 
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
utenti sono inoltrate all'OLO/SP
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
non geografici,carrier-selection e
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
 carrier-preselection
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Transit
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Le richieste di servizio da parte dell'
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Transito della telefonia
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OLO/SP sono inoltrate nella rete
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
 e video telefonia
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
IP transit
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Traffico IP dell'OLO/SP inoltrato sulla
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Transito IP verso
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
rete dell'operatore interconnesso
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
domini di peering
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Access
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Il traffico IP dei clienti è inoltrato
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Bitstream,
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
all'OLO/SP
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Linee in affitto
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
IP transport
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Traffico IP dell'OLO/SP tra due punti
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Linee in affitto
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
remoti che transitano sulla rete
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Interconnessioni
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dell'operatore interconnesso
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
VPN
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsubsection*
Requisiti SoIx
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 017.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize

\series bold
Requisiti per il signaling
\series default
: Interoperabilità del signaling e identificazione del servizio
\end_layout

\begin_layout Itemize

\series bold
Requisiti per i codecs
\series default
: Un insieme di codecs devono essere supportati, almeno G.711,AMR, G.729A,
 EVCR.
 La selezione automatica dei codecs deve essere abilitata.
 Deve essere possibile per il sistema utilizzare il codec a più bassa qualità
\end_layout

\begin_layout Itemize

\series bold
Codecs video
\series default
: H.263 e H.264
\end_layout

\begin_layout Itemize

\series bold
Routing
\series default
: Il routing basato sul servizio deve essere supportato
\end_layout

\begin_layout Itemize

\series bold
Security
\series default
: Intercettazioni legali, autorizzazione, autenticazione, access control,
 integrità dei dati, privacy
\end_layout

\begin_layout Itemize

\series bold
Billing e accounting
\series default
: Logs, report del traffico, generazione conti e controllo consumi (
\emph on
Charing Data Record 
\series bold
\emph default
CDR
\series default
)
\end_layout

\begin_layout Itemize

\series bold
QoS & SLA
\series default
: Prenotazione di risorse per sessioni QoS
\end_layout

\begin_layout Itemize

\series bold
Connection Admission Control
\end_layout

\begin_layout Section*
Multimedia Streaming
\end_layout

\begin_layout Standard
Per 
\emph on
Media Streaming
\emph default
 si intende la distribuzione di contenuti audio/video, solitamente sincronizzati.
\end_layout

\begin_layout Standard
La funzionalità base del media streaming è che il contenuto viene utilizzato
 
\series bold
mentre è trasferito sulla rete
\series default
, invece di scaricare e poi riprodurre in un secondo momento.
 Questa è la principale differenza tra i normali servizi di file sharing
 e il media streaming.
\end_layout

\begin_layout Subsection*
Codecs
\end_layout

\begin_layout Standard
I codecs audio e video svolgono un ruolo importante nel media streaming.
\end_layout

\begin_layout Itemize
Alcuni codecs forniscono solo una velocità di trasmissione, con 
\emph on
layered codecs 
\emph default
e i 
\emph on
multi-description codecs 
\emph default
è possibile scegliere diverse velocità di trasmissione che corrispondono
 solitamente a diverse qualità dei contenuti audio/video.
\end_layout

\begin_layout Itemize
I codecs di tipo 
\series bold
\emph on
layered
\series default
\emph default
 suddividono uno stream in un insieme di 
\emph on
substreams
\emph default
 separati chiamati 
\series bold
\emph on
layers
\series default
\emph default
.
\end_layout

\begin_layout Itemize
L'utente deve essere in grado di ricevere almeno il layer più basso per
 poter iniziare la riproduzione
\end_layout

\begin_layout Itemize
Aggiungere layer sopra a quello base aumenta la qualità, se l'utente ha
 la banda necessaria per scaricarli.
\end_layout

\begin_layout Itemize
I codecs 
\emph on
layered 
\emph default
sono quindi migliori perchè il contenuto multimediale si può 
\begin_inset Quotes eld
\end_inset

adattare
\begin_inset Quotes erd
\end_inset

 alle risorse dell'utente.
\end_layout

\begin_layout Itemize
Lo svantaggio è che a parità di qualità, i codecs layered consumano più
 banda.
\end_layout

\begin_layout Subsection*
Costi per la comunicazione
\end_layout

\begin_layout Itemize
I costi per il trasporto di contenuti multimediali a livello di provider
 sono un problema da tenere in considerazione
\end_layout

\begin_layout Itemize
I costi possono essere molto variabili.
 Un'idea ragionevole è che la trasmissione di un film medio compresso con
 MPEG2 a 5Mbit/s non deve costare più di 1$.
\end_layout

\begin_layout Itemize
Per ridurre i costi del trasporto possono essere adottate una serie di soluzioni
, tra cui il 
\emph on
caching
\emph default
.
\end_layout

\begin_layout Itemize
Anche il 
\series bold
multicast
\series default
 è una soluzione efficiente, anche se non viene spesso utilizzata dai providers
 a causa della difficoltà di gestione.
 Spesso è più comodo sfruttare MPLS per fare multicasting.
\end_layout

\begin_layout Subsection*
Media Streaming
\end_layout

\begin_layout Standard
Un servizio per la distribuzione di contenuti multimediali può utilizzare
 una tecnologia di trasporto seguendo due stili:
\end_layout

\begin_layout Itemize

\series bold
Pull
\series default
: L'utente sceglie e richiede esplicitamente un contenuto specifico.
\end_layout

\begin_layout Itemize

\series bold
Push
\series default
: I contenuti sono forniti, tramite un canale di distribuzione, in base
 ad una certa pianificazione
\end_layout

\begin_layout Standard
Un altro modo per caratterizzare i servizi di media streaming è tramite
 la loro dipendenza dal ritardo:
\end_layout

\begin_layout Itemize

\series bold
Live events
\series default
: Per esempio una partita di calcio, richiede di riuscire a garantire un
 ritardo massimo dello stream nell'ordine di 1 secondo.
\end_layout

\begin_layout Itemize

\series bold
Eventi non live
\series default
: Ad esempio un film.
 Il ritardo anche di qualche secondo è ammesso.
\end_layout

\begin_layout Subsubsection*
Playout buffer
\end_layout

\begin_layout Standard
Nel client dell'utente finale, una parte del contenuto multimediale viene
 accumulato in un buffer di playout prima di essere riprodotto.
\end_layout

\begin_layout Itemize
Il buffer di playout compensa la variazione di velocità della rete.
\end_layout

\begin_layout Itemize
Maggiore è la dimensione del buffer, minore diventa la frequenza dei buffer
 underflows, che degradano la qualità video.
\end_layout

\begin_layout Itemize
Tuttavia, più aumentiamo la dimensione del buffer, più aumentiamo il delay
 complessivo dello stream e il delay iniziale di riproduzione.
\end_layout

\begin_layout Itemize
Quindi è necessario trovare un tradeoff sulla dimensione di questo buffer.
 Questo tradeoff varia solitamente a seconda del tipo di contenuto (push/pull,
 live/non live).
\end_layout

\begin_layout Subsubsection*
Streaming unicast
\end_layout

\begin_layout Standard
Unicast streaming significa la trasmissione di un contenuto multimediale
 con un approccio classico 
\emph on
client-server
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 018.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Almeno 
\series bold
due flussi 
\series default
vengono stabiliti tra il client e il server.
 In uno viene inviato il contenuto multimediale, nell'altro viene fatto
 
\emph on
signaling
\emph default
 per scambiare dei 
\emph on
feedback
\emph default
 sulla qualità.
\end_layout

\begin_layout Standard
Per aumentare le performance è possibile mettere dei server periferici (dei
 proxy) e poi distribuire i contenuti dai proxy verso l'utente finale.
 Questo è quello che fanno sostanzialmente i CDN (
\emph on
Content Delivery Network
\emph default
).
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 019.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
La distribuzione dei contenuti verso i proxy è solitamente fatta tramite
 ftp o ftps.
\end_layout

\begin_layout Subsubsection*
Streaming Multicast
\end_layout

\begin_layout Standard
Il 
\emph on
multicasting
\emph default
 è un modo molto efficiacie per distribuire lo stesso contenuto a più utenti
 senza replicare i flussi.
\end_layout

\begin_layout Itemize
Il 
\series bold
problema
\series default
 basilare è che IP fornisce solo delle primitive per capacità di multicasting,
 insufficienti per fornire una distribuzione scalabile dei contenuti.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Perché?
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
Tecnologie come MPLS sono piuttosto efficaci per implementare il multicasting
 a livello superiore, aggregando i flussi identici.
\end_layout

\begin_layout Itemize
Nei sistemi P2P il multicasting è effettuato a livello di overlay, a livello
 7.
\end_layout

\begin_layout Subsubsection*
Real Time Streaming Protocol 
\end_layout

\begin_layout Standard

\emph on
Real Time Streaming Protocol
\emph default
 (
\series bold
RTSP
\series default
) è un protocollo 
\emph on
client-server
\emph default
 per la distribuzione di contenuti multimediali su reti IP.
\end_layout

\begin_layout Standard
RTSP è stato inizialmente sviluppato da 
\emph on
Progressive Networks
\emph default
, 
\emph on
Netscape Communications 
\emph default
e 
\emph on
Columbia University
\emph default
 in modo congiunto.
\end_layout

\begin_layout Standard

\series bold
RTSP può interoperare
\series default
 con popolari protocolli media-related di Internet:
\end_layout

\begin_layout Itemize

\emph on
Real Time Protocol 
\emph default
(
\series bold
RTP
\series default
) e 
\emph on
Real Time Control Protocol
\emph default
 (
\series bold
RTCP
\series default
)
\end_layout

\begin_layout Itemize

\emph on
ReSerVation Protocol
\emph default
 (
\series bold
RSVP
\series default
)
\end_layout

\begin_layout Itemize

\emph on
HyperText Transfer Protocol 
\emph default
(
\series bold
HTTP
\series default
)
\end_layout

\begin_layout Itemize

\emph on
Session Description Protocol
\emph default
 (
\series bold
SDP
\series default
)
\end_layout

\begin_layout Standard
RTSP fornisce all'utente una serie di comandi per controllare la riproduzione
 di un video:
\end_layout

\begin_layout Itemize

\series bold
Start
\end_layout

\begin_layout Itemize

\series bold
Pause
\end_layout

\begin_layout Itemize

\series bold
Jump
\end_layout

\begin_layout Itemize

\series bold
Fast forward
\end_layout

\begin_layout Itemize

\series bold
Fast reverse
\end_layout

\begin_layout Standard
Solitamente lato server abbiamo un media server e un web server dove l'utente
 può scegliere il contenuto da riprodurre.
 L'utente tramite HTTP può ottenere l' 
\series bold
SDP
\series default
 (
\emph on
Session Description Protocol
\emph default
) la descrizione della sessione.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 020.png
	scale 30

\end_inset


\end_layout

\begin_layout Subsubsection*
Esempio: Comunicazione con il webserver
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Plain Layout

GET /Mission_to_Mars.sdp HTTP/1.1
\end_layout

\begin_layout Plain Layout

Host: www.movieinfo.com
\end_layout

\begin_layout Plain Layout

Accept: application/sdp
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

HTTP/1.1 200 OK
\end_layout

\begin_layout Plain Layout

Content-Type: application/sdp
\end_layout

\begin_layout Plain Layout

V=0
\end_layout

\begin_layout Plain Layout

O=2890844526 2890842807 IN IP4 192.16.24.202
\end_layout

\begin_layout Plain Layout

S=RTSP session
\end_layout

\begin_layout Plain Layout

M=audio 0 RTP/AVP 0
\end_layout

\begin_layout Plain Layout

A=control:rtsp://audio.source.com/Mission_to_Mars/audio
\end_layout

\begin_layout Plain Layout

M=video 0 RTP/AVP 32
\end_layout

\begin_layout Plain Layout

A=control:rstp://video.source.com/Mission_to_Mars/video 
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
Esempio RTSP: Setup audio/video server
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Plain Layout

//client to audio server 
\end_layout

\begin_layout Plain Layout

SETUP rtsp://audio.source.com/Mission_to_Mars/audio RTSP/1.0
\end_layout

\begin_layout Plain Layout

CSeq:1 
\end_layout

\begin_layout Plain Layout

Transport: RTP/AVP/UDP;unicast;client_port=3056-3057
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

//audio server to client 
\end_layout

\begin_layout Plain Layout

RTSP/1.0 200 OK
\end_layout

\begin_layout Plain Layout

CSeq:1
\end_layout

\begin_layout Plain Layout

Session: 12345678
\end_layout

\begin_layout Plain Layout

Transport: RTP/AVP/UDP;unicast;client_port=3056-3057;server_port=5000-5001
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

//client to video server
\end_layout

\begin_layout Plain Layout

SETUP rtsp://video.source.com/Mission_to_Mars/video RTSP/1.0
\end_layout

\begin_layout Plain Layout

CSeq:1 Transport: RTP/AVP/UDP;unicast;client_port=3058-3059
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

//video server to client 
\end_layout

\begin_layout Plain Layout

RTSP/1.0 200 OK
\end_layout

\begin_layout Plain Layout

CSeq:1
\end_layout

\begin_layout Plain Layout

Session: 23456789
\end_layout

\begin_layout Plain Layout

Transport: RTP/AVP/UDP;unicast;client_port=3058-3059;server_port=5002-5003
 
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
Esempio RTSP: Play media
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Plain Layout

//play instructions to servers 
\end_layout

\begin_layout Plain Layout

PLAY rtsp://video.source.com/Mission_to_Mars/video RTSP/1.0
\end_layout

\begin_layout Plain Layout

CSeq:2
\end_layout

\begin_layout Plain Layout

Session: 23456789 #range: smte=0:10:00-
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

RTSP/1.0 200 OK
\end_layout

\begin_layout Plain Layout

CSeq:2 
\end_layout

\begin_layout Plain Layout

Session: 23456789 #range: smte=0:10:00-
\end_layout

\begin_layout Plain Layout

RTP-info: url=rstp://video.source.com/Mission_to_Mars/video;seq=123122322;rtptime=
78712811
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

PLAY rtsp://audio.source.com/Mission_to_Mars/audio.it RTSP/1.0
\end_layout

\begin_layout Plain Layout

CSeq:2 
\end_layout

\begin_layout Plain Layout

Session: 12345678 #range: smte=0:10:00-
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

RTSP/1.0 200 OK
\end_layout

\begin_layout Plain Layout

CSeq:2
\end_layout

\begin_layout Plain Layout

Session: 12345678 #range: smte=0:10:00- 
\end_layout

\begin_layout Plain Layout

RTP-info: url=rstp://audio.source.com/Mission_to_Mars/audio.it;seq=876655;rtptime=1
0325465 
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Sistemi per 
\emph on
Real Time Streaming
\end_layout

\begin_layout Standard
Negli anni 90' il 
\emph on
Video on Demand
\emph default
 era considerato una delle applicazioni più interessanti e con più successo
 per i collegamenti a banda larga.
 La previsione fu errata perché il problema di stabilire un servizio di
 
\emph on
video on demand
\emph default
 ha diversi problemi di business (non tecnologici).
\end_layout

\begin_layout Standard
Infatti fornire 
\emph on
video on demand
\emph default
 è molto costoso ed è difficile formare un modello di business dove i costi
 sono compensati dai guadagni ottenuti dai soldi che l'utente ha intenzione
 di spendere per un servizio del genere.
\end_layout

\begin_layout Standard
Dagli anni 90' in poi ci sono stati diversi sviluppi in vari campi:
\end_layout

\begin_layout Itemize
Sviluppo di nuovi codecs a basso rate 
\end_layout

\begin_layout Itemize
Server video più efficienti e più scalabili
\end_layout

\begin_layout Itemize
Accesso a banda larga per più utenti
\end_layout

\begin_layout Subsubsection*
Multimedia Servers
\end_layout

\begin_layout Standard
I server video multimediali devono memorizzare un grosso contenuto di dati,
 quindi è necessaria una grossa capacità di storage, nell'ordine dei diversi
 
\emph on
terabytes
\emph default
.
\end_layout

\begin_layout Standard
I server devono anche avere un accesso a banda molto larga per poter ricevere
 le richieste da parte di moltissimi utenti.
\end_layout

\begin_layout Itemize
L'efficienza sui costi per lo storage è un problema
\end_layout

\begin_layout Itemize
Le tecniche più comuni sono architetture di storage gerarchico, dove i contenuti
 ad alto rate sono memorizzati su dischi ottici o nastri, mentre gli hard
 disk e gli array di dischi vengono utilizzati per i contenuti richiesti
 da molti utenti.
 In questo caso lo 
\emph on
striping
\emph default
 è una tecnica adottata comunemente.
\end_layout

\begin_layout Subsubsection*
RAID
\end_layout

\begin_layout Standard
Significa 
\emph on
Redundant Array of Inexpensive Disks
\emph default
, è una architettura di storage efficiente dal punto di vista dei costi.
\end_layout

\begin_layout Standard
Un grosso numero di dischi a basso costo è utilizzato per raggiungere una
 quantità di spazio superiore.
\end_layout

\begin_layout Standard
Gli 
\series bold
\emph on
stripes
\series default
\emph default
 (chunk dello stesso media) sono salvati su dischi diversi.
\end_layout

\begin_layout Standard
Si riesce a distribuire i contenuti visualizzati da molti utenti ed evitare
 i colli di bottiglia su un unico disco.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 021.png
	scale 30

\end_inset


\end_layout

\begin_layout Subsubsection*
La 
\emph on
long tail
\emph default
 dei contenuti
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 022.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard

\emph on
Long Tail
\emph default
 è un termine che indica il fatto che alcuni produttori di contenuti multimedial
i 
\begin_inset Quotes eld
\end_inset

fisici
\begin_inset Quotes erd
\end_inset

 hanno pochi prodotti e molte vendite, mentre i rivenditori di contenuti
 digitali hanno solitamente tantissimi prodotti ma pochissime vendite (vedi
 figura).
\end_layout

\begin_layout Standard
Il modello di distribuzione basato sul web permette ai distributori di creare
 un catalogo infinito di contenuti, in contrasto con (ad esempio), un negozio
 di DVD dove lo spazio fisico è un problema.
\end_layout

\begin_layout Standard
Un altro esempio è l'evoluzione del mercato dei libri con l'avvento della
 vendita online.
\end_layout

\begin_layout Subsubsection*
YouTube
\end_layout

\begin_layout Standard
YouTube è il tipico esempio di un distributore 
\emph on
long-tailed
\emph default
 di contenuti digitali.
 YouTube fornisce sia contenuti ad alto che a basso bitrate.
 Il numero di contenuti forniti è virtualmente infinito.
 YouTube inoltre fornisce dei contenuti caricati dagli utenti, un business
 che non si può raggiungere con la vendita classica di contenuti multimediali.
\end_layout

\begin_layout Part*
Peer-To-Peer Systems
\end_layout

\begin_layout Subsection*
Caratteristiche dei sistemi P2P
\end_layout

\begin_layout Itemize

\series bold
Vantaggi
\end_layout

\begin_deeper
\begin_layout Itemize
Sono basati sua una infrastruttura di rete che non è centralizzata, i vari
 peer comunicano tra di loro invece che con un server centrale.
 Questo permette di scalare il sistema a milioni di utenti senza problemi
 sull'infrastruttura.
\end_layout

\begin_layout Itemize
Permettono una migliore gestione della banda disponibile, che non è possibile
 con il modello 
\emph on
client/server
\emph default
 che genera rallentamenti all'aumentare dei clients.
\end_layout

\begin_layout Itemize
Non c'è necessità di amministrare il sistema.
 Il sistema di autoregola.
 È un sistema tollerante ai guasti perché nessun nodo è indispensabile al
 funzionamento dell'architettura.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Svantaggi
\end_layout

\begin_deeper
\begin_layout Itemize
Non è sempre facile effettuare l'operazione di ricerca, quindi bisogna sempre
 sviluppare sistemi di ricerca leggermente complessi nelle reti P2P
\end_layout

\begin_layout Itemize
La diffusione del materiale DRM, coperto da copyright è un problema.
\end_layout

\begin_layout Itemize
La banda disponibile in upload per i peers può essere il collo di bottiglia
 del sistema.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Caratteristiche
\end_layout

\begin_deeper
\begin_layout Itemize
I sistemi P2P sono suddivisi in un 
\series bold
\emph on
overlay
\series default
\emph default
 e un 
\series bold
\emph on
underlay
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Solitamente l'
\emph on
underlay
\emph default
 è Internet e la rete di 
\emph on
overlay
\emph default
 è creata dal sistema che si occupa di collegare tra di loro vari peer.
 
\end_layout

\begin_layout Itemize
Nella rete di 
\emph on
overlay
\emph default
 possiamo quindi costruire delle topologie di rete complesse, anche ad albero
 per esempio.
\end_layout

\begin_layout Itemize
Si può implementare il 
\series bold
multicast
\series default
 a livello di 
\emph on
overlay
\emph default
.
\end_layout

\begin_layout Itemize
I sistemi P2P spesso utilizzano le 
\series bold
\emph on
Distributed Hash Table
\series default
\emph default
 (
\series bold
DHT
\series default
) per associare i contenuti ai peer.
 
\end_layout

\end_deeper
\begin_layout Subsection*

\emph on
Distributed Hash Tables
\end_layout

\begin_layout Standard
È un sistema che implementa un servizio simile ad una tabella di hash, che
 è però suddivisa tra vari nodi di una rete.
 La suddivisione è strutturata in modo che se viene a mancare uno dei membri
 della rete, la perdita di informazione è minima.
\end_layout

\begin_layout Standard
I componenti di una DHT sono:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Keyspace
\series default
\emph default
: Ad esempio l'insieme delle stringhe md5 da 128bit di hash (32 caratteri
 hex)
\end_layout

\begin_layout Itemize

\series bold
Schema di partizionamento del keyspace
\series default
: suddivide le proprietà delle varie parti del 
\emph on
keyspace
\emph default
 tra i vari nodi.
\end_layout

\begin_layout Itemize

\series bold
Rete di 
\emph on
overlay
\emph default
: 
\series default
connette i nodi tra di loro, permettendo di trovare i proprietari delle
 varie parti di chiavi.
\end_layout

\begin_layout Standard
La DHT è composta da un insieme di coppie 
\begin_inset Formula $\left(chiave,\, valore\right)$
\end_inset

 o 
\begin_inset Formula $\left(key,\, value\right)$
\end_inset

.
 Ad ogni nodo vengono assegnate alcune chiavi.
 Il nodo è responsabile di mantenere il valore associato a quelle chiavi.
\end_layout

\begin_layout Standard
Ci sono varie implementazioni, tra cui ad esempio 
\emph on
Chord, CAN, Tapestry 
\emph default
e
\emph on
 Pastry
\emph default
.
 Noi analizzeremo 
\series bold
\emph on
Chord
\series default
\emph default
 come esempio.
\end_layout

\begin_layout Section*
Chord
\end_layout

\begin_layout Standard
È una implementazione di un sistema a DHT sviluppata nel 2001 insieme ad
 altri famosi sistemi DHT.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 023.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Chord sostanzilmente supporta una sola funzione: 
\series bold
data una chiave, mappa la chiave su un nodo.
\end_layout

\begin_layout Itemize
Tiene delle coppie 
\begin_inset Formula $\left(key,value\right)$
\end_inset

 , implementa una grossa tabella di coppie.
 Questa tabella non è centralizzata ma è distribuita tra i peer del sistema
 peer-to-peer.
\end_layout

\begin_layout Itemize
Il sistema ha un algoritmo per assegnare ai nodi (peers) le chiavi per le
 quali sono responsabili (un piccolo sottoinsieme).
\end_layout

\begin_layout Itemize
Trovare una risorsa significa trovare 
\series bold
un nodo responsabile
\series default
 per quella risorsa.
 Le risorse sono identificate dall'hash di qualche testo che le identifica.
 Questa è la 
\series bold
chiave
\series default
.
\end_layout

\begin_layout Itemize
Una caratteristica fondamentale di Chord è che quando cerchiamo una chiave,
 non troviamo il valore ma il nodo responsabile per essa.
\end_layout

\begin_layout Itemize
I 
\series bold
valori
\series default
 sono invece gli identificatori dei peer responsabili per una certa chiave.
 Quindi l'hash dell'indirizzo IP o di altre informazioni sulla rete di 
\emph on
overlay
\emph default
.
\end_layout

\begin_layout Itemize
Assumiamo di avere un hash di 
\begin_inset Formula $m$
\end_inset

 bits, allora abbiamo 
\begin_inset Formula $2^{m}$
\end_inset

 nodi.
 Abbiamo un evidente problema di collissioni: due cose diverse che diventano
 lo stesso hash.
 Questo problema è abbastanza improbabile comunque.
\end_layout

\begin_layout Standard
Solitamente rappresentiamo questi 
\begin_inset Formula $2^{m}$
\end_inset

 nodi in un cerchio che rappresenta l'intero 
\begin_inset Quotes eld
\end_inset

spazio
\begin_inset Quotes erd
\end_inset

 di hashing coperto dalla nostra funzione.
 All'interno di questo spazio sono presenti i vari nodi distribuiti in modo
 uniforme.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 024.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Il cerchio può contenere ID/chiavi da 
\begin_inset Formula $0$
\end_inset

 a 
\begin_inset Formula $2^{m}-1$
\end_inset

.
\end_layout

\begin_layout Subsubsection*
Consistenza delle chiavi
\end_layout

\begin_layout Standard
Abbiamo un problema di 
\series bold
consistenza
\series default
 perché quando allochiamo gli hash dei nomi dobbiamo tentare di occupare
 con probabilità uniforme tutte le parti dello spazio di hashing: 
\series bold
\emph on
consistent hashing
\series default
\emph default
.
 
\end_layout

\begin_layout Itemize
L'algoritmo 
\series bold
SHA-1
\series default
 è quello utilizzato in questo caso per realizzare la funzione di hashing
 (SHA-1 utilizza 160 bits di digest).
\end_layout

\begin_layout Itemize
L'idea di chord è che ogni peer è responsabile per una quantità di chiavi
 equivalente alla quantità di spazio di hashing tra lui e il peer seguente
 all'interno della circonferenza che rappresenta lo spazio di hashing.
\end_layout

\begin_layout Itemize
Se l'algoritmo di hash non è consistente avremo anche un problema di load
 balancing, perchè alcuni peers sono carichi di lavoro rispetto ad altri.
\end_layout

\begin_layout Itemize
Il fatto di avere 
\emph on
consistent hashing
\emph default
 è anche una caratteristica importante per riuscire a gestire le azioni
 di join e leave dalla rete senza grossi problemi.
\end_layout

\begin_layout Itemize
Poiché la tabella di routing è distribuita, un modo può risolvere la funzione
 di hash comunicando con pochi altri nodi.
\end_layout

\begin_layout Subsection*
Altre caratteristiche
\end_layout

\begin_layout Itemize
Il fatto che un host contenga la tabella di certe chiavi non significa che
 lui contiene quei contenuti, significa solo che sa chi li possiede (il
 valore nella coppia che ha in tabella).
\end_layout

\begin_layout Itemize
Quando devo fare una query la faccio ad un vicino, se lui non lo sa, sarà
 lui a girare la richiesta ad altri peers.
\end_layout

\begin_deeper
\begin_layout Itemize
Se la rete contiene 
\begin_inset Formula $N$
\end_inset

 nodi, la query per una risorsa ha una complessità di 
\begin_inset Formula $O\left(log\left(N\right)\right)$
\end_inset

, quindi chord è molto efficiente.
\end_layout

\begin_layout Itemize
Allo stesso tempo ogni nodo deve tenere in memoria le informazioni di solo
 altri 
\begin_inset Formula $O\left(log\left(N\right)\right)$
\end_inset

 nodi.
\end_layout

\end_deeper
\begin_layout Standard
Quindi le feature di chord sono:
\end_layout

\begin_layout Itemize

\series bold
Load balancing
\series default
: perchè consistent hashing
\end_layout

\begin_layout Itemize

\series bold
Decentralizzazione completa
\series default
: nessun nodo è più importante degli altri
\end_layout

\begin_layout Itemize

\series bold
Scalabilità
\series default
: possiamo arrivare fino a milioni di nodi e il costo di una ricerca è di
 complessità logaritmica.
\end_layout

\begin_layout Itemize
Lo spazio delle chiavi è 
\begin_inset Quotes eld
\end_inset

piatto
\begin_inset Quotes erd
\end_inset

, 
\series bold
non c'è gerarchia
\series default
.
 Non ci sono limitazion sulla struttura delle chiavi da cercare.
\end_layout

\begin_layout Itemize

\series bold
Disponibilità
\series default
 (Availability): Chord aggiorna automaticamente le sue tabelle per includere
 i nuovi nodo entrati nella rete, così come i nodi che sono usciti dalla
 rete.
 Assumendo i 
\emph on
failure
\emph default
 possibili si riesce sempre a trovare un nodo responsabile per una chiave.
\end_layout

\begin_layout Standard
Solitamente l'applicazione p2p tipo 
\emph on
chord
\emph default
 contiene al suo interno vari componenti:
\end_layout

\begin_layout Itemize
Una 
\series bold
tabella di chiavi e valori
\series default
 che associano i computer responsabili per un certo hash.
 Questa tabella deve essere strutturata in modo che quando arriva una query
 sia consultata e sia data una risposta.
\end_layout

\begin_layout Itemize
C'è poi una sezione di 
\series bold
risorse
\series default
, i contenuti che l'host condivide (che devono essere indicizzati da altri
 sistemi).
\end_layout

\begin_layout Itemize
Ci deve poi essere un sistema per 
\series bold
costruire delle queries
\series default
.
 Ovviamente deve avere qualche parametro di sistema che descrive dov'è il
 computer (il suo 
\begin_inset Quotes eld
\end_inset

indirizzo
\begin_inset Quotes erd
\end_inset

) E quali computer deve interrogare per construire una richiesta.
 Quindi il computer ha informazioni riguardo ad altri 
\series bold
pochi 
\series default
nodi (
\begin_inset Formula $log\left(N\right)$
\end_inset

)
\end_layout

\begin_layout Standard
Vediamo un 
\series bold
esempio di rete chord
\series default
:
\end_layout

\begin_layout Itemize
\begin_inset Formula $m=3$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $2^{m}=8$
\end_inset

 peers sul cerchio di hash
\end_layout

\begin_layout Standard
Assegnamo delle chiavi ai nodi.
 La chiave 
\begin_inset Formula $k$
\end_inset

 è assegnata al primo nodo il cui hash (
\emph on
value
\emph default
) segue il valore delle chiave 
\begin_inset Formula $k$
\end_inset

 sulla circonferenza di hash.
 Questo nodo ha un nome, si chiama 
\begin_inset Formula $successor\left(k\right)$
\end_inset

, cioè il nodo successore di 
\begin_inset Formula $k$
\end_inset

.
 
\end_layout

\begin_layout Standard
Se ci sono 
\begin_inset Formula $N$
\end_inset

 nodi e 
\begin_inset Formula $K$
\end_inset

 chiavi, ogni nodo è responsabile di 
\begin_inset Formula $\frac{K}{N}$
\end_inset

 chiavi.
 Quindi quando un nodo lascia la rete è necessario una ridistribuzione di
 
\begin_inset Formula $O\left(\frac{K}{N}\right)$
\end_inset

 chiavi.
\end_layout

\begin_layout Itemize
Se gli identificatori sono rapresentati nel cerchio di hashing con numeri
 da 0 a 
\begin_inset Formula $2^{m}-1$
\end_inset

, allora il 
\begin_inset Formula $successor\left(k\right)$
\end_inset

 è il primo nodo in senso orario da 
\begin_inset Formula $k$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 025.png
	scale 30

\end_inset


\end_layout

\begin_layout Subsection*
Key location
\end_layout

\begin_layout Standard
Assumiamo che la nostra rete utilizzi 
\begin_inset Formula $m$
\end_inset

 bits per gli identificatori di chiavi e nodi.
\end_layout

\begin_layout Standard
Per trovare le chiavi, ogni nodo mantiene la 
\begin_inset Quotes eld
\end_inset


\series bold
\emph on
finger table
\series default
\emph default

\begin_inset Quotes erd
\end_inset

, cioè la tabella di host da contattare per le richieste.
 È una sorta di overlay routing table.
 Questa tabella ha 
\begin_inset Formula $m$
\end_inset

 righe (
\begin_inset Formula $O\left(log\left(N\right)\right)=O\left(log\left(2^{m}\right)\right)=O\left(m\right)$
\end_inset

), quindi in questo esempio 
\begin_inset Formula $3$
\end_inset

 host.
\end_layout

\begin_layout Subsubsection*
Finger table
\end_layout

\begin_layout Standard
È una tabella di 
\begin_inset Formula $m$
\end_inset

 entries, numerate 
\begin_inset Formula $1\leq k\leq m$
\end_inset

 che contiene gli indirizzi di alcuni nodi della rete.
 
\end_layout

\begin_layout Standard
La tabella del nodo 
\begin_inset Formula $n$
\end_inset

 è strutturata come segue:
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
k
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
interval
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
successor
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\left(n+2^{k-1}\right)\, mod\,2^{m}$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
[finger[k].start, finger[k+1].start)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $successor\left(n.finger\left[k\right].start\right)$
\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\series bold
Nota
\series default
: Il 
\begin_inset Formula $k$
\end_inset

 nella tabella 
\series bold
non è
\series default
 una chiave, è solo un indice della riga della tabella, uno stupido contatore.
\end_layout

\begin_layout Standard
Quindi riassumendo la tabella contiene 
\begin_inset Formula $k$
\end_inset

 righe da 1 a 
\begin_inset Formula $m$
\end_inset

, ogni riga indica un nodo successivo, chiamato 
\begin_inset Quotes eld
\end_inset


\emph on
start
\emph default

\begin_inset Quotes erd
\end_inset

, il cui hash è:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
finger[k].start=\left(n+2^{k-1}\right)\: mod\:2^{m}
\]

\end_inset


\end_layout

\begin_layout Standard
Questo nodo è responsabile dell'intervallo di chiavi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
[finger[k].start,\quad finger[k+1].start)
\]

\end_inset


\end_layout

\begin_layout Standard

\series bold
Nota:
\series default
 
\begin_inset Formula $k+1$
\end_inset

 può essere superiore a 
\begin_inset Formula $m$
\end_inset

, tanto poi il modulo lo sistema.
\end_layout

\begin_layout Standard
I nodi nella tabella sono tutti:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
startNode\geq n.finger[k].start
\]

\end_inset


\end_layout

\begin_layout Standard
Il successore del nodo 
\emph on
start
\emph default
 di ogni riga è calcolato come:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
finger\left[k\right].successor=successor\left(finger\left[k\right].start\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Cioè si va a prendere il successore del nodo 
\emph on
start
\emph default
 della riga, quindi bisogna vedere quali nodi sono attivi.
 Se il nodo 
\emph on
start
\emph default
 della riga è attivo, il successore è lui, altrimenti è il nodo attivo seguente
 in senso orario.
\end_layout

\begin_layout Standard
Il predecessore (che funziona da puntatore in senso anti-orario) può essere
 utile quando dobbiamo riorganizzare il cerchio perché un nuovo nodo entra
 o esce dal sistema.
\end_layout

\begin_layout Standard
Il join e leave sono un problema serio per i sistemi p2p perché dobbiamo
 essere in grado di riorganizzare la rete per aggiungere il nodo.
 Specialmente nei sistemi p2p2 di video streaming, le leaves sono il problema
 principale di degradazione della qualità video.
\end_layout

\begin_layout Standard
Proviamo a disegnare nel caso dell'esempio precedente:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 027.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Notiamo che:
\end_layout

\begin_layout Itemize
La 
\emph on
finger table
\emph default
 è molto compatta rispetto alla rete e lista solo pochi nodi
\end_layout

\begin_layout Itemize
La 
\emph on
finger table
\emph default
 di solito non contiene abbastanza informazioni per determinare il successore
 di una chiave arbitraria.
\end_layout

\begin_deeper
\begin_layout Itemize
Per esempio nella figura sopra vediamo che il nodo 
\begin_inset Formula $n=3$
\end_inset

 non conosce il successore della chiave 
\begin_inset Formula $k=1$
\end_inset

 (
\begin_inset Formula $successor\left(1\right)$
\end_inset

) .
 Questo perché il 
\begin_inset Formula $successor\left(1\right)$
\end_inset

 non compare nella tabella.
 Allora 
\series bold
come facciamo?
\end_layout

\end_deeper
\begin_layout Subsubsection*
Scalable key location
\end_layout

\begin_layout Standard

\series bold
Cosa succede quando un nodo 
\begin_inset Formula $n$
\end_inset

 non conosce il successore di una chiave 
\begin_inset Formula $k$
\end_inset

 ?
\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $n$
\end_inset

 può trovare un nodo il cui identificatore è più vicino a 
\begin_inset Formula $k$
\end_inset

, quel nodo saprà di più riguardo a 
\begin_inset Formula $k$
\end_inset

 di quanto non ne sappia 
\begin_inset Formula $n$
\end_inset

.
\end_layout

\begin_layout Itemize
Quindi 
\begin_inset Formula $n$
\end_inset

 cerca nella sua 
\emph on
finger table
\emph default
 un nodo 
\begin_inset Formula $j$
\end_inset

 il cui identificatore precede immediatamente 
\begin_inset Formula $k$
\end_inset

 e chiede a 
\begin_inset Formula $j$
\end_inset

 l'identificatore del nodo più vicino a 
\begin_inset Formula $k$
\end_inset

 che conosce.
 Quindi è una sorta di ricerca per passaparola.
\end_layout

\begin_layout Standard

\series bold
Esempio
\series default
:
\end_layout

\begin_layout Itemize
Il nodo 
\begin_inset Formula $n=3$
\end_inset

 vuole trovare il successore per l'identificatore 
\begin_inset Formula $1$
\end_inset

.
\end_layout

\begin_layout Itemize
Nella 
\emph on
finger table
\emph default
, il nodo 
\begin_inset Formula $3$
\end_inset

 vede che l'identificatore 
\begin_inset Formula $1$
\end_inset

 ricade nell'intervallo 
\begin_inset Formula $[7,\,3)$
\end_inset

, cioè l'intervallo della terza riga della sua finger table (
\begin_inset Formula $3.finger[3].interval$
\end_inset

).
\end_layout

\begin_layout Itemize
Allora il nodo 3 controlla il successore dell'intervallo dell'ultima riga,
 che è 
\begin_inset Formula $0$
\end_inset

 (
\begin_inset Formula $3.finger[3].successor=0$
\end_inset

).
 Però il nodo 
\begin_inset Formula $0$
\end_inset

 non è il successore dell'identificatore 
\begin_inset Formula $1$
\end_inset

 perché lo precede! Allora il nostro nodo 
\begin_inset Formula $3$
\end_inset

 manderà un messaggio al nodo 
\begin_inset Formula $0$
\end_inset

 chiedendo quale sia il successore del nodo 
\begin_inset Formula $1$
\end_inset

.
\end_layout

\begin_layout Itemize
Il nodo 
\begin_inset Formula $0$
\end_inset

 riceve il mesaggio, controlla la sua 
\emph on
finger table
\emph default
 e vede che il successore della chiave
\begin_inset Formula $1$
\end_inset

 è il nodo 
\begin_inset Formula $1$
\end_inset

, quindi ritorna il nodo 
\begin_inset Formula $1$
\end_inset

 al nodo 
\begin_inset Formula $3$
\end_inset

 che gli aveva chiesto.
\end_layout

\begin_layout Itemize
Quindi da ora in poi, dato che il nodo 
\begin_inset Formula $3$
\end_inset

 ha scoperto chi è il nodo responsabile per quella risorsa, lo può contattare
 direttamente per le query.
 Se il nodo interrogato non ha fisicamente la risorsa, può rispondere con
 l'
\begin_inset Quotes erd
\end_inset

indirizzo
\begin_inset Quotes erd
\end_inset

 di chi possiede la risorsa.
\end_layout

\begin_layout Standard
Poiché i puntatori della 
\emph on
finger table
\emph default
 raddoppiano sempre le distanze attorno al cerchio, ad ogni iterazione si
 dimezza la distanza dalla destinazione.
\end_layout

\begin_layout Standard
Da questa intuizione nasce un teorema dimostrabile che afferma:
\end_layout

\begin_layout Standard
Con alta probabilità, il numero di nodi da contattare per trovare un successore
 in una rete di 
\begin_inset Formula $N$
\end_inset

 nodi è 
\begin_inset Formula $O\left(log\left(N\right)\right)$
\end_inset

.
\end_layout

\begin_layout Subsection*
Join e leaves
\end_layout

\begin_layout Standard
È la parte veramente difficile di Chord e di tutti i sistemi di sistribuzione
 p2p basati su DHT.
 Il problema principale è che questo cerchio può arrivare a trovarsi in
 una situazione di 
\series bold
inconsistenza
\series default
.
 Il problema è ancora pià grave quando siamo su un sistema real-time come
 un sistema di distribuzione video p2p, dove non possiamo 
\begin_inset Quotes eld
\end_inset

perdere troppo tempo
\begin_inset Quotes erd
\end_inset

 in riallocazioni.
\end_layout

\begin_layout Standard
In ogni caso i 
\emph on
join
\emph default
 e 
\emph on
laves
\emph default
 implicano la ridistribuzione di chiavi tra i peer della rete.
 In particolare sono richiesti 
\begin_inset Formula $O\left(log^{2}\left(N\right)\right)$
\end_inset

 messaggi e solo una frazione di 
\begin_inset Formula $O\left(\frac{1}{N}\right)$
\end_inset

 chiavi vengono spostate in una nuova locazione.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 026.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Quando un nodo 
\begin_inset Formula $n$
\end_inset

 
\series bold
entra
\series default
 nella rete, alcune chiavi che erano prima assegnate al successore di 
\begin_inset Formula $n$
\end_inset

, diventano ora chiavi di 
\begin_inset Formula $n$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Itemize
Devono essere preservati due 
\emph on
invarianti
\emph default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Il successore di ogni nodo deve essere mantenuto
\end_layout

\begin_layout Itemize
Per ogni chiave 
\begin_inset Formula $k$
\end_inset

, il nodo 
\begin_inset Formula $successor\left(k\right)$
\end_inset

 è responsabile per 
\begin_inset Formula $k$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
Per mantenere i lookup veloci la 
\emph on
finger table 
\emph default
deve essere sempre corretta.
\end_layout

\begin_layout Itemize
Per ristibilire gli invarianti di Chord servono, come abbiamo già visto,
 
\begin_inset Formula $O\left(log^{2}\left(N\right)\right)$
\end_inset

 messaggi scambiati.
\end_layout

\end_deeper
\begin_layout Itemize
Quando un nodo 
\begin_inset Formula $n$
\end_inset

 
\series bold
lascia
\series default
 la rete, tutte le chiavi assegnate a lui vengono riassegnate al successore
 di 
\begin_inset Formula $n$
\end_inset

.
\end_layout

\begin_layout Itemize
Per semplificare i meccanismi di join e leave, ogni nodo di Chord mangiene
 un 
\emph on
predecessor pointer
\emph default
.
 Questo 
\emph on
predecessor pointer
\emph default
 contiene l'identificatore Chord e indirizzo IP del predecessore immediato
 di quel nodo in questione.
 Può essere utilizzato per spostarsi in modo anti-orario intorno al cerchio
 degli identificatori.
\end_layout

\begin_layout Subsection*
Join
\end_layout

\begin_layout Standard
Per preservare gli invarianti detti prima, Chord deve fare 3 operazioni
 quando un nodo 
\begin_inset Formula $n$
\end_inset

 entra nella rete:
\end_layout

\begin_layout Enumerate
Inizializzare il 
\emph on
predecessor
\emph default
 e 
\emph on
finger table
\emph default
 del nodo 
\begin_inset Formula $n$
\end_inset


\end_layout

\begin_layout Enumerate
Aggiornare le 
\emph on
finger tables
\emph default
 e 
\emph on
predecessors
\emph default
 dei nodi esistenti, per notificare l'aggiunta di 
\begin_inset Formula $n$
\end_inset

 nella rete.
\end_layout

\begin_layout Enumerate
Notificare il software ad alto livello che ora può trasmettere lo stato
 dei 
\emph on
values
\emph default
 che possiede.
\end_layout

\begin_layout Standard
Si asume che il nuovo nodo scopre l'identità di un nodo 
\begin_inset Formula $n'$
\end_inset

 già esistente in Chord tramite 
\series bold
qualche meccanismo esterno
\series default
.
\end_layout

\begin_layout Standard
Il nodo 
\begin_inset Formula $n$
\end_inset

 utilizza il nodo 
\begin_inset Formula $n'$
\end_inset

 per inizializzare il suo stato e aggiungersi alla rete Chord esistente,
 nelle tre fasi viste.
\end_layout

\begin_layout Subsubsection*
Aggiornare le 
\emph on
finger tables
\emph default
 dei nodi già esistenti
\end_layout

\begin_layout Standard
Il nodo 
\begin_inset Formula $n$
\end_inset

 avrà bisogno di entrare nelle 
\emph on
finger tables
\emph default
 di alcuni nodi già esistenti.
\end_layout

\begin_layout Standard
Riprendiamo l'esempio di prima.
 Immaginiamo che il nodo 
\begin_inset Formula $n=6$
\end_inset

 entra nella rete e diventa il terzo 
\begin_inset Formula $successor$
\end_inset

 nei nodi 
\begin_inset Formula $0$
\end_inset

 e 
\begin_inset Formula $1$
\end_inset

.
 Diventa inoltre il primo e il secondo 
\begin_inset Formula $successor$
\end_inset

 del nodo 
\begin_inset Formula $3$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 028.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsection*
Stabilizzazione
\end_layout

\begin_layout Itemize
Quando entrano dei nuovi nodi nella rete, possono creare temporaneamente
 inconsistenza in un'area dell'anello di Chord.
 Un lookup in corso prima che il sistema si sia stabilizzato può mostrare
 tre comportamenti diversi.
\end_layout

\begin_deeper
\begin_layout Itemize
Il caso più comune è che le entries della 
\emph on
finger table
\emph default
 coinvolte nel lookup siano corrette e quindi viene trovato il successore
 corretto in 
\begin_inset Formula $O\left(log\left(N\right)\right)$
\end_inset

 passi.
\end_layout

\begin_layout Itemize
Un altro csao è che i puntatori al successore siano corretti, ma le 
\emph on
finger tables
\emph default
 non sono accurate.
 Questo causa dei lookup corretti ma più lenti
\end_layout

\begin_layout Itemize
Un terzo caso è quello in cui i nodi della regione hanno dei 
\begin_inset Formula $successor$
\end_inset

 pointers errati, o le chiavi non sono ancora state migrate al nuovo nodo.
 In questo caso il lookup può fallire.
\end_layout

\end_deeper
\begin_layout Itemize
Il software di alto livello che utilizza chord noterà questo problema e
 ha l'opzione di ritentare dopo un certo periodo di tempo.
\end_layout

\begin_layout Subsection*
Attacco 
\emph on
Eclipse
\emph default
 a Chord
\end_layout

\begin_layout Standard
In un attacco 
\emph on
Eclipse
\emph default
, un insieme di nodi malevoli possono essere sfruttati per interporsi tra
 tutti gli altri.
 Se l'attacco ha successo è possibile porsi nel mezzo della maggior parte
 o tutte le comunicazioni da e verso la vittima.
\end_layout

\begin_layout Standard
Inoltre dando delle informazioni errate sui vicini durante normali operazioni
 di mantenimento della rete di overlay, un numero modesto di nodi malevoli
 può eclissare un grosso numero di vittime.
\end_layout

\begin_layout Section*
P2P Video streaming
\end_layout

\begin_layout Standard
Le funzionalità principali dei sistemi di streaming video P2P sono principalment
e nove:
\end_layout

\begin_layout Enumerate
Distribuzione dei contenuti
\end_layout

\begin_layout Enumerate
Costruzione della topologia di overlay
\end_layout

\begin_layout Enumerate
Tipo di topologia
\end_layout

\begin_layout Enumerate
Sorgenti
\end_layout

\begin_layout Enumerate
Coordinamento e startup
\end_layout

\begin_layout Enumerate
Join
\end_layout

\begin_layout Enumerate
Leave
\end_layout

\begin_layout Enumerate
Performance
\end_layout

\begin_layout Enumerate
Cryptography
\end_layout

\begin_layout Subsection*
Requisiti tecnologici per il P2P Video streaming
\end_layout

\begin_layout Itemize
È necessario accesso a Internet a banda larga, quindi almeno servizio ADSL
 o superiore
\end_layout

\begin_layout Itemize
Servono dei computer degli utenti che siano di potenza-medio bassa
\end_layout

\begin_layout Standard
Riguardo all'
\series bold
ADSL
\series default
:
\end_layout

\begin_layout Itemize
Le tecnologie ADSL utilizzano doppini in rame per fornire connettività IP
 agli utenti
\end_layout

\begin_layout Itemize
La velocità di trasmissione dipende, tra le altre cose, dalla 
\series bold
qualità del doppino
\series default
, dall'
\series bold
interferenza
\series default
 e dalla 
\series bold
lunghezza
\series default
 del cavo.
\end_layout

\begin_layout Itemize
I doppini in rame tradizionale possono fornire velocità soddisfacienti se
 non sono eccessivamente lunghi.
 Un cavo lungo meno di 3Km è adatto.
\end_layout

\begin_layout Itemize
In italia la lunghezza media dei doppini in rame è più bassa che in altri
 paese europei, quindi c'è un vantaggio per la tecnologia ADSL.
\end_layout

\begin_layout Standard
I sistemi 
\series bold
P2P
\series default
:
\end_layout

\begin_layout Standard
I sistemi P2P non adottano la classica architettura 
\emph on
client-server
\emph default
 di tante applicazioni distribuite.
\end_layout

\begin_layout Standard
Nei sistemi P2P ogni nodo che partecipa viene riferito come 
\emph on
peer
\emph default
 e può agire sia come 
\emph on
server
\emph default
, sia come 
\emph on
client
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 029.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsection*
Pro e contro dei sistemi P2P
\end_layout

\begin_layout Subsubsection*
Pro
\end_layout

\begin_layout Itemize
Permettono agli utenti di raggiunere un elevatissimo numero di contenuti,
 memorizzati nei computer dei 
\emph on
peers
\emph default
.
\end_layout

\begin_layout Itemize
Possono scalare e raggiungere dimensioni molto elevate senza problemi di
 performance.
 I sistemi classici 
\emph on
client-server
\emph default
 hanno invece sempre problemi a scalare (ed è necessaria amministrazione
 di rete per farlo).
\end_layout

\begin_layout Itemize
I protocolli P2P non hanno bisogno di coordinamento da parte di un amministrator
e, si 
\emph on
auto-gestiscono
\emph default
.
\end_layout

\begin_layout Subsubsection*
Contro
\end_layout

\begin_layout Itemize
I sistemi P2P possono essere attaccati facilmente e come conseguenza la
 loro performance può peggiorare pesantamente.
\end_layout

\begin_layout Itemize
Un problema grave di performance è la banda di upload dei 
\emph on
peers
\emph default
.
\end_layout

\begin_deeper
\begin_layout Itemize
Pensiamo ad un esempio 
\begin_inset Quotes eld
\end_inset

classico
\begin_inset Quotes erd
\end_inset

 di un peer su ADSL con 10Mb/s in download e 1Mb/s in upload.
\end_layout

\begin_layout Itemize
Anche se un singolo nodo ha una capacità in download di 10 Mb/s, poi se
 lo stream arriva da un altro nodo su ADSL, quest'ultimo non potrà trasmettere
 a più di 1Mb/s in upload, tagliando quindi la capacità in ricezione del
 primo a 1Mb/s.
\end_layout

\begin_layout Itemize
Poi dobbiamo anche ricordare che un singolo nodo da upload su tanti altri
 nodi, quindi quel 1Mb/s deve essere suddiviso più volte per tanti peers!
\end_layout

\end_deeper
\begin_layout Itemize
Il problema dei contenuti protetti da diritto d'autore è serio.
 Possono nascere problemi levali se i 
\emph on
peers
\emph default
 distribuiscono materiale protetto da copyright.
\end_layout

\begin_layout Subsection*
1 - Distribuzione dei contenuti multimediali
\end_layout

\begin_layout Itemize
Overlay 
\series bold
\emph on
end-to-end
\series default
\emph default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Ogni 
\emph on
peer
\emph default
 scambia contenuti e costribuisce anche alla gestione della topologia di
 
\emph on
overlay.

\emph default
 Tutti i nodi hanno lo stesso ruolo nel sistema P2P
\end_layout

\end_deeper
\begin_layout Itemize
Overlay 
\series bold
\emph on
proxy-based
\series default
\emph default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Il sistema P2P implementa una gerarchia, in modo che solo alcuni nodi selezioni
 fanno routing dei contenuti al 
\emph on
peer
\emph default
 finale.
 Questi nodi che fanno routing sono chiamati 
\emph on
multicast nodes
\emph default
.
 In questo modo i 
\emph on
multicast nodes
\emph default
 formano un backbone per la rete di overlay che viene suddivisa in due 
\emph on
layers:
\end_layout

\begin_deeper
\begin_layout Itemize
Peers che mandano e ricevono contenuti dal 
\emph on
backbone
\end_layout

\begin_layout Itemize
Peers che non scambiano direttamente contenuti con il 
\emph on
backbone
\emph default
.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Nel confronto delle due tecniche vediamo che:
\end_layout

\begin_layout Itemize
Nei sistemi 
\emph on
proxy-based
\emph default
 si semplifica la gestione della topologia di overlay (solo il backbone
 ha una topologia 
\series bold
mesh
\series default
, mentre da ogni rete 
\emph on
backbone
\emph default
 parte una topologia ad albero o stella per raggiungere i peers.
 
\end_layout

\begin_layout Itemize
I nodi di 
\emph on
multicast
\emph default
 possono essere 
\emph on
peers
\emph default
 che sono stati promossi dal sistema, ad esempio nodi con particolare potenza
 di calcolo e banda.
\end_layout

\begin_layout Itemize
Nei sistemi 
\emph on
end-to-end
\emph default
 invece i peers hanno bisogno di scambiare tante informazioni per mantenere
 consistenza nella topologia per la rete di overlay.
\end_layout

\begin_layout Itemize
I sistemi 
\emph on
end-to-end
\emph default
 overlay sono anche chiamati 
\series bold
\emph on
application level multicast
\series default
\emph default
 (
\series bold
ALM
\series default
), mentre gli overlay 
\emph on
proxy-based
\emph default
 sono anche chiamati 
\series bold
\emph on
overlay multicast
\series default
\emph default
.
\end_layout

\begin_layout Subsection*
2 - Costruzione della topologia di rete
\end_layout

\begin_layout Itemize

\series bold
Diretta
\series default
: Quando un peer entra nel sistema è immediamente assegnato ad un peer genitore
 al quale deve collegarsi.
 Questa è la strategia tipica implementata in topologie ad albero e foresta.
\end_layout

\begin_layout Itemize

\series bold
Indiretta
\series default
, 
\series bold
mesh
\series default
: Quando un peer entra nel sistema, c'è una fase di 
\emph on
signaling
\emph default
 iniziale, con la quale viene collegato ad uno o più 
\emph on
peers
\emph default
 in modo 
\series bold
\emph on
mesh
\series default
\emph default
.
 Il 
\emph on
peer
\emph default
 può comunicare con più peer diversi.
\end_layout

\begin_layout Itemize

\series bold
Indiretta
\series default
,
\series bold
 clusters gerarchici
\series default
: I 
\emph on
peers
\emph default
 vengono divisi in livelli gerarchici e sono anche raggruppati in clusters.
 Solo un 
\emph on
subset
\emph default
 dei 
\emph on
peers
\emph default
 in un cluster ha la possibilità di comunicare direttamente con i 
\emph on
peers
\emph default
 in un altro cluster.
 Quindi una topologia di overlay 
\emph on
inter-cluster
\emph default
 e 
\emph on
intra-cluster
\emph default
 deve essere creata.
 In alcuni casi pratici, la topologia 
\emph on
inter-cluster
\emph default
 è un albero.
\end_layout

\begin_layout Subsection*
3 - Topologie di rete
\end_layout

\begin_layout Standard
Le tipologie di rete P2P sono sostanzialmente tre:
\end_layout

\begin_layout Itemize
Albero singolo
\end_layout

\begin_layout Itemize
Foresta: alberi multipli con lo stesso nodo radice
\end_layout

\begin_layout Itemize
Generica (rete 
\series bold
\emph on
mesh
\series default
\emph default
)
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 030.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Topologia ad albero con costruzione indiretta, 
\emph on
cluster-based
\end_layout

\begin_layout Itemize
Il nodo radice manda il contenuto a tutti i membri del suo 
\emph on
cluster
\emph default
.
\end_layout

\begin_layout Itemize
Un 
\emph on
peer
\emph default
 che riceve il contenuto lo ridistribuisce a tutti i compagni del 
\emph on
cluster
\emph default
, se non ha già ricevuto il contenuto da un compagno di 
\emph on
cluster
\emph default
.
\end_layout

\begin_layout Itemize
Quindi in ogni cluster solo un 
\emph on
peer
\emph default
 distribuisce il contenuto ai compagni dello stesso 
\emph on
cluster
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 031.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
In figura vediam un cluster a 3 livelli.
\end_layout

\begin_layout Subsubsection*
Topologia ad albero con costruzione indiretta basata su rete 
\emph on
mesh
\end_layout

\begin_layout Standard
In questo tipo di sistema viene costruita una topologia di mesh basilare.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 032.png
	scale 35

\end_inset


\end_layout

\begin_layout Itemize
In questa topologia i percorsi per raggiungere la sorgente di un contenuto
 possono essere calcolati.
 Ad esempio con un classico algoritmo di routing 
\emph on
distance-vector
\end_layout

\begin_layout Itemize
Un peer tiene una tabella dei percorsi minimi per raggiungere tutti gli
 altri peers, insieme ad una misura convenzionale del corso di ogni percorso
 (per esempio la lunghezza del percorso in numeri di 
\begin_inset Quotes eld
\end_inset

hop
\begin_inset Quotes erd
\end_inset

).
\end_layout

\begin_layout Itemize
Delle tabelle vengono continuamente aggiornate dalle comunicazione di signalling
 tra i peers.
\end_layout

\begin_layout Itemize
Per la distribuzione di un contenuto, la sorgente calcolare un albero di
 multicast sopra la topologia di mesh basilare.
\end_layout

\begin_layout Itemize
La metrica elementare per misurare il costo del percorso è il numero di
 hops.
 Possono essere implementate metriche più complesse.
\end_layout

\begin_layout Subsubsection*
Topologia a foresta
\end_layout

\begin_layout Standard
Una topologia a foresta è costituita da un numero (
\begin_inset Formula $\geq1$
\end_inset

) di alberi, che condividono la stessa sorgente.
\end_layout

\begin_layout Itemize
È una topologia più affidabile dell'albero semplice: se un 
\emph on
peer
\emph default
 lascia la rete un singolo albero si scollega.
 Nella topologia a foresta invece la distribuzione globale può essere disponibil
e (almeno parzialmente) anche se un peer lascia la rete (in una topologia
 a foresta 
\series bold
i percorsi sono ridondanti
\series default
).
\end_layout

\begin_deeper
\begin_layout Itemize
Questa proprietà della topologia a foresta è chiamata 
\series bold
\emph on
tree diversity
\series default
\emph default
.
\end_layout

\end_deeper
\begin_layout Itemize
Gli alberi con bassa profondità e alta biforcazione sono preferiti perché
 il ritardo è minore rispetto agli alberi profondi e con poche biforcazioni.
\end_layout

\begin_layout Itemize
D'altro canto però possiamo aumentare le biforcazioni se la capacità di
 upload dei 
\emph on
peers
\emph default
 è alta.
\end_layout

\begin_layout Itemize
Le topologie a foresta possono essere utilizzate per distriubire multimedia
 streaming in modo P2P:
\end_layout

\begin_deeper
\begin_layout Itemize
Lo stream può essere diviso in 
\emph on
sotto-stream
\emph default
 (questo può essere fatto se lo stream è 
\emph on
coded
\emph default
 con un 
\emph on
multi-layered coder
\emph default
 o un 
\emph on
multiple description coder
\emph default
)
\end_layout

\begin_layout Itemize
Ogni 
\emph on
sotto-stream
\emph default
 è assegnato ad un albero diverso
\end_layout

\begin_layout Itemize
In questo modo anche se un albero si scollega perchè un peer lascia la rete,
 gli altri continuano a ricevere gli altri sottostream.
\end_layout

\end_deeper
\begin_layout Subsubsection*
Topologia mesh
\end_layout

\begin_layout Itemize
Un peer deve svolgere due attività basilari:
\end_layout

\begin_deeper
\begin_layout Itemize
Fare 
\emph on
signaling
\emph default
 con altri 
\emph on
peers
\emph default
 per stabiliare e mantenere la rete 
\series bold
\emph on
mesh
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Scambiare contenuti
\end_layout

\end_deeper
\begin_layout Itemize
Nel caso dei sistemi di video streaming P2P, assumiamo che uno stream sia
 diviso in segmenti (chiamati 
\emph on
chunks
\emph default
).
 I peers scambiano i segmenti.
\end_layout

\begin_layout Itemize
Una dimensione massima tipica di un segmento è circa 10 KBytes.
\end_layout

\begin_layout Itemize
Ogni peer mantiene una lista dei segmenti che ha ricevuto (la 
\series bold
\emph on
Buffer Map, 
\emph default
BM
\series default
)
\end_layout

\begin_layout Itemize
Tramite 
\emph on
signaling 
\emph default
con i 
\emph on
peers
\emph default
 vicini (nella rete di overlay mesh), ogni peer mantiene anche la 
\emph on
mCache
\emph default
, una tabella di segmenti che i 
\emph on
peers
\emph default
 vicini già hanno.
\end_layout

\begin_layout Itemize
La 
\series bold
Buffer Map
\series default
 è una lista di segmenti che il 
\emph on
peer
\emph default
 ha.
 Questa lista è tempo-limitata (comprende un intervallo di tempo limitato).
 Essa contiene i seguenti parametri:
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
Offset
\emph default
: È l'indice del primo segmento (solitamente 2-4 Bytes)
\end_layout

\begin_layout Itemize
La 
\emph on
lunghezza del buffer map
\end_layout

\begin_layout Itemize
Un vettore di 
\emph on
flags
\emph default
 binari per indicare la disponibilità di ogni segmento nell'intervallo di
 tempo limitato
\end_layout

\end_deeper
\begin_layout Itemize
Per esempio, se un segmento contiene 1 secondodi contenuto, la BM può contenere
 informazioni riguardo a 120 segmenti (2 minuti).
 Per ogni secondo nell'intervallo di tempo, un flag binario indica che il
 corrispondente contenuto è disponibile.
\end_layout

\begin_layout Itemize
Tremite la sua BM, un 
\emph on
peer
\emph default
 può determinare di quale segmento ha bisogno.
 Per determinare i 
\emph on
peers
\emph default
 da contattare per ottenere il segmento mancante, un 
\emph on
peer
\emph default
 deve anche avere le BM di un certo numero di 
\emph on
peers
\emph default
 (partner 
\emph on
peers
\emph default
), solitamente i suoi 
\emph on
peers
\emph default
 vicini nella rete di overlay.
\end_layout

\begin_deeper
\begin_layout Itemize
Quando questa informazione è disponibile, il 
\emph on
peer
\emph default
 esegue un algoritmo di scheduling, per schedulare richieste ad altri 
\emph on
peers
\emph default
.
\end_layout

\begin_layout Itemize
I BM dei nodi partner sono ottenuti tramite 
\emph on
signaling
\emph default
.
\end_layout

\end_deeper
\begin_layout Standard
La rete 
\series bold
DONet
\series default
/
\series bold
Coolstreaming
\series default
 adotta un algoritmo di scheduling euristico:
\end_layout

\begin_layout Itemize
Per ogni segmento mancante, il peer esamina il BM dei suoi nodi partner
 e conta il numero dei fornitori possibili.
\end_layout

\begin_layout Itemize
Le richieste vengono schedulate partendo dal segmento con il più basso numero
 di fornitori, poi per il secondo con meno fornitori e così via...
\end_layout

\begin_layout Itemize
Chiaramente questo algoritmo di scheduling migliora la affidabilità.
 Se più di 1 segmento è richoiesto dallo stesso fornitore, viene fatto con
 una richiesta singola.
\end_layout

\begin_layout Standard
La costruzione della 
\emph on
mcache
\emph default
 è critica.
 I peers scambiano messaggi di refresh specificando:
\end_layout

\begin_layout Itemize
Numero di sequenza dei segmenti disponibili
\end_layout

\begin_layout Itemize
Identificatore del peer nel sistema
\end_layout

\begin_layout Itemize
Numero di partners del peer
\end_layout

\begin_layout Itemize
TTL (Time To Live: tempo di vita rimanente del segmento)
\end_layout

\begin_layout Standard
Quando un peer riceve un messaggio di refersh, aggiorna la sua mCache.
 Ogni peer, periodciamente controlla per altri partners, se decide che non
 ha abbastanza parners.
\end_layout

\begin_layout Standard
Un peer può anche misurare la 
\begin_inset Quotes eld
\end_inset

qualità
\begin_inset Quotes erd
\end_inset

 di un partner osservando quanti segmenti riesce a scambiare con successo
 con esso.
\end_layout

\begin_layout Itemize
Il 
\series bold
numero di partners
\series default
 voluti dal 
\emph on
peer
\emph default
 è un parametro critico del sistema.
\end_layout

\begin_deeper
\begin_layout Itemize
Se abbiamo tanti partners abbiamo maggiore affidabilità
\end_layout

\begin_layout Itemize
Tuttavia con tanti partners aumentiamo parecchio il traffico di 
\emph on
signaling
\end_layout

\begin_layout Itemize
Quindi un valore ottimo di 
\begin_inset Formula $M$
\end_inset

 esiste.
 Da un punto di vista pratico è stato concluso che un numero di partners
 tra 2 e 5 è una scelta ragionevole.
\end_layout

\begin_layout Itemize
In 
\emph on
Coolstreaming
\emph default
, il traffico di overhead aggiunge circa l'1% dal traffico totale.
\end_layout

\end_deeper
\begin_layout Itemize
Le topologie di rete mesh ragiscono meglio alla perdita di un nodo rispetto
 alle topologie a foresta.
\end_layout

\begin_layout Subsection*
Procedure di Join
\end_layout

\begin_layout Itemize
Nelle topologie a foresta con costruzione diretta, il sistema deve assegnare
 un genitore ad ogni 
\emph on
peer
\end_layout

\begin_layout Itemize
In topologie più complesse, il sistema deve assegnare al peer un insieme
 di genitori (nel caso della topologia a 
\series bold
foresta
\series default
) o un numero di pertners (nel caso della topologia 
\series bold
mesh
\series default
).
\end_layout

\begin_layout Itemize
Nei sistemi basati su alberi, il nuovo 
\emph on
peer
\emph default
 diverta una foglia dell'albero.
 In seguito può essere promosso e avvicinarsi alla radice dell'albero.
\end_layout

\begin_layout Subsection*
Join in COOPNET
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 033.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Nel caso di una costruzione 
\series bold
diretta
\series default
 della topologia di overlay, il nuovo peer deve essere connesso ad esattamente
 un 
\emph on
peer
\emph default
 genitore.
\end_layout

\begin_layout Itemize
Ci sarà un server dedicato a raccogliere le 
\emph on
join requests
\emph default
 e redirigere il 
\emph on
peer
\emph default
 verso un potenziale nodo padre
\end_layout

\begin_layout Itemize
Nel caso della rete 
\series bold
\emph on
coopnet 
\series default
\emph default
(che è una rete a foresta):
\end_layout

\begin_deeper
\begin_layout Itemize
Il nuovo 
\emph on
peer
\emph default
 contatta il server.
 Il peer può anche fare una richiesta per uno specifico contenuto e dare
 informazioni tipo la sua banda di upload/download.
\end_layout

\begin_layout Itemize
Il server risponde al 
\emph on
peer
\emph default
 con una lista di altri 
\emph on
peers
\emph default
 da contattare per ottenere il contenuto.
\end_layout

\end_deeper
\begin_layout Subsection*
Leave
\end_layout

\begin_layout Standard
Il processo di leave è invocato quando un peer lascia il sistema o c'è un
 problema di connettività con quel peer.
 In una topologia ad albero, tutti i figli di un peer che lascia la rete
 
\series bold
vengono scollegati
\series default
.
 Il sistema deve fornire un nuovo genitore per i 
\emph on
peers
\emph default
 orfani.
\end_layout

\begin_layout Itemize

\series bold
\emph on
Failure detection
\series default
\emph default
: Il sistema deve implementare delle procedure per capire il prima possibile
 quando un nodo ha lasciato la rete (perché il nodo potrebbe anche non inviare
 una notifica esplicita):
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
keep-alive
\emph default
: I nodi scambiano periodicamente dei messaggi di 
\emph on
keep-alive
\end_layout

\begin_layout Itemize

\emph on
Packet loss monitoring
\emph default
 (come fatto in CoopNet): I nodi figli monitorano la percentuale di pacchetti
 persi.
 Se questa percentuale cresce sopra una certa soglia, il nodo padre è dichiarato
 morto.
\end_layout

\end_deeper
\begin_layout Subsection*
Alcuni sistemi di P2P video streaming
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="6">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Nome
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Distribuzione
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Costruzione Topologia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Topologia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Sorgenti
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Failure Detection
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
vidTorrent
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Foresta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
CoolStreaming
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
CoopNet
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Server centrale
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Diretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Foresta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
packet loss monitoring
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
GridMedia
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Narada
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Albero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Nice
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
proxy-based
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cluster Gerarchico
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Albero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Overcast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
proxy-based
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Diretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Albero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
PPLive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Scattercast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
proxy-based
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Albero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $\geq1$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
SplitStream
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mesh indiretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Foresta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
Zig-zag
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
proxy-based
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cluster Gerarchico
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Albero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\emph on
PeerCast
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
end-to-end
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Diretta
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Albero
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\emph on
keep-alive
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection*
VidTorrent
\end_layout

\begin_layout Standard
Implementa una topologia a foresta dove ogni albero trasposta un diverso
 
\emph on
sotto-stream
\emph default
.
\end_layout

\begin_layout Itemize
Un 
\emph on
peer
\emph default
, per ricevere lo stream completo, deve essere inserito in tutti i sotoalberi.
\end_layout

\begin_layout Itemize
Gli alberi vengono costruiti in modo che i 
\emph on
peers
\emph default
 con più larga capacità di trasmissione siano vicini alla radice dell'albero.
\end_layout

\begin_layout Itemize
L'associazione padre-figlio dei 
\emph on
peers 
\emph default
viene fatta stimando la banda di comunicazione e il 
\emph on
round trip delay
\emph default
 tra i due nodi.
\end_layout

\begin_layout Subsubsection*
Join
\end_layout

\begin_layout Standard
La procedura di join deve essere effettuata per ogni sotto-albero.
\end_layout

\begin_layout Itemize
Il nuovo 
\emph on
peer
\emph default
 deve contattare un nodo noto di 
\emph on
randez-vous
\emph default
 nel sistema
\end_layout

\begin_layout Itemize
Il 
\emph on
nodo 
\emph default
di incontro funzionaerà da server e risponderà con una lista di 
\emph on
peers
\emph default
 da contattare.
\end_layout

\begin_layout Itemize
Il nuovo 
\emph on
peer
\emph default
 contatta questi 
\emph on
peers
\emph default
.
 Nelle risposte può trovare altri 
\emph on
peers
\emph default
.
\end_layout

\begin_layout Itemize
Il nuovo 
\emph on
peer
\emph default
 manda a questi 
\emph on
peers
\emph default
 trovati due pacchetti per stimare la banda e il ritardo.
 Se il risultato della misurazione è accettabile, il 
\emph on
peer
\emph default
 contattato invia al nuovo peer un 
\emph on
acceptation ticket
\emph default
.
\end_layout

\begin_layout Itemize
Il nuovo peer sceglie tra i vari ticket quello con il ritardo più basso.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 034.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Leave
\end_layout

\begin_layout Standard
Quando un albero viene scollegato, i peer isolati contattano il punto di
 
\emph on
randez-vous
\emph default
 per ottenere un nuovo genitore.
\end_layout

\begin_layout Standard
La procedura è molto simile alla prodecura di 
\emph on
join
\emph default
 di un nuovo nodo.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 035.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Suddividere uno stream in sotto-stream
\end_layout

\begin_layout Standard
VidTorrent può dividere uno stream in sotto-stream.
 La divisione è gerarchica: frame, sottoframe e segmenti.
\end_layout

\begin_layout Standard
Questa struttura dello stream può essere utilizzata per encoding scalabili.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 036.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
Lo stream viene diviso in 
\begin_inset Formula $m$
\end_inset

 frames.
 Ogni frame è diviso in 
\begin_inset Formula $n$
\end_inset

 subframes.
\end_layout

\begin_layout Itemize
I segmenti sono costruiti in modo che il segmento S0 contenga tuti i subframes
 0 dei primi 
\begin_inset Formula $k$
\end_inset

 frames.
\end_layout

\begin_layout Itemize
Il segmento S1 contiene tutti i subframes 1 dei primi 
\begin_inset Formula $k$
\end_inset

 frames, etc...
\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $k=3$
\end_inset

 allora ogni segmento contiene 3 subframes e se il numero di subframes per
 frame è 
\begin_inset Formula $n=4$
\end_inset

, allora per trasmettere i primi 
\begin_inset Formula $k$
\end_inset

 frames sono richiesti 
\begin_inset Formula $4$
\end_inset

 segmenti.
\end_layout

\begin_layout Itemize
Il quinto segmento S4, contiene tutti i subframe 0 dei frames da 3 a 5 e
 oltre
\end_layout

\begin_layout Subsubsection*
Substreams
\end_layout

\begin_layout Itemize
I segmenti sono assegnati in modo ciclico ai substreams.
\end_layout

\begin_layout Itemize
Un substream è una sequenza di segmenti trasmessa su un dato albero
\end_layout

\begin_layout Itemize
Ogni albero trasporta un substream diverso.
\end_layout

\begin_layout Subsubsection*
Diversity
\end_layout

\begin_layout Itemize
Un substream può coincidere con una descrizione o può essere parte di una
 descrizione.
\end_layout

\begin_layout Itemize
Una descrizione può essere distribuita ai 
\emph on
peers
\emph default
 tramite un singolo albero o alberi multipli (
\begin_inset Formula $d$
\end_inset

 alberi)
\end_layout

\begin_layout Itemize
Nel primo caso (
\begin_inset Formula $d=1$
\end_inset

), c'è una mappatura 
\emph on
uno-ad-uno
\emph default
 tra gli alberi e la descrizione.
\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $d>1$
\end_inset

, la descrizione è trasportata da 
\begin_inset Formula $d$
\end_inset

 alberi
\end_layout

\begin_layout Itemize
I segmenti sono assegnati in modo ciclico ai substreams 
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 037.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Il client
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 038.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
I subframes sonoricevuti alla velocità di downstream 
\series bold
CDOWN
\end_layout

\begin_layout Itemize
I subframes sono inviati al componenti di overlay del client e sono riassemblati
 in segmenti
\end_layout

\begin_layout Itemize
I segmenti completi sono inviati ad altri peers
\end_layout

\begin_layout Itemize
Naturalmente, se il client deve distribuire il contenuto a 
\begin_inset Formula $M$
\end_inset

 partners, dovrà inviare 
\begin_inset Formula $M$
\end_inset

 copie del contenuto.
\end_layout

\begin_layout Subsubsection*
Performance di VidTorrent
\end_layout

\begin_layout Itemize
Accesso simmetrico: 
\begin_inset Formula $Cdown=7Mbit/s$
\end_inset

, 
\begin_inset Formula $Cup=7Mbit/s$
\end_inset

 
\end_layout

\begin_layout Itemize
Accesso asimettrico: 
\begin_inset Formula $Cdown=7Mbit/s$
\end_inset

, 
\begin_inset Formula $Cup=1Mbit/s$
\end_inset


\end_layout

\begin_layout Itemize
875 kbit/s di traccia video, 4 descriptions
\end_layout

\begin_layout Itemize
4 alberi, diversity 1
\end_layout

\begin_layout Itemize
1 segmento ha 20 frames e trasporta 0.8 secondi
\end_layout

\begin_layout Itemize
\begin_inset Formula $N=250$
\end_inset

 utenti (media)
\end_layout

\begin_layout Itemize
Tempo medio di visione degli utenti: 15 minuti
\end_layout

\begin_layout Itemize
\begin_inset Formula $T_{rejoin}=100s$
\end_inset

 (tempo tra node failure e identificazione del nuovo parent)
\end_layout

\begin_layout Itemize
Profondità del buffer di playout: 5 segmenti (4 secondi)
\end_layout

\begin_layout Itemize
Le curve rilevanti sono in legenda:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Graphics
	filename 039.png
	scale 40

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection*
Percentuale di frames ricevuti nel tempo:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 040.png
	scale 30

\end_inset


\end_layout

\begin_layout Subsubsection*
Il ritardo visto come funzione del tempo medio di presenza dei peers
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 041.png
	scale 30

\end_inset


\end_layout

\begin_layout Subsubsection*
Percentuale di frames ricevuti nel tempo come funzione del tempo di rejoin
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 042.png
	scale 35

\end_inset


\end_layout

\begin_layout Part*
Analisi delle performance e tecniche di ottimizzazione nei sistemi di video
 streaming P2P
\end_layout

\begin_layout Standard
Come abbiamo visto, le reti P2P sono una buona soluzione per distribuire
 un certo contenuto multimediale ad un grosso numero di utenti.
 Non sono inoltre necessari investimenti da parte dei gestori di rete per
 realizzarlo.
 La distribuzione del contenuto si basa sull'utilizzo di risorse di tanti
 utenti.
\end_layout

\begin_layout Standard
La distribuzione di un video stream in 
\emph on
real-time
\emph default
 impone comunque dei requisiti di performance piuttosto stringenti:
\end_layout

\begin_layout Itemize
Bassi ritardi di playback
\end_layout

\begin_layout Itemize
Pochi frame persi
\end_layout

\begin_layout Standard
Abbiamo visto che ci sono diverse topologie: albero, foresta, mesh.
\end_layout

\begin_layout Standard
L'analisi delle performance dei sistemi P2P si concentra su 3 caratteristiche:
\end_layout

\begin_layout Itemize

\series bold
\emph on
trace analysis
\emph default
 
\series default
dei sistemi funzionanti oppure sviluppo e studio di prototipi in specifici
 
\emph on
test beds
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
\emph on
analytical studies 
\end_layout

\begin_layout Itemize

\series bold
\emph on
simulation
\end_layout

\begin_layout Standard
La maggior parte degli studi presenti sono focalizzati sulla 
\bar under
analisi di sistemi completi, così come sono,
\bar default
 senza investigare sull'impatti delle performance nella modifica dei loro
 parametri operativi.
\end_layout

\begin_layout Itemize
In questo studio ci focalizzeremo su sistemi di P2P video streaming con
 
\bar under
topologia ad albero o foresta
\bar default
.
\end_layout

\begin_layout Itemize
Analizziamo l'impatto di due tecniche di ottimizzazione che hanno lo scopo
 di ridurre gli effetti negativi sugli utenti
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
\emph on
nearly-permanent nodes
\series default
\emph default
: dei peer speciali che hanno una frequenza di abbandono della rete più
 bassa rispetto agli altri.
\end_layout

\begin_layout Itemize

\series bold
\emph on
rewarding
\series default
\emph default
: posizionare dei peers con alta disponibilità di banda nei livelli più
 alti degli alberi.
\end_layout

\end_deeper
\begin_layout Itemize
L'analisi delle performance utilizza un modello simulativo a 
\begin_inset Quotes eld
\end_inset

grana fine
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
Il modello utilizzato è ispirato a VidTorrent, un sistema di video P2P ad
 albero sviluppato al MIT.
 Tuttavia questo modello è più generale e ha diverse caratteristiche:
\end_layout

\begin_layout Itemize
C'è 
\series bold
un solo generatore
\series default
 dei contenuti da distribuire
\end_layout

\begin_layout Itemize
La struttura della distribuzione è ad 
\series bold
albero o foresta
\end_layout

\begin_layout Itemize
A livello applicativo, nella rete di overlay p2p, il contenuto è organizzato
 in 
\series bold
\emph on
chunks
\series default
\emph default
 dei frame video che chiamiamo 
\series bold
\emph on
segments
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Un singolo 
\emph on
frame
\emph default
 può essere suddiviso in un numero fisso (
\begin_inset Formula $\geq1$
\end_inset

) di 
\emph on
sub-frames
\emph default
 di lunghezza variabile.
\end_layout

\begin_layout Itemize
Gli utenti possono fare 
\emph on
join
\emph default
 e 
\emph on
leave
\emph default
 del sistema in modo dinamico, anche durante la distribuzione di un video.
\end_layout

\begin_layout Standard
Quindi le caratteristiche dello stream sono:
\end_layout

\begin_layout Itemize
Il video stream è una sequenza di 
\begin_inset Formula $m$
\end_inset

 frames ordinati 
\begin_inset Formula $f_{i}$
\end_inset

 con 
\begin_inset Formula $i=1,2,...,m$
\end_inset

 
\end_layout

\begin_layout Itemize
Per ogni frame:
\end_layout

\begin_deeper
\begin_layout Itemize
Tempo di inizio: 
\begin_inset Formula $f_{i}.start$
\end_inset


\end_layout

\begin_layout Itemize
Tempo di fine: 
\begin_inset Formula $f_{i}.end$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Ogni frame è suddiviso in 
\begin_inset Formula $n$
\end_inset

 
\emph on
sub-frames
\emph default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Un sub-frame rappresenta una parte dell'intero frame.
 Per esempio solo una singola descrizione in un 
\emph on
Multiple Description Coding
\emph default
 (
\series bold
MDC
\series default
)
\end_layout

\begin_layout Itemize
Subframe 
\begin_inset Formula $sf_{ij}\rightarrow\text{frame numero }i\:\text{sub-frame offset }j=1,2,...,n$
\end_inset


\end_layout

\begin_layout Itemize
Lunghezza: 
\begin_inset Formula $sf_{ij}.length\quad\left[byte\right]$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 058.png
	scale 50

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
A livello applicativo, i 
\emph on
chunks
\emph default
 di 
\emph on
k
\emph default
 
\emph on
sub-frames
\emph default
 sono organizzati in segmenti.
\end_layout

\begin_layout Itemize
Un segmento 
\begin_inset Formula $s_{i}$
\end_inset

 è assemblato raggruppando i 
\emph on
sub-frames
\emph default
 che hanno lo stesso 
\emph on
offset 
\emph default
in frames consecutivi.
\end_layout

\begin_layout Itemize
Il contenuto video è distribuito a tutti i peers tramite un insieme di 
\begin_inset Formula $q$
\end_inset

 alberi indipendenti.
\end_layout

\begin_layout Itemize

\series bold
La sorgente
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Fornisce lo stream video 
\end_layout

\begin_layout Itemize
È posizionata alla radice di ogni albero 
\end_layout

\begin_layout Itemize
Invia sequenzialmente i segmenti ai propri figli con un intervallo di tempo
 determinato dai tempi di inizio e fine dei frames.
\end_layout

\begin_layout Itemize
Ha una quantità limitata di banda 
\begin_inset Formula $S_{up}\,\left[\frac{bits}{s}\right]$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Solo i segmenti composti da 
\emph on
sub-frames
\emph default
 con lo stesso 
\emph on
j-esimo
\emph default
 
\emph on
sub-frame
\emph default
 offset vengono inoltrati allo stesso albero.
\end_layout

\begin_layout Section*
Ruolo dei peers
\end_layout

\begin_layout Standard
Ogni client della rete P2P è chiamato 
\series bold
\emph on
peer
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Per poter ricevere il contenuto video, un peer 
\begin_inset Formula $p_{i}$
\end_inset

 deve essere nodo di un albero che trasporta il contenuto.
\end_layout

\begin_layout Itemize
Un peer non deve essere parte di tutti gli alberi
\end_layout

\begin_layout Itemize
Tutti i peer, per ogni albero, ricevono segmenti dai genitori e li inviano
 ai figli.
\end_layout

\begin_layout Itemize
Un peer può essere posizionato in diverse posizioni in diversi alberi e
 i diversi alberi possono avere diverse topologie.
\end_layout

\begin_layout Section*
Operazioni dei peers
\end_layout

\begin_layout Standard
Ci riferiamo alla banda di accesso del peer 
\begin_inset Formula $p_{i}$
\end_inset

 con 
\begin_inset Formula $p_{i}.CUp$
\end_inset

 e 
\begin_inset Formula $p_{i}.CDown$
\end_inset

.
\end_layout

\begin_layout Standard
Ogni peer è dotato di un buffer di ricezione e di un buffer di trasmissione.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 059.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Ogni peer fa una serie di 
\series bold
azioni
\series default
:
\end_layout

\begin_layout Itemize
La coda di download è scaricata ad un rate regolare determinato da 
\begin_inset Formula $p_{i}.Cdown$
\end_inset


\end_layout

\begin_layout Itemize
Tutti i 
\emph on
sub-frames
\emph default
 ricevuti dalla coda di download vengono memorizzati nel buffer di 
\emph on
playout
\emph default
.
\end_layout

\begin_layout Itemize
Appena tutti i 
\emph on
sub-frames
\emph default
 che formano un unico segmento vengono ricevuti, il segmento è inviato ad
 ognuno dei figli.
 Questi pacchetti vengono inviati tramite il link di upload
\end_layout

\begin_layout Itemize
I 
\emph on
frame
\emph default
 memorizzati nel buffer di playout sono poi estratti dal player dell'utente
 a rate costante per il video stream.
\end_layout

\begin_layout Section*
Buffer di playout
\end_layout

\begin_layout Standard
È responsabile del riassemblamento dello stream video (i segmenti sono trasporta
ti suddivisi in vari pacchetti come abbiamo visto).
\end_layout

\begin_layout Itemize
Il playout buffer è di 
\bar under
lunghezza finita
\bar default
 
\begin_inset Formula $PBLength$
\end_inset

 misurata in 
\emph on
segments
\emph default
.
\end_layout

\begin_layout Itemize
Quando un 
\emph on
sub-frame
\emph default
 viene ricevuto, viene posizionato nella corretta posizione del playout
 buffer.
\end_layout

\begin_layout Itemize
Quando tutti i frames di un segmento sono stati letti dal player, viene
 liberata una posizione dal buffer di playback
\end_layout

\begin_layout Itemize
Un 
\emph on
peer
\emph default
 inizia a riprodurre lo stream video appena la 
\series bold
\emph on
playback treshold
\series default
\emph default
 
\begin_inset Formula $PBTh$
\end_inset

, misurata in secondi, viene raggiunta.
\end_layout

\begin_layout Section*
Dinamicità dei peers
\end_layout

\begin_layout Itemize
I peers possono entrare e lasciare la rete in modo dinamico.
\end_layout

\begin_layout Itemize
Il sistema, in uno stato pronto, ha un numero 
\begin_inset Formula $N$
\end_inset

 di 
\emph on
peers
\emph default
 attivi simultaneamente.
\end_layout

\begin_layout Itemize
Il tempo speso da un 
\emph on
peer
\emph default
 nel sistema è distribuito in modo esponenziale con media 
\begin_inset Formula $\frac{1}{\mu}$
\end_inset


\end_layout

\begin_layout Itemize
Le operazioni di 
\emph on
join
\emph default
 sono eventi 
\emph on
poisson
\emph default
 indipendenti con un rate totale medio di 
\emph on
joins
\emph default
 pari a 
\begin_inset Formula $\Lambda$
\end_inset

, di modo che 
\begin_inset Formula $N=\frac{\Lambda}{\mu}$
\end_inset


\end_layout

\begin_layout Subsection*
Standard join
\end_layout

\begin_layout Standard
Quando un peer vuole unirsi alla rete, deve diventare parte di uno degli
 alberi di distribuzione.
\end_layout

\begin_layout Standard
In particolare, il 
\emph on
peer
\emph default
 
\begin_inset Formula $p_{i}$
\end_inset

:
\end_layout

\begin_layout Itemize
A seconda della sua banda di download libera viene calcolato il numero massimo
 di 
\emph on
sub-frames
\emph default
 per ogni frame da ricevere
\end_layout

\begin_layout Itemize
I 
\emph on
sub-frame
\emph default
 
\emph on
offsets
\emph default
 vengono scelti casualmente.
 Per ognuno di essi il 
\emph on
peer
\emph default
 seleziona un genitore nell'albero di quell'
\emph on
offset
\emph default
.
\end_layout

\begin_layout Itemize
Per ogni albero, il genitore viene scelto casualmente tra i peers di livello
 più alto nell'albero (vicino alla sorgente) con banda di upload libera
 sufficiente.
\end_layout

\begin_layout Itemize
Dopo un intervallo di tempo 
\begin_inset Formula $t_{Join}$
\end_inset

, il nuovo nodo inizia a ricevere i 
\emph on
sub-streams
\emph default
 dai suoi nuovi genitori.
 Questo intervallo di tempo modella il tempo necessario ad identificare
 e selezionare un nuovo 
\emph on
peer
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 060.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsection*
Join ottimizzata
\end_layout

\begin_layout Standard
I nuovi peers vengono posizionati nelle posizioni più alte degli alberi,
 facendo in modo che nessun peer con banda di upload bassa sia nei livelli
 più alti.
\end_layout

\begin_layout Standard
Il nuovo peer può sostituire uno esistente con banda di upload minore.
\end_layout

\begin_layout Standard
I nodi iniziano a ricevere il 
\emph on
sub-stream
\emph default
 dai loro nuovi parenti dopo un intervallo di tempo 
\begin_inset Formula $t_{rejoin\_rew}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 061.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsection*
Leave standard
\end_layout

\begin_layout Standard
Un 
\emph on
peer
\emph default
 può abbandonare la rete in modo inaspettato e senza avvertimento.
 Nel caso in cui ciò accada, i figli e tutti discendenti dello stesso albero,
 cessano di ricevere lo stream.
\end_layout

\begin_layout Itemize
Dopo un intervallo di tempo 
\begin_inset Formula $t_{Rejoin}$
\end_inset

, i 
\emph on
peers
\emph default
 orfani iniziano la procedura di join per ogni 
\emph on
sub-stream 
\emph default
che non ricevono più.
\end_layout

\begin_deeper
\begin_layout Itemize
Questo intervallo di tempo può rappresentare, per esempio, il tempo richiesto
 da un meccanismo di 
\emph on
keep-alive
\emph default
 
\emph on
detection
\emph default
 per l'identificazione della 
\emph on
leave
\emph default
 di un genitore.
\end_layout

\begin_layout Itemize
Solo i figli diretti di un genitore morto tentano il 
\emph on
rejoin
\emph default
 in nuove posizioni, mentre tutti gli altri membri di alberi che si sono
 divisi seguono il primo genitore.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename 062.png
	scale 50

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
Leave ottimizzata
\end_layout

\begin_layout Standard
In aggiunta alle attività già descritte per la 
\emph on
standard leave
\emph default
, ci occupiamo 
\series bold
prima
\series default
 di identificare un 
\emph on
peer
\emph default
 già esistente per rimpiazzare il 
\emph on
peer
\emph default
 che ha lasciato il sistema.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename 063.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsection*
Peers nearly-permanent
\end_layout

\begin_layout Standard
Nel nostro sistema possiamo inserire dei 
\emph on
peers
\emph default
 
\emph on
nearly-permanent
\emph default
 caratterizzati dalle caratteristiche seguenti:
\end_layout

\begin_layout Itemize
Sono 
\emph on
peers
\emph default
 che hanno un 
\series bold
tempo medio di permanenza
\series default
 pari a 
\begin_inset Formula $\frac{1}{\mu}$
\end_inset

, che è un ordine di grandezza maggiore rispetto alla durata dello stream
 video.
\end_layout

\begin_layout Itemize
Dal nostro punto di vista deve essere superiore al nostro tempo di osservazione
 della simulazione
\end_layout

\begin_layout Standard
Parametri addizionali:
\end_layout

\begin_layout Itemize
Il numero di 
\emph on
peers
\emph default
 
\emph on
nearly-permanent
\emph default
: 
\begin_inset Formula $N^{PERM}$
\end_inset


\end_layout

\begin_layout Itemize
Il numero di 
\emph on
peers
\emph default
 
\emph on
standard: 
\begin_inset Formula $N-N^{PERM}$
\end_inset


\end_layout

\begin_layout Standard
Nel nostro scenario vengono analizzate due situazioni:
\end_layout

\begin_layout Enumerate
I 
\emph on
peers
\emph default
 
\emph on
nearly-permanent 
\emph default
vengono scelti casualmente all'interno del sistema
\end_layout

\begin_layout Enumerate
I 
\emph on
peers nearly-permanent
\emph default
 sono scelti tra quelli con capacità di upload maggiore.
\end_layout

\begin_deeper
\begin_layout Enumerate
Quindi tutti i 
\emph on
nearly-permanent peers
\emph default
 vanno nelle posizioni più alte dell'albero.
\end_layout

\begin_layout Enumerate
Questo stato può essere benefico perché tende alla formazione di alberi
 corti e stabili.
\end_layout

\end_deeper
\begin_layout Subsubsection*
Analisi di parametri e indici
\end_layout

\begin_layout Itemize
Il 
\series bold
numero medio di 
\emph on
peers
\series default
\emph default
: 
\begin_inset Formula $N$
\end_inset

, sono i peers attualmente nella rete
\end_layout

\begin_layout Itemize
Il 
\series bold
numero di 
\emph on
nearly-permanent
\emph default
 
\emph on
peers
\series default
\emph default
: 
\begin_inset Formula $N^{PERM}$
\end_inset


\end_layout

\begin_layout Itemize
Il 
\series bold
tempo medio di permanenza dei 
\emph on
peers
\series default
\emph default
: 
\begin_inset Formula $\frac{1}{\mu}$
\end_inset

, misurato dalla prima join del 
\emph on
peer
\emph default
 fino alla sua 
\emph on
leave
\emph default
.
\end_layout

\begin_layout Standard
Misuriamo le performance con gli indici seguenti:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Playback delay
\series default
\emph default
: È definito come il tempo passato tra il momento in cui la sorgente fornisce
 il contenuto e il momento in cui il client lo legge dal buffer di playout
 del 
\emph on
peer
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
Rapporto tra frame ricevuti e 
\emph on
sub-frame
\series default
 
\emph default
Viene calcolato per ogni peer considerando la presenza o assenza di 
\emph on
sub-frames
\emph default
 nel buffer di playout al loro tempo di 
\emph on
playback
\emph default
.
\end_layout

\begin_layout Subsection*
Parametri della simulazione
\end_layout

\begin_layout Itemize
È stata utilizzata una traccia reale di una partita di calcio della durata
 di 36 minuti, encodata con un 
\emph on
Multiple Division Coding
\emph default
 con 
\series bold
9 
\emph on
descriptions
\series default
\emph default
 per ogni frame (
\begin_inset Formula $n=9$
\end_inset

)
\end_layout

\begin_layout Itemize
Banda media dello stream video: 
\begin_inset Formula $943\: kbps$
\end_inset


\end_layout

\begin_layout Itemize
Durata del frame: 
\begin_inset Formula $33.3\: ms$
\end_inset


\end_layout

\begin_layout Itemize
Ogni 
\series bold
segmento
\series default
 comprende 
\begin_inset Formula $k=20\:$
\end_inset


\emph on
sub-frames
\end_layout

\begin_layout Itemize
Un numero totale di 
\begin_inset Formula $q=9$
\end_inset

 
\series bold
alberi
\series default
/
\series bold
\emph on
sub-streams
\series default
\emph default
 vengono utilizzati.
\end_layout

\begin_layout Itemize
La banda della sorgente 
\begin_inset Formula $S_{Up}$
\end_inset

 è scelta in modo che si possano fornire fino a 
\begin_inset Formula $20$
\end_inset

 
\emph on
sub-streams 
\emph default
contemporaneamente.
\end_layout

\begin_layout Itemize
La 
\series bold
lunghezza del buffer di playout
\series default
 è stata impostata pari a 
\begin_inset Formula $133\, s$
\end_inset

 (
\begin_inset Formula $PBLength=1800$
\end_inset

)
\end_layout

\begin_layout Itemize
Tempo di Join: 
\begin_inset Formula $500\, ms$
\end_inset


\end_layout

\begin_layout Itemize
Tempo totale di rejoin: 
\begin_inset Formula $100\, s$
\end_inset


\end_layout

\begin_layout Itemize
Soglia di playback: 
\begin_inset Formula $3.33\, s$
\end_inset


\end_layout

\begin_layout Itemize
Tempo di rejoin: 
\begin_inset Formula $500\, ms$
\end_inset


\end_layout

\begin_layout Itemize
Numero di 
\series bold
peers
\series default
: 
\begin_inset Formula $50$
\end_inset

 
\end_layout

\begin_layout Itemize
Numero di 
\emph on
nearly-permanent peers
\emph default
: 
\begin_inset Formula $10$
\end_inset

 
\end_layout

\begin_layout Itemize
Tempo medio di permanenza dei 
\emph on
peers
\emph default
: 
\begin_inset Formula $15\: minuti$
\end_inset


\end_layout

\begin_layout Standard
La banda di accesso di upload e download per i peers che joinano, è stata
 impostata in base alla seguente distribuzione di probabilità:
\end_layout

\begin_layout Itemize
\begin_inset Formula $50\%-C_{DOWN}=7\, Mbps$
\end_inset

, 
\begin_inset Formula $C_{UP}=1Mbps$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $30\%-C_{DOWN}=20\, Mbps$
\end_inset

, 
\begin_inset Formula $C_{UP}=1Mbps$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $10\%-C_{DOWN}=8\, Mbps$
\end_inset

, 
\begin_inset Formula $C_{UP}=1Mbps$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $10\%-C_{DOWN}=10\, Mbps$
\end_inset

, 
\begin_inset Formula $C_{UP}=10Mbps$
\end_inset


\end_layout

\begin_layout Section*
Lezione 30-4-13
\end_layout

\begin_layout Standard
Facciamo un confronto tra topologia mesh e topologia ad albero.
\end_layout

\begin_layout Standard
P4P - Proactive Network provider participation for P2P.
 C'è cooperazione con ISP per ottenere informazioni per ottimizzare.
\end_layout

\begin_layout Standard
Qual'è il problema con P2P classico? Il problema è che il collegamento tra
 i nodi non ha conoscenza dei collegamenti sottostanti, potremmo avere anche
 due nodi collegati tra di loro in un albero che passano tra stati lontani
 tra loro.
\end_layout

\begin_layout Standard
Quindi p4p è un insieme di tecniche e architetture per sfruttare la conoscenza
 della rete..
\end_layout

\begin_layout Standard
[omissis]
\end_layout

\begin_layout Standard
C'è un gruppo di lavoro IETF chiamato 
\begin_inset Quotes eld
\end_inset

ALTO
\begin_inset Quotes erd
\end_inset

 (Application Layer Traffic Optimization).
 I sistemi supportati sono:
\end_layout

\begin_layout Itemize
Bittorrent (ma mica non era standard?)
\end_layout

\begin_layout Itemize
Trackerless bittorrent
\end_layout

\begin_layout Itemize
CDN
\end_layout

\begin_layout Itemize
...
\end_layout

\begin_layout Standard
C'è un progetto chiamato ono project che ha fatto delle misure usando un
 plugin nel client bittorrent vuze.
\end_layout

\begin_layout Standard
Funzione obiettivo per valutare la qualità di un peer:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
V_{i,j}=\alpha\cdot\frac{\text{Downloaded byte}_{i,j}}{max_{k\in N}\left(\text{Downloaded Byte}_{i,k}\right)}+\beta\cdot\frac{max\left(1,NHOP_{max}-NHop_{i,j}\right)}{\left(NHop_{max}-1\right)}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha+\beta=1
\]

\end_inset


\end_layout

\begin_layout Standard
Se accettiamo di usare hop distanti abbiamo più banda, se usiamo peer vicini
 occupiamo meno risorse nella rete ma abbiamo meno banda (???).
\end_layout

\begin_layout Standard
...[big omissis]...
\end_layout

\begin_layout Part*
IP Telephone service
\end_layout

\begin_layout Standard
Partiremo a vedere dal punto di vista dell'utente finale e poi passeremo
 a vedere dei sistemi di signaling: H.323 e SIP.
 Infine vedremo il discorso correlato all'
\emph on
interworking
\emph default
.
\end_layout

\begin_layout Section*
Codecs
\end_layout

\begin_layout Standard
Abbiamo principalmente 3 tipi di codecs:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Waveform
\series default
\emph default
 (alta qualità, alta banda utilizzata)
\end_layout

\begin_deeper
\begin_layout Itemize
Sono codecs molto semplici e di alta qualità, che però utilizzano molta
 banda!
\end_layout

\begin_layout Itemize

\series bold
G.711
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Semplicemente campionano i dati che arrivano dal segnale audio.
 
\end_layout

\begin_layout Itemize
Il valore di campionamento minimo è 8KHz, poiché il segnale audio ha una
 banda minima di 4KHz.
\end_layout

\begin_layout Itemize
Solitamente i campioni sono salvati con una risoluzione di 8 bit per ogni
 campione, quindi occupiamo 64 Kbit/s.
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
Differential Coders
\end_layout

\begin_deeper
\begin_layout Itemize
Si tiene conto solo della differenza tra i vari campioni
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\series bold
\emph on
Vocoder
\series default
\emph default
 (bassa qualità, bassa banda utilizzata)
\end_layout

\begin_deeper
\begin_layout Itemize
Implementano un filtro digitale per campionare e riprodurre suoni con le
 caratteristiche della voce umana.
\end_layout

\begin_layout Itemize
Il coder identifica i parametri del segnale e la 
\emph on
excitation mode
\emph default
 del segnale.
\end_layout

\begin_layout Itemize
Si tentata di identificare il tipo di suono e in base ad esso eccitare il
 filtro in modo diverso, ad esempio suddividendo i segnali in :
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
vowel sounds
\emph default
: onde sinusoidali
\end_layout

\begin_layout Itemize

\emph on
pulsive sounds
\emph default
: impulsi
\end_layout

\end_deeper
\begin_layout Itemize
Infine viene trasmesso un pacchetto con una lista di parametri e eccitazioni
 tenendo conto che anche il ricevitore ha una 
\emph on
reference
\emph default
 per capire a quali suoni corrispondono i dati inviati.
\end_layout

\begin_layout Itemize
Con questo tipo di 
\emph on
coders
\emph default
 possiamo anche utilizzare pochissima banda (anche solo 5Kbit/s), dove avremo
 però un po' di suoni 
\begin_inset Quotes eld
\end_inset

artificiali
\begin_inset Quotes erd
\end_inset

 tipo voci 
\begin_inset Quotes eld
\end_inset

robotiche
\begin_inset Quotes erd
\end_inset

, quindi scapito alla qualità.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
\emph on
Hybrid
\end_layout

\begin_deeper
\begin_layout Itemize
È un tradeoff tra qualità e banda.
\end_layout

\end_deeper
\begin_layout Standard
Abbiamo un grafico per illustrare il tradeoff tra qualità e banda:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 044.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
La metrica solitamente utilizzata per specificare la qualità del suono è
 
\series bold
MOS
\series default
 (Mean Opinion Score), una metrica 
\series bold
soggettiva
\series default
 da 1 a 5:
\end_layout

\begin_deeper
\begin_layout Itemize
Eccellente: 5
\end_layout

\begin_layout Itemize
Buono: 4
\end_layout

\begin_layout Itemize
Medio: 3
\end_layout

\begin_layout Itemize
Basso: 2
\end_layout

\begin_layout Itemize
Pessimo: 1
\end_layout

\end_deeper
\begin_layout Itemize
Vediamo alcuni schemi di 
\emph on
coding
\emph default
:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ADPCM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.726
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
40 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.37
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.726
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
24 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3.52
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.726
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
16 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.23
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
G.711
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
64 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
~4.4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
← Sempre supportato
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Hybrid
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.728
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
16 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.24
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.
 729
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
8 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.14
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GSM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
06 10 Full Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
13 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3.75
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
60 Enanched Full Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
12.2 Kbit/s
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Ricordiamo che nel caso della comunicazione via rete, i valori di MOS sopra
 espressi si riferiscono ad un trasporto di rete senza perdite.
 Quindi in realtà il MOS, nel caso di rete con perdite di pacchetti, è inferiore
 a quanto sopra scritto.
\end_layout

\begin_layout Itemize
C'è sempre il problema di scegliere quale codec usare, quindi è necessaria
 una parte di 
\series bold
\emph on
signaling
\series default
\emph default
 per comunicare tra i due endpoints e decidere quale codec utilizzare.
 Di solito almeno 
\series bold
G.711
\series default
 è sempre supportato da entrambi gli endpoints.
\end_layout

\begin_layout Standard
La qualità è molto importante in una telefonata audio e/o video.
 Abbiamo metodi per migliorare la qualità delle telefonate IP dato un certo
 coder utilizzato.
 
\end_layout

\begin_layout Standard
Abbiamo una serie di tecniche, ad esempio:
\end_layout

\begin_layout Subsubsection*
Packet Loss Concealment
\end_layout

\begin_layout Standard
È utile quando abbiamo ad esempio link wireless tra i due nodi.
\end_layout

\begin_layout Standard
In realtà è una tecnica di 
\series bold
\emph on
interleaving
\series default
\emph default
.
 Cosa significa? Immaginiamo di avere una serie di pacchetti numerati che
 trasportano il traffico audio: 1,2,3,4,5...
\end_layout

\begin_layout Standard
I pacchetti che inviamo non contengono i vari pezzi in ordine, ma sono distribui
ti all'interno di pacchetti diversi (vedi figura).
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 045.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
In sostanza mescoliamo l'ordine.
 Perché? Se perdo un pacchetto comunque ho una perdita di informazione,
 però 
\series bold
le perdite di pacchetti sono solitamente correlate
\series default
, se perdo un pacchetto è molto probabile che perderò anche il successivo.
 Se i pacchetti sono ordinati, questo ha un effetto molto negativo nella
 qualità percepita dall'utente che sente un lungo silenzio.
 Mescolando un po' invece perdiamo pacchetti ma sono separati nel tempo,
 quindi l'effetto non è così grave.
 Non abbiamo un momento di silenzio ma solo dei brevi istanti.
 Il nostro cervello è in grado di interpolare approssimativamente cosa c'è
 in un brevissimo istante di silenzio.
\end_layout

\begin_layout Standard
Il problema di questa tecnica è che dobbiamo accumulare pacchetti per farla,
 quindi 
\series bold
delay
\series default
!
\end_layout

\begin_layout Subsubsection*
Parity Encoding
\end_layout

\begin_layout Standard
Si utilizzano spesso anche tecniche 
\series bold
FEC
\series default
 (Forward Error Correction) per correggere errori nei pacchetti.
 Però richiedono ritardo e sono complessi, quindi si preferisce evitarli.
\end_layout

\begin_layout Standard
Si preferisce il 
\emph on
parity encoding
\emph default
: si prende un gruppo di 
\begin_inset Formula $n$
\end_inset

 pacchetti e si aggiunge in coda un altro pacchetto 
\begin_inset Formula $n+1$
\end_inset

 chiamato 
\begin_inset Quotes eld
\end_inset


\emph on
parity packet
\emph default

\begin_inset Quotes erd
\end_inset

.
 Questo pacchetto contiene dei bits che sono il risultato dello XOR dei
 bit di ogni pacchetto:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
b_{i}^{n+1}=b_{i}^{1}\oplus b_{i}^{2}\oplus...\oplus b_{i}^{n}
\]

\end_inset


\end_layout

\begin_layout Standard
Però con questo metodo possiamo correggere l'errore solo per un pacchetto.
\end_layout

\begin_layout Standard
Anche qua aumentiamo banda però non risolviamo del tutto il problema.
 Anche in questo caso c'è un tradeoff su cosa utilizzare.
\end_layout

\begin_layout Subsubsection*
PiggyBackFEC
\end_layout

\begin_layout Standard
È una tecnica per risparmiare banda: al posto di trasmettere due pacchetti
 con i due relativi header, li trasmetto in un pacchetto unico risparmiando
 l'overhead dell'header, quindi il pacchetto FEC viene trasportato insieme
 all'
\emph on
n-esimo
\emph default
 pacchetto.
\end_layout

\begin_layout Subsubsection*
Redundant Data Transmission (RDT)
\end_layout

\begin_layout Standard
Per risolvere gli errori ritrasmetto i dati più volte.
 Ad esempio:
\end_layout

\begin_layout Itemize
Pacchetto 1: header e dati 1 e 2
\end_layout

\begin_layout Itemize
Pacchetto 2: header e dati 2 e 3
\end_layout

\begin_layout Itemize
Pacchetto 3: header e dati 3 e 4
\end_layout

\begin_layout Standard
Se perdiamo ad esempio il pacchetto 2 non abbiamo problemi di perdita informazio
ne! 
\end_layout

\begin_layout Standard
Il problema è che duplichiamo la banda!
\end_layout

\begin_layout Subsubsection*
Duplicate Packets
\end_layout

\begin_layout Standard
È il metodo più stupido: trasmetto i pacchetti due volte.
\end_layout

\begin_layout Subsubsection*
Esempio
\end_layout

\begin_layout Standard
Ci sono tanti metodi, il problema è riuscire a combinarli in modo efficiente!
\end_layout

\begin_layout Standard
Ad esempio:
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Codec
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
% perdita
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Qualità MOS
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.729 (Plaw)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
~3.3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
G.729+pFEC
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
~3.65
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 046.png
	scale 50

\end_inset


\end_layout

\begin_layout Section*
Signaling
\end_layout

\begin_layout Standard
Siamo nella parte di controllo e non più nella parte di control plane.
\end_layout

\begin_layout Itemize

\series bold
H.323
\series default
: ITU-T
\end_layout

\begin_layout Itemize

\series bold
SIP
\series default
: Session Initiation Protocol (IETF)
\end_layout

\begin_layout Subsection*
H.323 Architecture
\end_layout

\begin_layout Standard
È un protocollo ma definisce anche una architettura di rete, che ora vedremo.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 043.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize

\series bold
H.323 Terminal
\series default
: Può essere un qualunque tipo di terminale audio/video con funzionalità
 voce, audio e video.
 Deve avere un insieme di 
\series bold
codecs
\series default
.
\end_layout

\begin_layout Itemize

\series bold
H.323 Gatekeeper
\series default
: Controlla un sottoinsieme della rete, si occupa di diversi terminali della
 rete.
 Solitamente una rete H.323 è suddivisa in varie 
\series bold
areas
\series default
/
\series bold
zones
\series default
 controllate ciascuna da un diverso 
\series bold
gatekeeper
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize
Controlla gli accessi alla rete e gestisce i permessi.
\end_layout

\begin_layout Itemize
Si occupa di far scalare la rete gestendo una sotto-zona.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 048.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
Può anche fare controllo della banda utilizzata e qualità del servizio.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
H.323 MCU - 
\emph on
Multipoint Controller Unit
\series default
\emph default
: Dispositivi utilizzate per fare setup di connessioni multi-punto, ad esempio
 conferenze multimediali.
 Stabilisce quale formato deve essere utilizzato tra i vari partecipanti.
 Trasmette ai partecipanti un 
\emph on
capability set
\emph default
, che può anche essere modificato dinamicamente durante la conferenza.
\end_layout

\begin_layout Itemize

\series bold
H.323 Gateways
\series default
: Devices di 
\series bold
interconnessione
\series default
 (
\emph on
interworking
\emph default
) per interconnettere i dispositivi H.323 ad altre reti:
\end_layout

\begin_deeper
\begin_layout Itemize
Rete SIP
\end_layout

\begin_layout Itemize
Un'altra rete H.323
\end_layout

\begin_layout Itemize
PSTN - 
\emph on
Public Switch Telephone Network
\emph default
 (utilizzano il sistema di signaling 
\series bold
SS7
\series default
)
\end_layout

\begin_layout Itemize
GSM
\end_layout

\begin_layout Itemize
UMTS
\end_layout

\begin_layout Itemize
...
\end_layout

\begin_layout Itemize
L'interworking non lavora solo sulle operazioni di signaling, ma anche sui
 contenuti multimediali! Ad esempio può succedere che tra due reti ci sia
 un canale di collegamento che fa da collo di bottiglia.
 Può quindi succedere che nel punto di interconnessione bisogna rifare l'operazi
one di coding.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 047.png
	scale 40

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
H.323 Protocols
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
User Plane
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Control Plane
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Applications
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Application Control
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Coders
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RTCP
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
H.255.0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
H.255.0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
H.245
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RTP
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RAS Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Call Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Control Signaling
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
UDP
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
UDP
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
TCP
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
IP
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
IP
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Come vediamo non c'è nessun protocollo H.323 nella parte di User Plane.
 Questo perché H.323 è un protocollo di signaling! Non si occupa effettivamente
 di scambiare i dati tra i due endpoints!
\end_layout

\begin_layout Itemize

\series bold
RAS
\series default
 sta per 
\series bold
\emph on
Registration Admission Status
\series default
\emph default
.
 La maggior parte del RAS Signaling è gestito dai gatekeepers.
\end_layout

\begin_layout Itemize

\series bold
Call Signaling
\series default
 è la parte di signaling svolta principalmente dagli endpoint della connessione.
\end_layout

\begin_layout Subsection*
RAS (
\series bold
\emph on
Registration Admission Status
\series default
\emph default
) signaling
\end_layout

\begin_layout Standard
Quali sono le funzioni offerte dal RAS signaling? Vediamo le principali:
\end_layout

\begin_layout Itemize

\series bold
Gatekeeper discovery
\series default
: Come fa un dispositivo a trovare il proprio 
\emph on
gatekeeper
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
Registration
\series default
/
\series bold
Unregistration
\series default
: Un dispositivo prima di fare qualunque cosa deve registrarsi al 
\emph on
gatekeeper
\emph default
, per annunciare la propria esistenza.
\end_layout

\begin_layout Itemize

\series bold
Admission
\series default
: Una volta che un dispositivo è registrato, non può fare tutto quello che
 vuole.
 Quando vuole fare un setup di una connessione deve chiedere al 
\emph on
gatekeeper
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
Bandwidth Change
\series default
: Un 
\emph on
gatekeeper
\emph default
 può richiedere ad un dispositivo di ridurre la banda occupata
\end_layout

\begin_layout Itemize

\series bold
Disengage
\series default
: Un device che chiede al 
\emph on
gatekeeper
\emph default
 di interrompere una connessione
\end_layout

\begin_layout Itemize

\series bold
Resource Availability
\series default
: Un device chiede al 
\emph on
gatekeeper
\emph default
 la quantità di risorse disponibili.
\end_layout

\begin_layout Itemize
...
\end_layout

\begin_layout Subsubsection*
Gatekeeper discovery
\end_layout

\begin_layout Standard
Come abbiamo visto, senza gatekeeper, un device non può fare niente.
 Come fare a trovarlo?
\end_layout

\begin_layout Itemize
Può essere configurato manualmente all'interno dei devices.
 Funziona ma non è una soluzione molto flessibile ovviamente.
\end_layout

\begin_layout Itemize
C'è un messaggio chiamato 
\begin_inset Quotes eld
\end_inset


\series bold
gatekeeper request message
\series default

\begin_inset Quotes erd
\end_inset


\series bold
 
\series default
(
\series bold
GRQ
\series default
) che può essere inviato:
\end_layout

\begin_deeper
\begin_layout Itemize
Ad una lista di indirizzi preconfigurati, oppure
\end_layout

\begin_layout Itemize
Ad un gruppo IP di 
\emph on
multicast
\emph default
 
\series bold
224.0.1.41:1718 
\series default
(
\emph on
All-gatekeepers group
\emph default
)
\end_layout

\begin_deeper
\begin_layout Itemize
Questo messaggio può arrivare a diversi gatekeepers diversi che possono
 risponde:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
GRJ
\series default
 - 
\emph on
Gatekeeper ReJect message
\emph default
 : No, non posso essere il tuo gatekeeper
\end_layout

\begin_layout Itemize

\series bold
GCF
\series default
 - 
\emph on
Gatekeeper Confirmation
\emph default
: Io sono il tuo gatekeeper!
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
\begin_inset Graphics
	filename 049.png
	scale 40

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection*
Endpoint registration
\end_layout

\begin_layout Standard
Una volta che un device ha scoperto il suo gatekeeper, deve registrarsi
 prima di fare qualunque altra cosa.
\end_layout

\begin_layout Itemize
L'endpoint invia un messaggio 
\series bold
RRQ
\series default
 (
\emph on
Registration ReQuest
\emph default
) all'ip del gatekeeper che ha trovato e porta 1719 (porta RAS)
\end_layout

\begin_layout Itemize
Il gatekeeper risponde al device terminale inviando:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Registration Confirmation 
\series default
con una certa durata temporale, oppure
\end_layout

\begin_layout Itemize

\series bold
RRJ
\series default
 (
\emph on
Registration ReJection
\emph default
)
\end_layout

\end_deeper
\begin_layout Itemize
Se un dispositivo si vuole de-registrare, può inviare una richiesta 
\series bold
URQ
\series default
 (
\emph on
UnRegistration ReQuest
\emph default
) al gatekeeper
\end_layout

\begin_deeper
\begin_layout Itemize
Il gatekeeper risponderà:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
UCF
\series default
 (
\emph on
UnRegister ConFirmation
\emph default
) oppure
\end_layout

\begin_layout Itemize

\series bold
URJ 
\series default
(
\emph on
Unregister ReJection
\emph default
)
\end_layout

\end_deeper
\begin_layout Itemize
Notiamo che il gatekeeper può de-registrare un device terminale anche se
 questo non lo ha richiesto!
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 050.png
	scale 40

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection*
Admission
\end_layout

\begin_layout Standard
È la parte in cui un device terminale chiede ad un gatekeeper se può comunicare
 con un altro terminale.
\end_layout

\begin_layout Itemize
La richiesta è 
\series bold
ARQ
\series default
 (
\emph on
Admission ReQuest
\emph default
), che contiene:
\end_layout

\begin_deeper
\begin_layout Itemize
Tipo di chiamata (1-1, multiparty)
\end_layout

\begin_layout Itemize
Lista dei partecipanti
\end_layout

\begin_layout Itemize
Tipo di media utilizzato (chiamata audio e/o video)
\end_layout

\begin_layout Itemize
Tipo di call signaling che il terminale vuole utilizzare:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Direct call signaling
\series default
: L'endpoint scambia direttamente i messaggi di signaling con la destinazione
\end_layout

\begin_layout Itemize

\series bold
Gatekeeper routed call signaling
\series default
: L'endpoint comunica con il gatekeeper, che poi si occuperà a sua volta
 di gestire il signaling.
 In questo modo il gatekeeper ha più controllo su cosa sta succedendo, può
 ad esempio gestire meglio la banda.
\end_layout

\begin_layout Itemize
Il gatekeeper può forzare una di queste due modalità sopra descritte.
\end_layout

\end_deeper
\begin_layout Itemize
...
\end_layout

\end_deeper
\begin_layout Itemize
Il gatekeeper risponde con 
\series bold
ACF
\series default
 (
\emph on
Admission ConFirmation
\emph default
)
\emph on
 
\emph default
oppure 
\series bold
ARJ
\series default
 (
\emph on
Admission ReJect
\emph default
)
\end_layout

\begin_layout Subsubsection*
Direct call signaling
\end_layout

\begin_layout Standard
Questo è un tipo di segnalazione diretta, che non passa per il gatekeeper.
\end_layout

\begin_layout Itemize
Ammettiamo di avere già fatto signaling RAS da un nodo A per collegarci
 ad un nodo B come visto sopra.
\end_layout

\begin_layout Itemize
Se abbiamo il permesso di comunicare, possiamo collegarci direttamente a
 B inviando un messaggio di 
\series bold
setup
\series default
.
 B dovrà a sua volta interpellare il suo gatekeeper per sapere se ha il
 permesso di comunicare con me.
\end_layout

\begin_layout Itemize
Se tutto va bene, B risponderà con un messaggio 
\series bold
connect
\series default
.
\end_layout

\begin_layout Standard
A questo punto del signaling anche i codecs sono già stati negoziati, quindi
 la comunicazione può cominciare.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 051.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Gatekeeper routed signaling
\end_layout

\begin_layout Itemize
A manda il messaggio di connect al gatekeeper, che lo inoltra a B.
\end_layout

\begin_layout Itemize
B verifica se può comunicare con A chiedendo al proprio gatekeeper.
\end_layout

\begin_layout Itemize
Se B può comunicare, B invia connect al gatekeeper che inoltra ad A.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 052.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Disengage
\end_layout

\begin_layout Standard
Come si interrompe la connessione?
\end_layout

\begin_layout Itemize
Il terminale avvisa il gatekeeper che sta per interrompere una connessione
 con una 
\emph on
Disengage Request
\emph default
 (
\series bold
DRQ
\series default
).
 
\end_layout

\begin_layout Itemize
Il gatekeeper può rispondere:
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
Disengage Confirm
\emph default
: 
\series bold
DCF
\end_layout

\begin_layout Itemize

\emph on
Disengage Reject
\emph default
: 
\series bold
DRJ
\end_layout

\end_deeper
\begin_layout Subsubsection*

\series bold
Resource Availability
\end_layout

\begin_layout Standard
È la funzione utilizzata da una entità per avvisare il gatekeeper di alcune
 informazioni di stato.
\end_layout

\begin_layout Itemize
Vengono utilizzati dei messaggi 
\series bold
RAI
\series default
 (
\emph on
Resource Availability Information
\emph default
).
\end_layout

\begin_layout Itemize
Ad esempio il gateway può comunicare con il gatekeeper per comunicare le
 risorse disponibili.
\end_layout

\begin_deeper
\begin_layout Itemize
Il gatekeeper conferma con 
\series bold
RAC
\series default
 (
\emph on
Resource Availability Confirmation
\emph default
).
\end_layout

\begin_layout Itemize
Non c'è bisogno di un messaggio di reject in questo caso.
\end_layout

\end_deeper
\begin_layout Subsection*
Call signaling
\end_layout

\begin_layout Standard
Abbiamo messaggi di:
\end_layout

\begin_layout Itemize

\series bold
Alterting
\series default
: Viene utilizzato dall'entità ricevente, per informare che la chiamata
 ha raggiunto la destinazione e che la destinazione chiamata sta squillando.
\end_layout

\begin_layout Itemize

\series bold
Call proceeding
\series default
: 
\emph on
\bar under
Provisional response
\emph default
\bar default
, è una informazione che avvisa di aver ricevuto una richiesta.
 Ha lo scopo di cambiare un timeout che rischierebbe di far cadere la connession
e prima che venga stabilita.
 Questo succederebbe a causa di grossi ritardi, packet loss o servers carichi.
\end_layout

\begin_layout Itemize

\series bold
Connect
\end_layout

\begin_layout Itemize

\series bold
Progress
\series default
: È un'altra provisional response
\end_layout

\begin_layout Itemize

\series bold
Setup
\series default
: Lo abbiamo già visto, è un segnale che va da endpoint ad endpoint, a meno
 di essere veicolato tramite gatekeeper.
 È una richiesta per stabilire una connessione con la destinazione.
 Che tipo di parametri può contenere questa richiesta?
\end_layout

\begin_deeper
\begin_layout Itemize
Identificativi dei 
\series bold
\emph on
partners
\series default
\emph default
 della chiamata (possono essere più di uno)
\end_layout

\begin_layout Itemize

\series bold
Parametri
\series default
 che descrivono la connessione (one-to-one, one-to-many, ...)
\end_layout

\begin_layout Itemize

\series bold
\bar under
Descrizione dei canali logici
\series default
\bar default
 da utilizzare per negoziare il coding dei contenuti multimediali.
 In questa fase 
\series bold
non
\series default
 vengono negoziati i codecs.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
SetupACK
\end_layout

\begin_layout Itemize

\series bold
ReleaseComplete
\series default
: Un'entità avvisa un'altra entità che sta per rilasciare la chiamata, cioè
 che farà un disengage RAS
\end_layout

\begin_deeper
\begin_layout Itemize
In protocolli di signaling vecchi come SS7 c'era sia release che releasecomplete.
 Invece qua c'è un messaggio unico.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Information
\end_layout

\begin_layout Itemize

\series bold
Notify
\end_layout

\begin_layout Itemize

\series bold
Status
\end_layout

\begin_layout Itemize

\series bold
StatusInquiry
\end_layout

\begin_layout Itemize

\series bold
Facility
\series default
: Utilizzato per modificare o redirigere una telefonata.
 È una procedura complessa, vedremo come funziona in un esempio.
\end_layout

\begin_layout Subsection*
Control Signaling
\end_layout

\begin_layout Standard
La funzione principale svolta da questo signaling è la 
\series bold
negoziazione dei formati per tutti i contenuti multimediali 
\series default
presenti nella connessione.
\end_layout

\begin_layout Standard
Il control signaling inizia mentre il call signaling è in corso! Infatti
 il control signaling può agire da dopo che è stato inviato il setup message
 nel 
\emph on
call signaling
\emph default
.
 Può anche essere dopo il 
\emph on
connect
\emph default
 message.
\end_layout

\begin_layout Standard
Ricordiamoci che il control signaling è sempre tra i due endpoint direttamente.
 In realtà qua stiamo vedendo il caso di una comunicazione tra due dispositivi
 nella stessa rete o tra due zone diverse della stessa rete.
 Nel caso di device su reti diverse, il control signaling non sarà più punto-pun
to.
\end_layout

\begin_layout Standard
Riassumendo:
\end_layout

\begin_layout Itemize
A invia 
\series bold
SETUP
\series default
 a B
\end_layout

\begin_layout Itemize
B invia 
\series bold
CALL PROCEEDING
\series default
 ad A
\end_layout

\begin_layout Itemize
B invia 
\series bold
ALERTING
\series default
 ad A
\end_layout

\begin_layout Itemize
B 
\begin_inset Quotes eld
\end_inset

risponde
\begin_inset Quotes erd
\end_inset

 e invia la 
\series bold
CONNECT
\series default
 ad A
\end_layout

\begin_layout Itemize
Utilizzando la tecnica descritta nel messaggio di SETUP, si inizia la fase
 di control signaling aprendo un altro socket per scambiare le informazioni
 sui contenuti multimediali.
\end_layout

\begin_layout Subsubsection*
Chiamata senza gatekeeper
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 053.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsubsection*
Chiamata con gatekeeper e call signaling diretto
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 054.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsubsection*
Chiamata con gatekeeper e call signaling routed
\end_layout

\begin_layout Standard
L'assunzione qua è che uno dei due gatekeeper fa routing del call signaling
 e l'altro no
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 055.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsubsection*
Chiamata con gatekeeper e call signaling routed forzato
\end_layout

\begin_layout Standard
GK2 rifiuta l'ARQ da EP2 perché vuole un routed call signaling.
 Quindi EP2 invia un messaggio FACILITY a GK1.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 056.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsubsection*
Logical channels
\end_layout

\begin_layout Standard
Tramite il control signaling vengono stabiliti dei canali logici per scambiare
 i contenuti multimediali.
\end_layout

\begin_layout Standard
Per stabilire un canale logico vengono utilizzati i messaggi di:
\end_layout

\begin_layout Itemize

\series bold
Open Logical Channel Message
\end_layout

\begin_layout Itemize

\series bold
Open Logical Channel Ack
\end_layout

\begin_layout Standard
Poi c'è anche una procedura di 
\series bold
Capabilities Exchange 
\series default
, tramite la quale i due terminali scambiano informazioni riguardo ai codecs
 supportati e quali devono essere utilizzati.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 057.png
	scale 50

\end_inset


\end_layout

\begin_layout Part*
SIP (Session Initiation Protocol)
\end_layout

\begin_layout Standard
È un protocollo di signaling standardizzato dalla IETF.
 Viene utilizzato insieme ad altri protocolli come ad esempio:
\end_layout

\begin_layout Itemize
Session Description Protocol (
\series bold
SDP
\series default
)
\end_layout

\begin_layout Itemize
Real Time Streaming Protocol (
\series bold
RTSP
\series default
)
\end_layout

\begin_layout Itemize
Session Announcement Protocol (
\series bold
SAP
\series default
)
\end_layout

\begin_layout Standard
SIP si occupa del 
\series bold
setup
\series default
, 
\series bold
tear down
\series default
 e 
\series bold
management
\series default
 delle sessioni IP multimediali.
\end_layout

\begin_layout Standard
SIP utilizza solitamente RTP come protocollo (livello 4) di trasporto per
 gli streams multimediali.
\end_layout

\begin_layout Standard
Per la parte di signaling di SIP viene utilizzato un canale di comunicazione
 logico separato, diverso dai canali logici utilizzati per il trasporto
 dei contenuti multimediali.
\end_layout

\begin_layout Section*
Infrastruttura
\end_layout

\begin_layout Standard
SIP ha due tipi di entità:
\end_layout

\begin_layout Itemize

\series bold
Client
\series default
: chiamato anche 
\series bold
\emph on
User Agent Client
\series default
\emph default
, girano sui terminali degli utenti.
 È una applicazione il cui scopo principale è quello di fare richieste SIP.
\end_layout

\begin_layout Itemize

\series bold
Server
\series default
: È una applicazione che gira su qualunque dispositivo.
 Si occupa di stabilire connessioni e rispondere alle richieste dei clients.
 Ci sono svariati tipi di server:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Proxy Server
\end_layout

\begin_layout Itemize

\series bold
Redirect Server 
\end_layout

\begin_layout Itemize

\series bold
Registrar Server
\end_layout

\begin_layout Itemize

\series bold
User Agent Server
\end_layout

\begin_layout Itemize
Solitamente i primi 3 servers elencati sono processi del server (chiamato
 ancora 
\emph on
Proxy Server
\emph default
), mentre l'ultimo gira sull'host dell'utente.
\end_layout

\end_deeper
\begin_layout Standard
In un sistema SIP devono essere presenti almeno due entità: 
\series bold
user agent client
\series default
 e un 
\series bold
user agent server
\series default
.
\end_layout

\begin_layout Subsection*
Proxy (redirect) server
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 068.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
In questo esempio vediamo come un host (marco@work.com) contatta un proxy
 server per contattare Luca e il proxy server invia una richiesta a Luca
 e re-inoltra la risposta a marco.
\end_layout

\begin_layout Standard
Questo è uno dei modi in cui i 
\emph on
proxy server
\emph default
 funzionano, implementando un 
\series bold
\emph on
redirect server
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Di seguito vediamo un altro esempio:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 069.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
In questo esempio vediamo come il 
\emph on
proxy server
\emph default
 avvisa il chiamante che è necessario contattare direttamente il dispositivo
 terminale ad un certo indirizzo (senza passare ancora per il proxy), invece
 di fare il redirect in modo trasparente.
\end_layout

\begin_layout Standard
Come vediamo rispetto a H.323, il protocollo è molto più 
\begin_inset Quotes eld
\end_inset

libero
\begin_inset Quotes erd
\end_inset

, senza troppi approcci burocratici...
\end_layout

\begin_layout Subsection*
Applicazioni SIP (esempi)
\end_layout

\begin_layout Itemize

\series bold
\emph on
Find-me-follow-me
\series default
\emph default
: Quello che abbiamo visto prima è un tipo di protocollo 
\emph on
find-me-follow-me
\emph default
, cioè avvisa dove trovare un certo terminale (che può 
\begin_inset Quotes eld
\end_inset

spostarsi
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_deeper
\begin_layout Itemize
È infatti anche possibile specificare su questi 
\emph on
proxy server
\emph default
 degli orari in base al quale dare delle risposte separate.
 Ad esempio durante gli orari lavorativi della settimana il destinatario
 potrebbe essere ad un certo indirizzo (lavorativo), mentre la sera e nel
 weekend potrebbe essere ad un altro indirizzo (di casa).
\end_layout

\begin_layout Itemize
Il vantaggio è che spesso questi servizi sono configurabili da interfacce
 web.
\end_layout

\begin_layout Itemize
C'è la possibilità di configurare il sistema in modo da far suonare contemporane
amente diversi terminali, o ottenere una lista di terminali.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
\emph on
Interactive Voice Response
\series default
\emph default
 (
\series bold
IVR
\series default
): Segreteria telefonica
\end_layout

\begin_layout Itemize

\series bold
\emph on
Click-to-dial
\series default
\emph default
: È una pagina web da cui è possibile chiamare direttamente l'utente cliccando
 semplicemente su un link che contiene il suo indirizzo
\end_layout

\begin_layout Itemize

\series bold
\emph on
Contact-Manager
\series default
\emph default
: È un servizio di rubrica centralizzata, permette di localizzare un utente
 in modo indipendente dalla posizione geografica.
\end_layout

\begin_layout Subsection*
User Agent Server
\end_layout

\begin_layout Standard
È il server che è solitamente presente sui terminali utente, che contengono
 comunque anche lo 
\emph on
user agent client
\emph default
.
 Vengono utilizzati per inviare richieste di signaling e riceverne da altri
 host.
\end_layout

\begin_layout Subsection*
Registrar Server
\end_layout

\begin_layout Standard
Questo server si occupa di gestire le richieste REGISTER che sono utilizzate
 dai device SIP per registrarsi nella rete SIP.
 Dopo che un device SIP si è registrato, diventa operativo.
\end_layout

\begin_layout Subsection*
Struttura base di una chiamata SIP
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 070.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
Il messaggio 
\series bold
INVITE
\series default
 viene utilizzato per avviare la chiamata.
 In questo esempio si assume che il messaggio possa essere inviato direttamente
 dallo user agent client del primo host allo 
\emph on
user agent server
\emph default
 del secondo host.
\end_layout

\begin_layout Itemize
L'host che riceve il messaggio 
\series bold
INVITE
\series default
 risponde inviando un messaggio 
\series bold
RINGING
\series default
 al chiamante, di modo da fargli sapere che il telefono del chiamato ha
 iniziato a squillare.
\end_layout

\begin_layout Itemize
Quando il chiamato risponde, viene inviato il messaggio 
\series bold
OK 
\series default
per avvisare il chiamante che il chiamato ha risposto e inizia la comunicazione
\end_layout

\begin_layout Itemize
Il chiamato risponde con un 
\series bold
ACK
\series default
 per confermare di aver ricevuto il messaggio 
\series bold
OK
\series default
.
\end_layout

\begin_layout Itemize
Quando uno dei due host desidera terminare la chiamata, viene inviato il
 messaggio 
\series bold
BYE
\series default
 , a cui segue la risposta 
\series bold
OK
\series default
.
\end_layout

\begin_layout Subsection*
Caratteristiche di SIP
\end_layout

\begin_layout Itemize
SIP è un protocollo di signaling semplice e flessibile
\end_layout

\begin_layout Itemize
I parametri per la negoziazione dei contenuti multimediali sono trasportati
 nel corpo dei messaggi SIP.
\end_layout

\begin_layout Itemize
Nella figura di seguito vediamo un esempio di chiamata che viene schedulata
 ad un certo orario, considerando che il chiamato è occupato fino ad una
 certa ora.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 071.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsection*
I messaggi SIP
\end_layout

\begin_layout Standard
Possono essere 
\series bold
\bar under
richieste
\series default
\bar default
 o 
\series bold
\bar under
risposte
\series default
\bar default
.
 
\end_layout

\begin_layout Standard
Sono strutturati in un formato testuale ASCII simile a HTTP.
 In questo modo è più semplice analizzare il comportamento del signaling
 semplicemente osservando il contenuto dei pacchetti.
 Questo non potevamo farlo per H.323 perché il formato dei messaggi era binario.
 Lo svantaggio è che occupiamo più banda, ma essendo il signaling una operazione
 breve all'interno di uno scambio multimediale, non è un problema.
\end_layout

\begin_layout Subsubsection*
Sintassi dei messaggi:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

message = start-line
\end_layout

\begin_layout Plain Layout

          *message header
\end_layout

\begin_layout Plain Layout

          CLLF
\end_layout

\begin_layout Plain Layout

          [messsage body]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

start-line = request-line || status-line
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
La riga di richiesta (
\emph on
request-line
\emph default
) specifica il 
\series bold
tipo
\series default
 
\series bold
di richiesta
\series default
 e i suoi parametri
\end_layout

\begin_layout Itemize
La riga di stato (
\emph on
status-line
\emph default
) invece specifica il 
\series bold
tipo di risposta
\series default
 e i suoi parametri.
\end_layout

\begin_layout Itemize
Il 
\emph on
message header
\emph default
 contiene altre informazioni, come ad esempio gli identificatori del sorgente
 e destinazione.
\end_layout

\begin_layout Itemize
CL, LF sta ad indicare il solito 
\begin_inset Quotes eld
\end_inset


\series bold

\backslash
r
\backslash
n
\series default

\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
Il 
\emph on
message body
\emph default
 contiene invece informazioni tipo:
\end_layout

\begin_deeper
\begin_layout Itemize
Tipo di sessione
\end_layout

\begin_layout Itemize
Formato dei contenuti multimediali
\end_layout

\begin_layout Itemize
Altro
\end_layout

\end_deeper
\begin_layout Standard
SIP non standardizza il corpo del messaggio.
 Nel caso di informazioni sul tipo di contenuti multimediali e altro, la
 struttura del messaggio è costituita in base al 
\emph on
Session Description Protocol
\emph default
 (
\series bold
SDP
\series default
).
\end_layout

\begin_layout Standard
Il body del messaggio può anche contenere messaggi di altri sistemi di signaling
, che è utile per riuscire a realizzare l'interworking.
\end_layout

\begin_layout Itemize
Le richieste SIP iniziano con la 
\emph on
request-line
\emph default
, che consiste di alcuni token di separati da spazi:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
metodo
\end_layout

\begin_deeper
\begin_layout Itemize
Tipo di richiesta
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
uri
\series default
 della richiesta
\end_layout

\begin_deeper
\begin_layout Itemize
Indirizzo destinazione della richiesta
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Versione SIP
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

request-line = method SP Request-URI SP SIP-Version CRLF
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
(SP sta per 
\series bold
SPACE
\series default
 !)
\end_layout

\end_deeper
\begin_layout Itemize
I metodi base sono:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
INVITE
\series default
: Per stabilire una chiamata, specifica gli utenti coinvolti (possono essere
 più di uno nel caso di una teleconferenza) e il formato multimediale.
\end_layout

\begin_layout Itemize

\series bold
ACK
\series default
: I messaggi ricevuti sono solitamente confermati con un ACK che si riferisce
 esplicitamente al messaggio ricevuto.
\end_layout

\begin_layout Itemize

\series bold
BYE
\series default
: Termina una chiamata.
\end_layout

\begin_layout Itemize

\series bold
CANCEL
\series default
: Termina una transazione in corso
\end_layout

\begin_layout Itemize

\series bold
REGISTER
\series default
: Viene utilizzato per 
\begin_inset Quotes eld
\end_inset

registrare
\begin_inset Quotes erd
\end_inset

 un dispositivo presso un certo registrar proxy server
\end_layout

\begin_layout Itemize

\series bold
OPTIONS
\end_layout

\end_deeper
\begin_layout Subsection*
Esempio: un numero, device multipli
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename 077.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
In questo esempio Luca è registrato con indirizzi SIP multipli presso il
 registrar.
\end_layout

\begin_layout Itemize
Anna chiama Luca inviando un INVITE.
 Il proxy SIP inoltra il messaggio INVITE ad entrambi i dispositivi registrati
 da Luca.
 Uno dei due dispositivi accetterà la chiamata inviando OK al proxy SIP
 che lo inoltra al chiamante (Anna).
\end_layout

\begin_layout Itemize
Il proxy SIP annulla la chiamata verso l'altro dispositivo
\end_layout

\begin_layout Part*
Riferimenti
\end_layout

\begin_layout Standard
L'intero materiale qui presentato è basato su appunti e 
\emph on
slides
\emph default
 del corso 089043 
\begin_inset Quotes eld
\end_inset

Multimedia Internet
\begin_inset Quotes erd
\end_inset

 (A.A 2012/2013) tenuto presso il 
\emph on
Politecnico di Milano
\emph default
 dal prof.
 
\emph on
Paolo Giacomazzi (
\begin_inset CommandInset href
LatexCommand href
target "http://home.deib.polimi.it/giacomaz/"

\end_inset

)
\end_layout

\end_body
\end_document
