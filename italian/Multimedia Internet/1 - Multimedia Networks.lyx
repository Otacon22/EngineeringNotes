#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language italian
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 0.5cm
\topmargin 1cm
\rightmargin 0.5cm
\bottommargin 1.5cm
\headheight 1cm
\headsep 1cm
\footskip 1cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Multimedia Networks
\begin_inset Foot
status open

\begin_layout Plain Layout
Quest'opera è sotto licenza Creative Commons Attribuzione - Condividi allo
 stesso modo 2.5 Italia License.
\end_layout

\end_inset


\end_layout

\begin_layout Author
Daniele Iamartino
\end_layout

\begin_layout Date
Anno scolastico 2012/2013
\end_layout

\begin_layout Part*
Quality of service (QoS) in IP networks
\end_layout

\begin_layout Standard
Il metodo tradizionale di qualità del servizio (QoS) su internet è il 
\begin_inset Quotes eld
\end_inset


\emph on
best effort service
\emph default

\begin_inset Quotes erd
\end_inset

, cioè la rete tenta di consegnare i dati nel modo migliore possibile,
\series bold
 senza garanzie
\series default
.
\end_layout

\begin_layout Standard
Lo strato trasporto di Internet è basato su pacchetti.
 Questo significa che un contenuto è suddiviso in una serie di blocchi di
 bytes.
\end_layout

\begin_layout Standard
Il servizio 
\begin_inset Quotes eld
\end_inset

best effort
\begin_inset Quotes erd
\end_inset

 è riferito a come vengono trattati i singoli pacchetti.
\end_layout

\begin_layout Standard
Nel servizio best effort non vengono fornite garanzie su:
\end_layout

\begin_layout Itemize
Consegna con successo: il pacchetto può essere consegnato o perso
\end_layout

\begin_layout Itemize
Delay (ritardo): il pacchetto può essere trasportato correttamente ma con
 un certo delay
\end_layout

\begin_layout Itemize
Sequence (sequenza): più pacchetti possono essere consegnati in ordine diverso
 da come sono stati inviati
\end_layout

\begin_layout Standard
Ad esempio nei contratti ADSL classici abbiamo solitamente un servizio best
 effort.
\end_layout

\begin_layout Standard
A livello trasporto, TCP si occupa di risolvere i problemi citati sopra.
\end_layout

\begin_layout Subsection*
Servizi multimediali
\end_layout

\begin_layout Standard
Una volta Internet poteva basarsi completamente su servizi 
\emph on
best effort
\emph default
, però da quando le reti sono cresciute in modo esponenziale negli anni
 90', i requisiti sono cambiati.
 Ora c'è molto più bisogno di servizi multimediali.
 
\end_layout

\begin_layout Standard
Però per i servizi multimediali una qualità del servizio di tipo 
\emph on
best effort
\emph default
 può non essere sufficiente.
 Uno dei problemi principali è il 
\series bold
ritardo non controllato
\series default
 (
\series bold
ritardo variabile
\series default
).
\end_layout

\begin_layout Itemize
Cos'è un servizio multimediale?
\end_layout

\begin_deeper
\begin_layout Itemize
È un servizio che si occupa del trasporto di diversi componenti, ad esempio
 video e audio.
\end_layout

\end_deeper
\begin_layout Itemize
Ci sono problemi anche con un servizio multimediale singolo.
 Ad esempio la 
\series bold
telefonia
\series default
 è un servizio singolo, dobbiamo trasportare solo audio, comunque ci sono
 problemi analoghi ad un servizio multimediale, quindi li vedremo insieme.
\end_layout

\begin_layout Itemize
Con un trasporto 
\emph on
best effort
\emph default
 non possiamo controllare il 
\emph on
delay
\emph default
.
 Quindi per questi requisiti dobbiamo trovare una soluzione migliore della
 trasmissione 
\emph on
best effort
\emph default
.
\end_layout

\begin_layout Itemize
La qualità del servizio è qualcosa correlato allo strato rete (dal livello
 3 in giù).
\end_layout

\begin_layout Itemize
Nelle reti IP la 
\series bold
QoS
\series default
 è una misura 
\series bold
quantitativa
\series default
 di come i pacchetti sono trattati.
 
\end_layout

\begin_deeper
\begin_layout Itemize
Ad esempio la QoS possiamo esprimerla come:
\end_layout

\begin_deeper
\begin_layout Itemize
Packet loss
\end_layout

\begin_layout Itemize
Delay distribution
\end_layout

\begin_layout Itemize
Percentuale di pacchetti fuori sequenza.
 
\end_layout

\end_deeper
\begin_layout Itemize
Quindi la QoS è una misura 
\series bold
oggettiva
\series default
 di come la rete tratta i pacchetti.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
QoE
\series default
 (
\series bold
\emph on
Quality of Experience
\series default
\emph default
) invece è una misura 
\series bold
soggettiva
\series default
, dipendente da come l'utente percepisce il servizio offerto.
\end_layout

\begin_deeper
\begin_layout Itemize
Ad esempio se sentiamo una telefonata rumorosa, non sappiamo quant'è la
 perdita dei pacchetti, ma sappiamo qual'è la qualità percepita dell'utente.
\end_layout

\begin_layout Itemize
Una sfida abbastanza difficile è 
\bar under
associare QoS e QoE
\bar default
.
 È 
\series bold
difficile
\series default
 capire quali sono gli effetti sulla QoE di avere certe caratteristiche
 di QoS da noi scelte.
\end_layout

\end_deeper
\begin_layout Itemize
Abbiamo nuove architetture di rete, progettate per abilitare la previsione
 di un trasporto orientato alla qualità.
\end_layout

\begin_layout Standard
Il nostro primo obbiettivo adesso è: cos'è il QoS, com'è correlato a QoE,
 come progettiamo una rete con QoS?
\end_layout

\begin_layout Subsection*
Cos'è la QoS?
\end_layout

\begin_layout Standard
Tradizionalmente viene definita in un modo che non ha niente a che vedere
 con le nostre richieste.
\end_layout

\begin_layout Standard
Formalmente la QoS è una forma di 
\series bold
contratto
\series default
 tra un cliente e un provider.
 
\end_layout

\begin_layout Itemize
Guardiamo ad esempio quando un ISP fa un contratto con un utente business.
\end_layout

\begin_deeper
\begin_layout Itemize
Solitamente viene steso un contratto dedicato con una sezione riguardo alla
 qualità del servizio.
 Ma tradizionalmente la QoS viene espressa in questo contratto come 
\emph on

\begin_inset Quotes eld
\end_inset


\series bold
percentage availability
\series default
\emph default

\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Itemize
Ad esempio pensiamo al caso di un ISP che collega due filiali distanti di
 una banca.
 L'ISP dovrà decidere nel contratto qual'è la percentuale di disponibilità
 del collegamento tra le due filiali.
 Ad esempio 99.65% di disponibilità.
\end_layout

\begin_layout Itemize
Però questo non ha 
\bar under
niente a che vedere con ritardo, perdita di pacchetti e riordino
\bar default
!
\end_layout

\end_deeper
\begin_layout Itemize
Nel contratto di solito troviamo:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Descrizione degli elementi di rete
\series default
 a cui si applica il QoS.
\end_layout

\begin_layout Itemize
Si dà una 
\series bold
percentuale di disponibilità
\series default
 per ogni link o elemento di rete.
\end_layout

\begin_layout Itemize
Devono essere definite le 
\series bold
procedure con le quali la viene misurata la QoS
\series default
! Altrimenti se ad esempio c'è un blackout di 5 secondi sulla rete ma la
 misura viene fatta ogni 10 secondi, l'ISP dice di non aver visto nessun
 problema e che la disponibilità era sempre del 100%.
\end_layout

\begin_layout Itemize
Vengono definite delle 
\series bold
punizioni
\series default
 per le violazioni del contratto.
\end_layout

\end_deeper
\begin_layout Itemize
Abbiamo parlato di link attivi e disponibilità di essi, però i link possono
 essere attivi ma potremmo avere delle performance diverse riguardo a delay,
 perdita e sequenza.
\end_layout

\begin_layout Itemize
Per le applicazioni di tipo 
\begin_inset Quotes eld
\end_inset


\emph on
real-time application
\emph default
s
\begin_inset Quotes erd
\end_inset

, la semplice disponibilità della rete non è sufficiente.
 Bisogna misurare delay, perdita e sequenza.
\end_layout

\begin_deeper
\begin_layout Itemize
Per esempio potrebbe esserci un limite sul delay tra 
\emph on
50 e 60 ms
\emph default
 per avere telefonate VoIP fluide.
\end_layout

\begin_layout Itemize
TCP con la sua ritrasmissione non ci interessa, non vogliamo ricevere i
 pacchetti persi, non c'è tempo.
 Infatti VoIP si basa su UDP.
\end_layout

\begin_layout Itemize
Anche 
\bar under
la sequenza
\bar default
 è importante nelle telefonate, perché 
\series bold
\bar under
si trasforma in ritardo
\series default
\bar default
! Se ci arriva il pacchetto 2 prima del pacchetto 1, dobbiamo salvarlo e
 aspettare l'arrivo del pacchetto 1 prima di poterlo usare!
\end_layout

\begin_layout Itemize
Ad esempio se guardiamo un video in streaming usando TCP potremmo arrivare
 ad un delay di ~5 secondi di ritardo.
\end_layout

\begin_layout Itemize
Nella telefonia il ritardo è un requisito molto importante, però anche la
 perdita ci fa perdere dei piccoli pezzi della conversazione.
\end_layout

\end_deeper
\begin_layout Itemize
Le applicazioni dati di solito 
\bar under
non sono solo real time
\bar default
.
 Ad esempio browsing web, email, file transfer, etc...
 non sono realtime.
 Sono chiamate 
\begin_inset Quotes eld
\end_inset


\series bold
\emph on
elastic applications
\series default
\emph default

\begin_inset Quotes erd
\end_inset

, come opposte alle 
\begin_inset Quotes eld
\end_inset


\series bold
real time applications
\series default

\begin_inset Quotes erd
\end_inset

.
 Possiamo tollerare perdita dati o riordino (perché di solito si utilizza
 TCP) e delay.
\end_layout

\begin_layout Itemize
Però non vale per tutto! Ad esempio le applicazioni 
\series bold
HFT
\series default
 (
\series bold
\emph on
High Frequency Trading
\series default
\emph default
) utilizzate per operazioni azionistiche, è necessario un ritardo molto
 basso.
 Ci sono dei requisiti al di sotto del millisecondo! La soluzione che viene
 utilizzata per questo tipo di applicazioni (e anche alcune applicazioni
 bancarie che operano in borsa), è quella di mettere i server della borsa
 molto vicini ai server bancari con linee dedicate.
 (Ognuno tenta di avere il collegamento più vicino).
\end_layout

\begin_layout Standard
Noi però non lavoreremo su reti dedicate come queste, noi lavoreremo su
 reti IP, reti multi-servizio, che possono funzionare per il 99% dei requisiti
 che abbiamo (HFT a parte..).
 HFT è un problema non risolvibile con reti IP multiservizio.
\end_layout

\begin_layout Section*
QoS in IP networks
\end_layout

\begin_layout Standard
Con 
\begin_inset Quotes eld
\end_inset

IP network
\begin_inset Quotes erd
\end_inset

 intendiamo una rete multiservizio basata su IP.
 Abbiamo visto l'eccezione delle applicazioni HFT che non vengono mai unite
 a reti multiservizio ma sono invece su reti dedicate.
\end_layout

\begin_layout Standard
Abbiamo visto che le applicazioni di tipo elastico non sono influenzate
 da perdita, riordino e delay dei pacchetti.
 Però di solito queste applicazioni soffrono della eventuale mancanza di
 banda.
\end_layout

\begin_layout Standard
Di solito una sotto-categoria delle applicazioni real-time sono le 
\begin_inset Quotes eld
\end_inset


\series bold
\emph on
playback applications
\series default
\emph default

\begin_inset Quotes erd
\end_inset

.
 In queste applicazioni è necessario che alla sorgente lo 
\emph on
stream
\emph default
 di dati venga suddiviso in pacchetti che viaggiano attraverso la rete.
 Il ricevitore (il consumatore) deve poi ritrasformare il pacchetto in un
 qualche tipo di segnale.
\end_layout

\begin_layout Subsubsection*
Playback buffer
\end_layout

\begin_layout Standard
Uno dei componenti più importanti del ricevitore è il 
\series bold
\emph on
buffer di playback
\series default
\emph default
 (vedi RFC1633).
 Si tratta di un buffer dove i pacchetti vengono memorizzati prima di essere
 riprodotti, per ricostruire l'informazione originale.
 Pensiamo all'esempio classico di uno streaming video.
\end_layout

\begin_layout Standard
Il buffer di playback è solitamente caratterizzato da una caratteristica
 di profondità (
\series bold
\emph on
depth
\series default
\emph default
), solitamente espressa in secondi 
\begin_inset Formula $\left[s\right]$
\end_inset

.
\end_layout

\begin_layout Standard
Solitamente:
\end_layout

\begin_layout Itemize
Alla sorgente c'è un 
\series bold
coder
\series default
 che trasforma i dati da inviare e genera ogni 
\begin_inset Formula $T_{F}$
\end_inset

 secondi un pacchetto da inviare.
 
\end_layout

\begin_deeper
\begin_layout Itemize
In una rete 
\series bold
ideale
\series default
 i pacchetti inviati dalla sorgente arrivano nello stesso ordine, distanziati
 nello stesso modo ma tutti spostati di un ritardo costante.
 Questo non è quello che succede realmente.
 Nelle reti reali i pacchetti possono tutti arrivare con un ritardo diverso
 tra di loro.
\end_layout

\begin_layout Itemize
Solitamente c'è una componente fissa di ritardo, a cui si aggiunge un ritardo
 aggiuntivo variabile.
 
\begin_inset Formula 
\[
t=\Delta t_{0}+\Delta t
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Supponiamo di esprimere la profondità del nostro playback buffer come 
\begin_inset Formula $T$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Itemize
Al tempo 
\begin_inset Formula $t'_{0}$
\end_inset

 il playback buffer inizia a riempirsi con il primo pacchetto che arriva.
 Continuiamo a accumulare pacchetti a sufficienza per avere abbastanza dati
 da riprodurre anche se la rete è ferma.
\end_layout

\begin_layout Itemize
Diciamo che 
\begin_inset Formula $1$
\end_inset

 pacchetto inviato dalla sorgente contiene 
\begin_inset Formula $T_{F}$
\end_inset

 secondi di informazione.
\end_layout

\end_deeper
\begin_layout Itemize
Ammettiamo di voler memorizzare un certo numero di secondi di informazione,
 quanti pacchetti dobbiamo ricevere? 
\begin_inset Formula 
\[
n=\frac{T}{T_{F}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Questo buffer ci permette di risolvere il problema del delay variabile.
 Quando il buffer contiene il numero di pacchetti 
\begin_inset Formula $n$
\end_inset

 che ci interessano, avviamo la fase di playback.
 Avviando il playback iniziamo a consumare i pacchetti nel buffer e intanto
 salviamo nel buffer i pacchetti in arrivo.
\end_layout

\begin_deeper
\begin_layout Itemize
Se il coder genera 
\begin_inset Formula $\frac{1\,\text{[pacchetto]}}{T_{F}\,\text{[s]}}\;\text{pkt/s}$
\end_inset

 , dobbiamo essere in grado di ricevere i pacchetti alla stessa velocità.
 Anche se la rete rallenta per un breve momento, non cambia la percezione
 dell'utente.
\end_layout

\begin_layout Itemize
\begin_inset Formula $T$
\end_inset

, la dimensione in secondi del buffer, diventa il nostro 
\begin_inset Quotes eld
\end_inset


\emph on
playback delay
\emph default

\begin_inset Quotes erd
\end_inset

.
 È la quantità di tempo che l'utente deve attendere prima di iniziare la
 riproduzione
\end_layout

\end_deeper
\begin_layout Itemize
L'unico problema che può accadere è quando il buffer esaurisce l'ultimo
 pacchetto e non arriva in tempo un nuovo pacchetto dalla rete.
 Questo problema si chiama 
\series bold
buffer underflow
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize
Però non è che possiamo semplicemente allargare il buffer il più grande
 possibile.
 Perché se prendiamo un buffer troppo grande l'utente dovrà attendere troppo
 all'inizio.
 Se si tratta di una telefonata l'attesa è un problema e degrada sensibilmente
 la qualità della telefonata.
 C'è un trade-off in cui dobbiamo dimensionare il buffer.
\end_layout

\begin_layout Itemize
Quindi di solito un stream dati multimediali viene definito tra un 
\series bold
tradeoff tra latenza e qualità
\series default
: latency and fidelity.
 Bisogna trovare una via di mezzo, se aumento la qualità devo diminuire
 la latenza e viceversa.
\end_layout

\end_deeper
\begin_layout Subsection*
Tolleranza per le applicazioni multimediali
\end_layout

\begin_layout Standard
Dobbiamo ricordarci che i requisiti per vari tipi di dati multimediali sono
 molto diversi.
 Ad esempio i requisiti sul delay di una telefonata e di un film sono molto
 diversi! Molte delle applicazioni real-time sono anche playback applications
\end_layout

\begin_layout Standard
Dividiamo i tipi di playback applications in base alla tolleranza sul delay:
\end_layout

\begin_layout Itemize

\series bold
Tolerant applications
\series default
 (comprende telefonate e film, anche se le telefonate sono un po' meno tollerant
i).
 Questo tipo di applicazioni possono accettare un tipo di servizio
\emph on
 predictive/statistical service
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
Intolerant applications
\series default
 (c'è solo una applicazione significativa: applicazione pseudowire).
 Questo tipo di applicazioni hanno bisogno di un 
\begin_inset Quotes eld
\end_inset


\emph on
guaranteed service
\emph default

\begin_inset Quotes erd
\end_inset

, un servizio con banda e risorse allocate.
\end_layout

\begin_layout Subsection*
Allocazione delle risorse di rete 
\end_layout

\begin_layout Standard
È uno dei punti chiave che riguarda il QoS.
\end_layout

\begin_layout Standard
Si tratta principalmente della capacità di routing e switching della rete.
\end_layout

\begin_layout Standard

\series bold
Perché
\series default
 dovrei allocare risorse di traffico nella rete? Perché vogliamo QoS!
\end_layout

\begin_layout Standard
Ogni applicazione abbiamo visto che ha diversi requisiti.
 Quindi dobbiamo dare una certa quantità di risorse a ciascuna applicazione.
\end_layout

\begin_layout Standard
Abbiamo applicazioni:
\end_layout

\begin_layout Itemize
Elastiche
\end_layout

\begin_layout Itemize
Real-time
\end_layout

\begin_deeper
\begin_layout Itemize
Playback
\end_layout

\begin_deeper
\begin_layout Itemize
Tolleranti al delay
\end_layout

\begin_layout Itemize
Intolleranti al delay
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Il modo migliore per gestire questa varietà di applicazioni è l'allocazione
 di una serie di risorse.
\end_layout

\begin_layout Standard
Ci sono due modi principali per allocare risorse nella rete:
\end_layout

\begin_layout Itemize
Allocazione in 
\series bold
base al flusso
\series default
 (
\emph on
allocation on a per-flow base
\emph default
)
\end_layout

\begin_deeper
\begin_layout Itemize
Le risorse all'interno della rete di transito sono allocate per 
\bar under
un certo flusso in transito
\bar default
 tra una sorgente e una destiazione.
\end_layout

\begin_layout Itemize
Questo ha efficienza massima ma un 
\series bold
problema di scalabilità
\series default
.
 Se abbiamo a che fare con una rete molto grande, potremmo avere milioni
 di flussi contemporanei.
 E ogni singolo core-router potrebbe dover gestire uno stato per ogni singolo
 flusso.
 Diventa computazionalmente così pesante che diventa complicato fare questo
 tipo di allocazione.
\end_layout

\end_deeper
\begin_layout Itemize
Allocazione in 
\series bold
base al servizio
\series default
 (
\emph on
allocation on per-service base
\emph default
)
\end_layout

\begin_deeper
\begin_layout Itemize
Le risorse all'interno della rete di transito sono allocate per un certo
 tipo di servizio in transito.
 Non distinguo tra due telefonate, ma distinguo tra il traffico telefonico
 e il traffico video.
\end_layout

\end_deeper
\begin_layout Standard
Nella realtà si utilizzano entrambi i modi per farlo.
\end_layout

\begin_layout Standard
Con tecnologie tipo MPLS a livello carrier è possibile fare allocazione
 in base al flusso.
\end_layout

\begin_layout Standard
Però come punto d'inizio vedremo come farlo a livello di servizio.
\end_layout

\begin_layout Subsection*
Categorie di servizi
\end_layout

\begin_layout Itemize

\series bold
Telephony
\series default
 service class:
\end_layout

\begin_deeper
\begin_layout Itemize
È caratterizzata da requisiti di delay stringenti
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Multimedia 
\series default
streaming:
\end_layout

\begin_deeper
\begin_layout Itemize
È un tipo di applicazione di tipo 
\emph on
playblack tolerant
\emph default
 
\end_layout

\begin_layout Itemize
Possiamo avere requisiti di delay stringenti o no a seconda del contratto
 di chi fornisce il contenuto multimediale.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Broadcast 
\series default
video: distribuzione tv con eventi real-time
\end_layout

\begin_deeper
\begin_layout Itemize
È una applicazione 
\emph on
playback tolerant
\emph default
, ma non tanto.
 Dipende se stiamo vedendo qualcosa in diretta o no.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Multimedia conferencing
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
È quando due o più persone si collegano tramite la rete in una conferenza
 audio/video.
\end_layout

\begin_layout Itemize
Bisogna considerare il problema che ci sono delay diversi tra le varie persone
 all'interno della conferenza.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Pseudowire
\series default
 application:
\end_layout

\begin_deeper
\begin_layout Itemize
Non è un tipo di applicazione utilizzata da utenti finali.
 È un tipo di servizio utilizzato tra due operatori.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
General data 
\series default
applications:
\end_layout

\begin_deeper
\begin_layout Itemize
Email, ftp, http (browser), ...
\end_layout

\begin_layout Itemize
Non ci sono requisiti sul delay, al massimo sulla banda
\end_layout

\begin_layout Itemize
Questo è il tipo di applicazioni che accettano una qualità del servizio
 
\emph on
best-effort
\emph default
.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Low-latency data 
\series default
applications:
\end_layout

\begin_deeper
\begin_layout Itemize
Servizi per transazioni con requisiti di delay, ma non molto stringenti.
\end_layout

\begin_layout Itemize
Non elenchiamo HFT perché servono reti dedicate per quello
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
High-throughput data
\series default
 applications:
\end_layout

\begin_deeper
\begin_layout Itemize
Trasferimento di dati 
\begin_inset Quotes eld
\end_inset

bulk
\begin_inset Quotes erd
\end_inset

 (trasferimento dati di backup).
\end_layout

\begin_layout Itemize
Serve tanta banda ma non ci sono requisiti sul ritardo.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Signaling
\series default
 :
\end_layout

\begin_deeper
\begin_layout Itemize
Sono una serie di messaggi di transazione inviati dagli utenti finali con
 lo scopo di stabilire connessioni di altro tipo (ad esempio il 
\emph on
signaling
\emph default
 per stabilire una telefonata).
\end_layout

\begin_layout Itemize
Siamo molto sensibili alla perdita di pacchetti.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Network signaling
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Sono i messaggi di rete utilizzati per la manutenzione della rete.
 Ad esempio i messaggi per scambiare le informazioni di routing inviati
 dai routers.
\end_layout

\end_deeper
\begin_layout Standard
Non esiste uno standard su Internet per questo tipo di servizi.
 
\end_layout

\begin_layout Subsubsection*
Esempio di requisiti qualitativi
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Packet loss tolerance
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Delay tolerance
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Telephony
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Very low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Multimedia streaming
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low/medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Medium
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Broadcast Video
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Medium
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
High-throughput data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Medium/High
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Multimedia conference
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Very low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Network control
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Best effort
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Any
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Any
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Itemize
Non sappiamo a priori l'effetto della matrice di rete di QoS e la matrice
 utente di QoE.
\end_layout

\begin_layout Itemize
Non c'è un algoritmo generale che mappa la matrice di QoS nella matrice
 di QoE.
\end_layout

\begin_deeper
\begin_layout Itemize
In realtà esiste un algoritmo ma solo per il servizio VoIP.
\end_layout

\end_deeper
\begin_layout Itemize
Riguardo alla variazione del delay dobbiamo considerare il 
\series bold
\emph on
jitter
\series default
\emph default
.
\end_layout

\begin_deeper
\begin_layout Itemize
Solitamente guardiamo la distribuzione casuale del ritardo e calcoliamo
 il jitter come l'intervallo di variazione del ritardo.
\end_layout

\begin_layout Itemize
Il jitter è molto importante per applicazioni real-time e per tutte le applicazi
oni che utilizzano un buffer di playout.
\end_layout

\begin_layout Itemize
Il jitter non è causato solo dal ritardo, ma anche dai pacchetti fuori sequenza!
\end_layout

\begin_deeper
\begin_layout Itemize
Perché abbiamo pacchetti fuori sequenza? È una caratteristica classica dei
 servizi best effort.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Pensiamo ad esempio ad una rete dove abbiamo un servizio di rete garantito
 e un servizio best effort.
 Utilizzano quindi le stesse risorse e collegamenti ma sono trattate diversament
e.
 Solitamente abbiamo un percorso fisso per il servizio garantito.
 
\end_layout

\begin_layout Standard
I router implementano una funzionalità di 
\series bold
\emph on
load sharing
\series default
\emph default
, cioè tentano di riempire di traffico tutti i link.
 Quindi accade spesso che alcuni pacchetti seguono percorsi diversi (a seconda
 di quanto è congestionato il percorso principale).
\end_layout

\begin_layout Standard
Per applicazioni real time esiste già RTP che ha già la funzionalità di
 ricostruire i pacchetti in sequenza senza utilizzare TCP.
\end_layout

\begin_layout Subsection*
Infinite bandwidth paradigm
\end_layout

\begin_layout Standard
È un'idea che alcune persone supportano.
 Posto che le fibre hanno tanta banda (in aumento), si può continuare ad
 utilizzare un servizio best-effort.
 Tanto c'è la banda.
\end_layout

\begin_layout Standard
Uno dei problemi però è il costo.
 La fibra ha tanta banda ma costa! Non ovunque abbiamo la fibra e la banda
 ultralarga.
 Oltre alla fibra dobbiamo pagare anche per le interfacce, switches e routers.
\end_layout

\begin_layout Standard
Quello che succede nella pratica è invece che con le nuove reti si applica
 QoS.
\end_layout

\begin_layout Subsection*
Utenti business nelle reti multiservizio
\end_layout

\begin_layout Standard
Immaginiamo un utente business interessato ad una rete multiservizio.
\end_layout

\begin_layout Standard
Un ISP può servire all'utente un 
\series bold
Olympic service:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SLA (
\series bold
QoS
\series default
)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Velocità di accesso 2.048 Mbps
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Velocità di accesso 4 Mbps
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Gold
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $d=90\, ms,\quad p=0.001$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $d=80\, ms,\quad p=0.001$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Silver
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $d=120\, ms,\quad p=0.001$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $d=100\, ms,\quad p=0.001$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Bronze
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $d=250\, ms,\quad p=0.001$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $d=210\, ms,\quad p=0.001$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
...
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
Dove 
\begin_inset Formula $d=\text{delay massimo}$
\end_inset

 e 
\begin_inset Formula $p=\text{frazione dei pacchetti che possono superare il ritardo massimo}$
\end_inset


\end_layout

\begin_layout Standard
(Questo è un linguaggio utilizzato anche nei contratti)
\end_layout

\begin_layout Standard
Abbiamo visto uno 
\series bold
SLA
\series default
 (
\emph on
Statistical Service Level Agreement
\emph default
) definito come: 
\begin_inset Formula 
\[
P\left(D>d\right)<p
\]

\end_inset

 dove 
\begin_inset Formula $D$
\end_inset

 è il ritardo reale del pacchetto e 
\begin_inset Formula $P$
\end_inset

 è la densità di probabilità in funziona del ritardo del pacchetto.
 
\begin_inset Formula $p$
\end_inset

 è la frazione di pacchetti a cui è permesso superare la soglia 
\begin_inset Formula $d$
\end_inset

 di ritardo massimo.
\end_layout

\begin_layout Standard
Notiamo che in questo caso anche il servizio 
\emph on
best effort 
\emph default
viene offerto.
 Ma appunto per la sua natura viene fornito senza SLA.
\end_layout

\begin_layout Subsection*
SLA basato su un ritardo statistico
\end_layout

\begin_layout Standard
Un ritardo statico è basato su una funzione di probabilità 
\begin_inset Formula $f\left(D\right)$
\end_inset

 che indica la probabilità di un certo ritardo per un pacchetto.
\end_layout

\begin_layout Standard
Data questa distribuzione, la probabilità di superare una soglia di ritardo
 
\begin_inset Formula $d$
\end_inset

 è l'area sottesa dalla curva 
\begin_inset Formula $f\left(D\right)$
\end_inset

 da 
\begin_inset Formula $d$
\end_inset

 a infinito:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P\left(D>d\right)=\int_{d}^{\infty}f\left(D\right)\, dD
\]

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-001.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Quindi gli SLA basati su delay statistici sono basati sul concetto di 
\series bold
\emph on
delay tail
\series default
\emph default
, la cui area non deve superare un certo valore.
\end_layout

\begin_layout Standard
Un SLA delay-statistico può essere indicato in notazione ristretta con 
\begin_inset Formula $\left(d,p\right)$
\end_inset

, dove:
\end_layout

\begin_layout Itemize
\begin_inset Formula $d=$
\end_inset

soglia di ritardo massimo
\end_layout

\begin_layout Itemize
\begin_inset Formula $p=$
\end_inset

area della coda
\end_layout

\begin_layout Subsubsection*
Implementazione di una SLA a ritardo statistico
\end_layout

\begin_layout Standard
Può essere implementata come segue:
\end_layout

\begin_layout Itemize
La SLA 
\begin_inset Formula $\left(d,p\right)$
\end_inset

 viene definita
\end_layout

\begin_layout Itemize
La SLA viene misurata sul sistema (per esempio il numero di pacchetti che
 superano la soglia di ritardo viene conteggiato a intervalli di tempo preassegn
ati)
\end_layout

\begin_layout Itemize
Il cliente può verificare se ha ricevuto la SLA corretta
\end_layout

\begin_layout Standard
Nella vita reale non è facile raggiungere un accordo su come la SLA viene
 misurata.
\end_layout

\begin_layout Subsubsection*
Il modo 
\bar under
sbagliato
\bar default
 di definire la misurazione della SLA
\end_layout

\begin_layout Standard
Il provider TELCO propone al suo cliente ACME il metodo seguente per misurare
 la SLA:
\end_layout

\begin_layout Itemize
Data una SLA 
\begin_inset Formula $\left(d,p\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Periodicamente, ogni 
\begin_inset Formula $\Delta t$
\end_inset

 secondi, viene inviato un pacchetto di ping 
\emph on
end-to-end
\end_layout

\begin_layout Itemize
Definiamo 
\begin_inset Formula $D_{i}$
\end_inset

 il ritardo dell'
\emph on
i-esimo 
\emph default
ping inviato
\end_layout

\begin_layout Itemize
In un periodo di tempo 
\begin_inset Formula $T>\Delta t$
\end_inset

 abbiamo che 
\begin_inset Formula $\frac{T}{\Delta t}=N$
\end_inset

 pacchetti vengono inviati e il loro ritardo è calcolato.
\end_layout

\begin_layout Itemize
La seguente formula per calcolare il ritardo viene proposta:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Delay=\frac{1}{N}\sum_{i=1}^{N}D_{i}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Se 
\begin_inset Formula $Delay>d$
\end_inset

 allora la SLA è stata violata
\end_layout

\begin_layout Standard
C'è qualcosa che 
\series bold
non va
\series default
 in questo metodo?
\end_layout

\begin_layout Standard
Sì! Perché 
\begin_inset Formula $Delay$
\end_inset

 è in realtà il valore 
\series bold
medio
\series default
 del ritardo punto punto!
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-002.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
È praticamente impossibile che il valore medio sia superiore della soglia
 
\begin_inset Formula $d$
\end_inset

, se 
\begin_inset Formula $d$
\end_inset

 è superiore al valore medio della distribuzione del ritardo!
\end_layout

\begin_layout Standard
In questo modo, il risultato della misurazione è che la SLA viene sempre
 rispettata al 100%, anche per i pacchetti che superano la soglia 
\begin_inset Formula $d$
\end_inset

.
\end_layout

\begin_layout Standard
Notiamo tra l'altro che il parametro 
\begin_inset Formula $p$
\end_inset

 non viene menzionato nel metodo proposto.
\end_layout

\begin_layout Standard
Il cliente ACME si lamenta con TELCO riguardo a questo metodo per misurare
 la SLA e viene elaborata un'altra proposta:
\end_layout

\begin_layout Itemize
Il sistema precedente viene mantenuto
\end_layout

\begin_layout Itemize
Il 10% dei ritardi più elevati viene tolto
\end_layout

\begin_layout Itemize
Se la misura di ritardo 
\begin_inset Formula $D_{i}$
\end_inset

 viene fatta quando un router è congestionato, la misura viene cancellata.
\end_layout

\begin_layout Standard
Chiaramente anche questo sistema fallisce miseramente.
 Infatti un alto ritardo è necessariamente conseguenza di un link o un router
 congestionato, mentre con questa procedura i ritardi vengono tolti.
\end_layout

\begin_layout Subsubsection*
Un metodo funzionante per misurare la SLA
\end_layout

\begin_layout Standard
Data una SLA 
\begin_inset Formula $\left(d,p\right)$
\end_inset

:
\end_layout

\begin_layout Itemize
Periodicamente, ogni 
\begin_inset Formula $\Delta t$
\end_inset

 secondi viene inviato un pacchetto 
\emph on
end-to-end
\emph default
 per misurare il ritardo.
\end_layout

\begin_layout Itemize
Definiamo 
\begin_inset Formula $D_{i}$
\end_inset

 come il ritardo dell'
\emph on
i-esimo
\emph default
 pacchetto di ping
\end_layout

\begin_layout Itemize
In un periodo di tempo 
\begin_inset Formula $T>\Delta t$
\end_inset

 abbiamo 
\begin_inset Formula $\frac{T}{\Delta t}=N$
\end_inset

 pacchetti di ping inviati e il delay misurato
\end_layout

\begin_layout Itemize
Diciamo 
\begin_inset Formula $N_{1}$
\end_inset

 il numero di pacchetti che superano la soglia di ritardo 
\begin_inset Formula $d$
\end_inset


\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $\frac{N_{1}}{N}>p$
\end_inset

 , allora la SLA è stata violata
\end_layout

\begin_layout Standard
L'esperienza insegna che garantire una SLA statistica 
\emph on
end-to-end
\emph default
 non è facile.
 Quindi i service providers potrebbero cercare della protezione con delle
 clausole nel contratto.
\end_layout

\begin_layout Standard
Il modo giusto di fare QoS è quello di suddividere la banda per servizi
 per assegnare una certa quantità di risorse ad ogni servizio.
\end_layout

\begin_layout Section*
Come creare una rete multiservizio
\end_layout

\begin_layout Standard
Per cominciare ci serve un 
\series bold
SLA 
\series default
(
\emph on
Service Level Agreement
\emph default
) ed un 
\series bold
TCA
\series default
 (
\emph on
Traffic Conditioning Agreement
\emph default
).
\end_layout

\begin_layout Itemize
Un 
\series bold
TCA
\series default
 è il contratto su quello che l'utente invia nella rete.
 Sopra una certa soglia di traffico emesso l'ISP non può garantire niente
 all'utente.
\end_layout

\begin_deeper
\begin_layout Itemize
Il 
\series bold
TCA
\series default
 definisce il cosidetto 
\begin_inset Quotes eld
\end_inset


\series bold
\emph on
traffic profile
\series default
\emph default

\begin_inset Quotes erd
\end_inset

 (profilo di traffico).
 È un qualche tipo di limite superiore.
\end_layout

\begin_layout Itemize
Questo 
\series bold
TCA
\series default
 può essere definito in 
\emph on
conformant traffic 
\emph default
(anche detto 
\emph on

\begin_inset Quotes eld
\end_inset


\series bold
in-profile traffic
\series default

\begin_inset Quotes erd
\end_inset

 
\emph default
o 
\emph on

\begin_inset Quotes eld
\end_inset

in-traffic
\begin_inset Quotes erd
\end_inset


\emph default
) e 
\emph on
non-conformant traffic
\emph default
 (quello sopra la soglia, detto anche 
\emph on

\begin_inset Quotes eld
\end_inset

dropped
\begin_inset Quotes erd
\end_inset


\emph default
 o 
\emph on

\begin_inset Quotes eld
\end_inset


\series bold
out-of-profile traffic
\series default
\emph default

\begin_inset Quotes erd
\end_inset


\emph on
 
\emph default
o 
\emph on

\begin_inset Quotes eld
\end_inset

out-traffic
\emph default

\begin_inset Quotes erd
\end_inset

).
 La 
\series bold
SLA
\series default
 è applicata al 
\emph on
conformant traffic
\emph default
.
\end_layout

\end_deeper
\begin_layout Standard
Ci sono tre modi diversi con cui un ISP può controllare il TCA:
\end_layout

\begin_layout Itemize

\series bold
Policing
\end_layout

\begin_deeper
\begin_layout Itemize
Si droppano pacchetti.
 Solitamente si preferisce evitare perché tutti i dati trasportati sono
 un guadagno per l'ISP.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Shaping
\end_layout

\begin_deeper
\begin_layout Itemize
Il traffico in uscita viene ritardato fino a quando non è possibile trasmetterlo
 in accordo con la TCA.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Marking
\series default
 (spesso il più utilizzato)
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Dropping priority marking
\series default
: Si marcano i pacchetti da droppare, in caso di congestione vengono droppati.
\end_layout

\begin_layout Itemize

\series bold
Service marking
\series default
: Si marcano i pacchetti di trasporare in best effort, quelli da traspostare
 con una certa QoS, etc...
\end_layout

\end_deeper
\begin_layout Standard
Il motivo di questa strategia è che il provider, per garantire la SLA, deve
 riservare un certo numero di risorse.
 Il numero di risorse disponibili dipende sia dall'SLA che dal TCA.
 Le risorse sono allocare per il traffico in profilo.
 Una volta che le risorse sono state allocate, accettare il traffico fuori
 profilo è un pericolo perché rischia di non far rispettare la SLA.
 
\end_layout

\begin_layout Standard
La politica adottata più spesso è quella di accettare il traffico fuori
 profilo e marcalo.
 Se ci si accorge che sta degradando la SLA, viene droppato o trasportato
 con bassa priorità.
 In questo modo l'ISP riesce a guadagnare di più, infatti molto spesso il
 pagamento è per traffico, quindi l'ISP ha interesse a trasportare anche
 il traffico fuori profilo.
\end_layout

\begin_layout Subsection*
Come si definisce un TCA
\end_layout

\begin_layout Standard
Un TCA può contenere una serie di parametri per caratterizzare il traffico
 in profilo o fuori profilo.
 Ad esempio:
\end_layout

\begin_layout Itemize
Il valore di 
\series bold
picco
\series default
 del traffico.
 (Ad esempio 
\begin_inset Formula $P=2\, Mbps$
\end_inset

)
\end_layout

\begin_layout Itemize
Il valore 
\series bold
medio
\series default
 del traffico.
 (Ad esempio 
\begin_inset Formula $A=200\, Kbps$
\end_inset

)
\end_layout

\begin_layout Itemize
Massima lunghezza del 
\series bold
\emph on
burst
\series default
\emph default
 di dati (Numero massimo di pacchetti consecutivi trasmessi alla velocità
 di picco)
\end_layout

\begin_layout Itemize

\series bold
Lunghezza
\series default
 massima e minima dei 
\series bold
pacchetti
\end_layout

\begin_layout Standard
Pensiamo ad una telefonata con la soppressione dei silenzi.
 La differenza tra banda di picco e banda media è ben diversa.
\end_layout

\begin_layout Subsection*
Accesso alla rete
\end_layout

\begin_layout Standard
Subito dopo l'accesso alla rete per l'utente c'è il 
\series bold
\emph on
traffic regulator
\series default
\emph default
 dell'ISP, che verifica se il profilo di traffico viene rispettato.
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-003.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
Il regolatore verifica il traffico e lo divide in traffico:
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
\emph on
green
\series default
\emph default
: IN-traffic, il traffico che è in profilo
\end_layout

\begin_layout Itemize

\series bold
\emph on
red
\series default
\emph default
: OUT-traffic, il traffico fuori profilo
\end_layout

\begin_layout Itemize
Questo tipo di regolatori è chiamato 
\series bold
\emph on
two-color regulator
\end_layout

\end_deeper
\begin_layout Itemize
Alcuni regolatori invece suddividono il traffico in: 
\emph on
green, yellow, red.
 
\emph default
In questo caso parliamo di 
\series bold
\emph on
three-color regulator
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Se il traffico 
\emph on
red
\emph default
 viene droppato, abbiamo un 
\series bold
\emph on
policer
\series default
\emph default
:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-004.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Solo il traffico 
\emph on
green
\emph default
 procede, tutto il traffico 
\emph on
red
\emph default
 viene droppato.
\end_layout

\begin_layout Itemize
In questo modo i flussi di traffico già stabiliti sono sempre protetti dal
 traffico eccessivo generato da altri utenti.
\end_layout

\begin_layout Itemize
Però usando questo metodo, anche quando la rete ha risorse libere, queste
 non vengono sfruttate e si droppa comunque.
\end_layout

\end_deeper
\begin_layout Itemize
Se il traffico 
\emph on
red
\emph default
 viene rallentato tramite un buffer e poi inviato comunque, abbiamo un 
\series bold
\emph on
shaper
\series default
\emph default
:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-005.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Il traffico viene allocato all'interno di un buffer e trasmesso quando non
 viola il TCA.
 Quindi il traffico che viene immesso nella rete è sempre 
\emph on
green
\emph default
.
\end_layout

\begin_layout Itemize
Anche in questo caso, i flussi già stabiliti sono protetti da eccessi di
 traffico da parte di altri utenti.
\end_layout

\begin_layout Itemize
Anche in questo caso se ci sono risorse libere nella rete, non vengono sfruttate
 perchè si fa comunque shaping.
 Comunque questo metodo resta più efficiente di un 
\emph on
policer
\emph default
.
\end_layout

\begin_layout Itemize
Un problema è che la coda del buffer può allungarsi troppo e con essa anche
 i tempi di ritardo medio dei pacchetti.
\end_layout

\end_deeper
\begin_layout Itemize
Se il traffico 
\emph on
red
\emph default
 viene rimandato in rete dopo essere marcato, abbiamo un 
\series bold
\emph on
marker
\series default
\emph default
:
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-006.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Il traffico viene lasciato proseguire, ma viene marcato come 
\emph on
red
\emph default
.
 Il marking viene fatto con lo scopo di aumentare la proprità di dropping
 di un certo pacchetto rispetto ad altri.
 In alternativa al drop, il pacchetto può essere inviato su una classe di
 servizio diversa, tipo 
\emph on
best effort
\emph default
.
\end_layout

\begin_layout Itemize
Se la rete ha risorse libere, in questo caso vengono utilizzate in modo
 più efficiente.
\end_layout

\begin_layout Itemize
Tuttavia, il problema della gestione della congestione è importante.
\end_layout

\end_deeper
\begin_layout Subsection*
Traffic conditioner
\end_layout

\begin_layout Standard
Cos'è il 
\series bold
\emph on
classifier
\series default
\emph default
 o 
\series bold
\emph on
traffic conditioner
\series default
\emph default
 ? È un elemento di rete, lato ISP, che riceve il traffico da diversi utenti
 e deve occuparsi del controllo del traffico lato ISP.
\end_layout

\begin_layout Standard
Deve occuparsi si capire 
\series bold
quale TCA deve essere associata a ciascun utente
\series default
.
\end_layout

\begin_layout Standard
Al suo interno troviamo: 
\emph on
meter, marker, shaper
\emph default
 e 
\emph on
dropper
\emph default
.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-007.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
All'interno di questo dispositivo abbiamo anche il 
\series bold
\emph on
meter
\series default
\emph default
, che riceve un segnale dal TCA e guarda i pacchetti in transito, il momento
 di arrivo, la TCA da applicare e decide il colore da applicare (
\emph on
red, green, yellow
\emph default
).
 Il pacchetto può essere 
\emph on
in-profile
\emph default
 o 
\emph on
out-of-profile
\emph default
.
\end_layout

\begin_layout Itemize
Questa informazione viene comunicata ad un 
\series bold
\emph on
actuator 
\series default
\emph default
che colora il pacchetto.
\end_layout

\begin_layout Itemize
Nel grafico in figura le linee nere rappresentano il flusso dei pacchetti,
 mentre le linee rosse rappresentano il flusso di controllo.
\end_layout

\begin_layout Itemize
Qual'è il campo del pacchetto IPv4 utilizzato per trasportare queste informazion
i di marking? È il 
\emph on
differentiated services codepoint
\emph default
 (
\series bold
\emph on
DSCP
\series default
\emph default
).
 È 1 byte dell'header dell pacchetto IPv4.
 Ha preso il posto del vecchio 
\emph on
Type of Service
\emph default
.
\end_layout

\begin_layout Itemize
Il DSCP definisce il 
\series bold
PHB 
\series default
(
\emph on
Per-Hop-Behaviour
\emph default
), la politica adottata dai routers lungo il percorso.
 Il marker sceglierà il valore da impostare come PHB a seconda di quello
 che gli comunica il meter.
\end_layout

\begin_layout Itemize
In alternativa può essere utilizzato lo shaper.
 Ricordiamoci che lo shaper ha una coda finita, quando si riempie inizia
 a droppare pacchetti.
\end_layout

\begin_layout Itemize
Il dropper invece droppa semplicemente.
 Può essere implementato come uno shaper con coda a pochi o zero pacchetti.
\end_layout

\begin_layout Subsection*
Riassunto 
\end_layout

\begin_layout Itemize
ISP e utente devono accordarsi su SLA e TCA
\end_layout

\begin_layout Itemize
L'ISP può allocare risorse sulla rete per garantire questo servizio.
\end_layout

\begin_layout Itemize
In accesso alla rete, l'utente vede un regolatore di traffico
\end_layout

\begin_layout Itemize
In mezzo alla rete ci sono dei routers (che verificano il campo DSCP per
 pacchetti e determinano il PHB).
\end_layout

\begin_deeper
\begin_layout Itemize
Ma chi scrive il DSCP dentro i pacchetto? Il classificatore.
\end_layout

\begin_layout Itemize
Il PHB viene definito in base a SLA e TCA, ma anche in base a quanto traffico
 l'utente sta immettendo in rete
\end_layout

\begin_deeper
\begin_layout Itemize
Questo viene verificato tramite il 
\begin_inset Quotes eld
\end_inset

colore
\begin_inset Quotes erd
\end_inset

 applicato dal classifier 
\end_layout

\begin_layout Itemize
Ad esempio un
\series bold
\emph on
 Assured Forwarding PHB
\series default
\emph default
 è un tipo di comportamento di PHB.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Perché non facciamo classificazione su routers del backbone? Sui routers
 passano milioni di connessioni al secondo, non c'è tempo per fare questo
 tipo di confronti, quindi si fa sui routers di frontiera.
\end_layout

\begin_layout Standard
Come è possibile per l'ISP assicurarsi di garantire la SLA sapendo del traffico
 condiviso sulle interfacce dei routers? Risponderemo a questa domanda alla
 fine del corso.
\end_layout

\begin_layout Subsection*
Connection admission control
\end_layout

\begin_layout Standard
Abbiamo diverse scale temporali:
\end_layout

\begin_layout Itemize

\series bold
Contract timescale
\series default
 (~mese)
\end_layout

\begin_layout Itemize

\series bold
Connection timescale 
\series default
(~min/~ore)
\end_layout

\begin_layout Itemize

\series bold
Packet timescale 
\series default
(~microsecondi)
\end_layout

\begin_layout Standard
Ora lavoriamo sulla 
\emph on
connection timescale
\emph default
.
\end_layout

\begin_layout Standard
Quando arriva una nuova connessione si verifica se TCA o SLA va applicato.
\end_layout

\begin_layout Standard
Si verifica se ci sono abbastanza risorse e si abilita la connessione solo
 se viene verificato che l'accettazione della connessione non va contro
 la SLA applicata alle connessioni esistenti.
\end_layout

\begin_layout Standard
Il problema è riuscire a stabilire la regione di accettazione.
 Infatti essa dipende dalla distribuzione statistica del traffico, dalla
 capacità del link, dalla SLA e dalla politica di scheduling.
\end_layout

\begin_layout Standard
La difficoltà aumenta ancora quando si considerano dei percorsi con più
 
\emph on
hops
\emph default
 intermedi.
\end_layout

\begin_layout Standard
Vedremo che con recenti metodi di calcolo statistico di rete, questo problema
 può essere risolto in modo relativamente semplice.
\end_layout

\begin_layout Subsection*

\emph on
Token Bucket
\emph default
 
\emph on
Policer 
\emph default
(versione 
\emph on
token bucket
\emph default
)
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-008.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Il 
\series bold
\emph on
policer
\series default
\emph default
 può essere costituito in questo modo: 
\end_layout

\begin_layout Itemize
Abbiamo uno stream di pacchetti in ingresso 
\begin_inset Formula $x\left(t\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
C'è un bucket che svolge il ruolo di contatore di crediti (tokens)
\end_layout

\begin_deeper
\begin_layout Itemize
Il bucket ha due parametri:
\end_layout

\begin_deeper
\begin_layout Itemize
La sua 
\series bold
profondità
\series default
 
\begin_inset Formula $b$
\end_inset

 (
\emph on
token bucket size
\emph default
)
\end_layout

\begin_layout Itemize
Il 
\series bold
rate di riempimento
\series default
 
\begin_inset Formula $r$
\end_inset

.
 
\end_layout

\end_deeper
\begin_layout Itemize
Il bucket non è un buffer, non memorizza pacchetti in questo caso, è un
 numero intero!
\end_layout

\begin_layout Itemize
La misura 
\begin_inset Formula $b$
\end_inset

 del buffer può essere in bit o byte.
\end_layout

\begin_layout Itemize
Il contatore viene incrementato ogni 
\begin_inset Formula $\frac{1}{r}$
\end_inset

 secondi, dove 
\begin_inset Formula $r$
\end_inset

 è il rate.
\end_layout

\end_deeper
\begin_layout Itemize
Un pacchetto può attraversare il 
\emph on
policer
\emph default
 se il contatore è positivo.
 Dopo il passaggio il contatore viene decrementato.
\end_layout

\begin_layout Itemize
Se il contatore è a 0, il pacchetto viene droppato.
\end_layout

\begin_layout Itemize
Quindi 
\begin_inset Formula $\text{1 credito}=\text{permesso per trasmettere }1\:\text{pacchetto}$
\end_inset

 (
\begin_inset Formula $r\,\left[\frac{packets}{s}\right]$
\end_inset

)
\end_layout

\begin_layout Itemize
Possiamo rappresentare questa 
\emph on
policy
\emph default
 utilizzando un linguaggio di descrizione delle specifiche come 
\series bold
\emph on
SDL
\series default
\emph default
.
\end_layout

\begin_deeper
\begin_layout Itemize
[immagine mancante]
\end_layout

\end_deeper
\begin_layout Subsection*

\emph on
Shaper 
\emph default
(versione 
\emph on
token bucket
\emph default
)
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-009.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Abbiamo ancora un 
\emph on
bucket
\emph default
, riempito con 
\begin_inset Formula $r$
\end_inset

 token al secondo.
 Il suo valore massimo è 
\begin_inset Formula $b$
\end_inset

.
 Prima abbiamo in testa un buffer largo 
\begin_inset Formula $P\left(t\right)$
\end_inset

.
 Il traffico entra nel buffer, il contatore funziona esattamente come nel
 policer.
 Incrementiamo il contatore ogni 
\begin_inset Formula $\frac{1}{r}$
\end_inset

 secondi.
\end_layout

\begin_layout Standard
Il rate massimo di pacchetti può servire il sistema è 
\begin_inset Formula $r\;\left[\frac{packets}{s}\right]$
\end_inset

 
\end_layout

\begin_layout Standard
Arriva un pacchetto:
\end_layout

\begin_layout Itemize
Il buffer può essere vuoto
\end_layout

\begin_deeper
\begin_layout Itemize
Il sistema verifica il numero di crediti nel 
\emph on
counter
\emph default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Se ho 0 crediti il pacchetto viene accodato nel buffer.
\end_layout

\begin_layout Itemize
Se ho 1 o più crediti, il pacchetto attraversa il sistema e il 
\emph on
counter
\emph default
 viene decrementato di 1.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Il buffer può contenere già pacchetti
\end_layout

\begin_deeper
\begin_layout Itemize
Il pacchetto viene accodato sulla coda del buffer.
\end_layout

\begin_layout Itemize
Il pacchetto in cima al buffer attraversa il sistema se ho 1 o più crediti.
 Il counter viene decrementato di 1.
\end_layout

\begin_layout Itemize
Fino a quando ci sono crediti nel contatore possiamo trasmettere, quindi
 ci possono essere dei 
\emph on
burst.
 
\emph default
In particolare il 
\emph on
burst
\emph default
 è controllato dal parametro 
\begin_inset Formula $b$
\end_inset

 del sistema.
\end_layout

\end_deeper
\begin_layout Standard
Se il rate di pacchetti in ingresso è maggiore di 
\begin_inset Formula $r$
\end_inset

 , i pacchetti in arrivo si accodano in contuazione fino ad esaurire il
 buffer.
 Si parla di operazione 
\emph on
non stabile
\emph default
.
\end_layout

\begin_layout Standard
La capacità del buffer però non è infinita, se arrivano troppi pacchetti
 si droppano.
\end_layout

\begin_layout Subsection*
Constraint functions
\end_layout

\begin_layout Standard
Sia il 
\emph on
policer
\emph default
 che lo 
\emph on
shaper
\emph default
 implementano delle 
\emph on
constraint functions
\emph default
 di tipo 
\begin_inset Formula 
\[
CT\left(t\right)=b+rt
\]

\end_inset


\end_layout

\begin_layout Standard
Dove 
\begin_inset Formula $CT\left(t\right)$
\end_inset

 significa 
\begin_inset Quotes eld
\end_inset


\emph on
il traffico cumulativo in funzione del tempo
\emph default

\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-010.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
All'intervallo di durata 
\begin_inset Formula $t$
\end_inset

, il massimo traffico che lascia passare il regolatore è 
\begin_inset Formula $b+rt$
\end_inset

 , il traffico che eccede è il traffico fuori profilo.
\end_layout

\begin_layout Standard
Il traffico fuori profilo viene trattato in modo diverso a seconda che abbiamo
 un policer o shaper.
\end_layout

\begin_layout Standard
Le caratteristiche di un policer/shaper sono:
\end_layout

\begin_layout Itemize
Valore di picco
\end_layout

\begin_layout Itemize
Massima lunghezza del burst
\end_layout

\begin_layout Itemize
Velocità media
\end_layout

\begin_layout Standard
Vediamo alcune caratteristiche di policer e shaper rispetto al traffico:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Token Bucket policers
\end_layout

\begin_deeper
\begin_layout Itemize
Droppa il traffico fuori profilo.
 In questo modo solo il traffico in profilo entra nella rete.
\end_layout

\begin_layout Itemize
Nella figura seguente è mostrato il traffico cumulativo in ingresso alla
 rete, che per rispettare i vincoli dovrebbe essere lineare.
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-011.png
	scale 50

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Il traffico profilato in blu nella figura è il traffico che esce effettivamente
 dal policer.
 È un 
\emph on
linearly bounded arrival process
\emph default
 (LBAP)
\end_layout

\begin_layout Itemize
Un 
\emph on
token bucket policer 
\emph default
ci assicura che il traffico offerto alla rete è 
\emph on
linearly bounded
\emph default
.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
\emph on
Token Bucket shapers
\end_layout

\begin_deeper
\begin_layout Itemize
Il traffico di uscita è rallentato e trasmesso quando è possibile soddisfare
 il limite LBAP.
 Si elimina la perdita di pacchetti ma si aumenta il delay
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-012.png
	scale 50

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\series bold
\emph on
Token Bucket Marker
\end_layout

\begin_deeper
\begin_layout Itemize
Funziona esattamente come il policer, con la differenza che al posto di
 droppare il traffico, lo marca e lo inoltra nella rete.
 Nel momento di congestione, i pacchetti marcati vengono droppati.
\end_layout

\begin_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-010.png
	scale 50

\end_inset


\end_layout

\end_deeper
\end_deeper
\begin_layout Subsection*
Single Rate Three-Color marker (srTCM)
\end_layout

\begin_layout Standard
Può essere utilizzato come componente in un Diffserv 
\emph on
traffic conditioner
\emph default
.
\end_layout

\begin_layout Standard
L'srTCM si occupa di misurare il traffico e marcare i pacchetti in base
 a tre parametri di traffico:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Committed Information Rate
\series default
\emph default
 (CIR): traffico 
\series bold
green 
\series default
(È il traffico che non supera la CBS)
\end_layout

\begin_layout Itemize

\series bold
\emph on
Committed Burst Size
\series default
\emph default
 (CBS): traffico 
\series bold
yellow 
\series default
(È il traffico che supera la CBS ma non la EBS)
\end_layout

\begin_layout Itemize

\series bold
\emph on
Excess burst size
\series default
\emph default
 (EBS): traffico 
\series bold
red 
\series default
(Tutto il resto del traffico)
\end_layout

\begin_layout Standard
Il 
\emph on
meter
\emph default
 può operare in due modalità:
\end_layout

\begin_layout Itemize

\series bold
Color-blind mode
\series default
: Il 
\emph on
meter
\emph default
 assume che lo stream di pacchetti in ingresso non è colorato.
\end_layout

\begin_layout Itemize

\series bold
Color-aware mode
\series default
: Il 
\emph on
meter
\emph default
 assume che qualche entità precedente abbia già pre-colorato i pacchetti
 in ingresso, di modo che siano green,yellow o red.
\end_layout

\begin_deeper
\begin_layout Itemize
In questo caso il marker 
\series bold
ri-colora
\series default
 i pacchetti in base al risultato del 
\emph on
meter
\emph default
.
\end_layout

\begin_layout Itemize
Il colore viene encodato all'interno del campo 
\series bold
DS
\series default
 dell'header IP, in modalità PHB (
\emph on
Per-Hop Behaviour
\emph default
).
\end_layout

\end_deeper
\begin_layout Itemize
Quando viene modificato il campo DS dell'header IP significa che utilizzando
 una politica PHB, il traffico green, yellow o red viene trattato in modo
 diverso all'interno della rete.
\end_layout

\begin_layout Itemize
Il modo specifico in cui il pacchetto viene trattato all'interno della rete
 verrà descritto nel seguito.
\end_layout

\begin_layout Standard
Alcune note sul 
\emph on
meter
\emph default
:
\end_layout

\begin_layout Itemize
Il CIR viene misurato in 
\series bold
bytes del pacchetto IP per secondo
\series default
, header compreso ma escludendo headers datalink.
\end_layout

\begin_layout Itemize
CBS e EBS sono misurati in bytes e devono essere configurati in modo che
 almeno uno di essi sia maggiore di 0.
 È inoltre raccomandato che uno dei due valori sia maggiore o uguale alla
 dimensione massima di un pacchetto IP di uno stream.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-013.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
L'srTCM è composto da due buffer 
\series bold
C
\series default
 ed 
\series bold
E
\series default
, che condividono lo stesso rate di riempimento CIR.
 La massima dimensione del buffer C è CBS e la massima dimensione del buffer
 E è EBS.
\end_layout

\begin_layout Itemize
Inizialmente i due buffer 
\series bold
C
\series default
 ed 
\series bold
E
\series default
 sono pieni: 
\begin_inset Formula $T_{C}\left(0\right)=CBS$
\end_inset

 e 
\begin_inset Formula $T_{E}\left(0\right)=EBS$
\end_inset

.
\end_layout

\begin_layout Itemize
In seguito il conteggio dei 
\emph on
token
\emph default
 viene aggiornato come segue:
\end_layout

\begin_deeper
\begin_layout Itemize
Se 
\begin_inset Formula $T_{C}\left(t\right)<CBS$
\end_inset

 allora 
\begin_inset Formula $T_{C}\left(t+1\right)=T_{C}\left(t\right)+1$
\end_inset


\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $T_{E}\left(t\right)<EBS$
\end_inset

 allora 
\begin_inset Formula $T_{E}\left(t+1\right)=T_{E}\left(t\right)+1$
\end_inset


\end_layout

\begin_layout Itemize
Altrimenti nessuno dei due viene incrementato
\end_layout

\end_deeper
\begin_layout Itemize
Ogni volta che arriva un pacchetto di dimensione 
\begin_inset Formula $B$
\end_inset

 in ingresso al tempo 
\begin_inset Formula $t$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Se 
\begin_inset Formula $T_{C}\left(t\right)-B\,\geq0$
\end_inset

, allora il pacchetto è 
\emph on
green
\emph default
 e 
\begin_inset Formula $T_{C}$
\end_inset

 viene decrementato di 
\begin_inset Formula $B$
\end_inset

 fino al valore minimo 
\begin_inset Formula $0$
\end_inset

 (non può andare sottozero ovviamente!).
\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $T_{E}\left(t\right)-B\,\geq0$
\end_inset

, allora il pacchetto è 
\emph on
yellow
\emph default
 e 
\begin_inset Formula $T_{E}$
\end_inset

 viene decrementato di 
\begin_inset Formula $B$
\end_inset

 fino al valore minimo 
\begin_inset Formula $0$
\end_inset

 (non può andare sottozero ovviamente!)
\end_layout

\begin_layout Itemize
Altrimenti il pacchetto è 
\emph on
red
\emph default
 e nè 
\begin_inset Formula $T_{C}$
\end_inset

 nè 
\begin_inset Formula $T_{E}$
\end_inset

 vengono decrementati
\end_layout

\end_deeper
\begin_layout Standard
Come abbiamo detto c'è anche 
\series bold
la versione 
\begin_inset Quotes eld
\end_inset


\emph on
color-aware
\series default
\emph default

\begin_inset Quotes erd
\end_inset

 di srTCM:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-014.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
In questo caso, ogni volta che arriva un pacchetto di dimensione 
\begin_inset Formula $B$
\end_inset

 in ingresso al tempo 
\begin_inset Formula $t$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
Se il pacchetto è stato 
\bar under
pre-colorato 
\emph on
green
\bar default
 
\emph default
e 
\begin_inset Formula $T_{C}\left(t\right)-B\,\geq0$
\end_inset

, allora il pacchetto è 
\emph on
green
\emph default
 e 
\begin_inset Formula $T_{C}$
\end_inset

 viene decrementato di 
\begin_inset Formula $B$
\end_inset

 fino al valore minimo 
\begin_inset Formula $0$
\end_inset

 (non può andare sottozero ovviamente!).
\end_layout

\begin_layout Itemize
Se il pacchetto è stato 
\bar under
pre-colorato 
\emph on
green 
\emph default
o 
\emph on
yellow
\bar default
 
\emph default
e 
\begin_inset Formula $T_{E}\left(t\right)-B\,\geq0$
\end_inset

, allora il pacchetto è 
\emph on
yellow
\emph default
 e 
\begin_inset Formula $T_{E}$
\end_inset

 viene decrementato di 
\begin_inset Formula $B$
\end_inset

 fino al valore minimo 
\begin_inset Formula $0$
\end_inset

 (non può andare sottozero ovviamente!)
\end_layout

\begin_layout Itemize
Altrimenti il pacchetto è 
\emph on
red
\emph default
 e nè 
\begin_inset Formula $T_{C}$
\end_inset

 nè 
\begin_inset Formula $T_{E}$
\end_inset

 vengono decrementati.
\end_layout

\end_deeper
\begin_layout Standard
Il marker srTCM può essere utilizzato per marcare lo stream di pacchetti
 di un servizio, dove si vogliono dare garanzie diverse a pacchetti di vario
 tipo.
 Per esempio si potrebbe:
\end_layout

\begin_layout Itemize
Scartare tutti i pacchetti 
\emph on
red
\emph default
 poiché superano sia le soglie di 
\emph on
committed
\emph default
 e 
\emph on
excess
\emph default
 
\emph on
burst size
\emph default
.
\end_layout

\begin_layout Itemize
Inoltrare i pacchetti 
\emph on
yellow
\emph default
 come 
\emph on
best effort
\emph default
.
\end_layout

\begin_layout Itemize
Inoltrare i pacchetti 
\emph on
green
\emph default
 con una bassa probabilità di drop.
\end_layout

\begin_layout Subsection*
Two-rate Three-Color Marker (trTCM)
\end_layout

\begin_layout Standard
Il 
\emph on
meter
\emph default
 di tipo trTCM misura un stream di pacchetti IP e li marca in base a due
 misure:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Peak Information Rate
\series default
 
\emph default
(PIR) 
\end_layout

\begin_layout Itemize

\series bold
\emph on
Committed Information Rate
\series default
\emph default
 (CIR)
\end_layout

\begin_layout Standard
E le 
\emph on
burst sizes
\emph default
 associate possono essere: 
\emph on
green, yellow e red
\emph default
.
\end_layout

\begin_layout Standard
Un pacchetto è marcato 
\emph on
red
\emph default
 se supera il PIR, altrimenti è marcato 
\emph on
yellow
\emph default
 o 
\emph on
green 
\emph default
a seconda che superi o meno il CIR.
\end_layout

\begin_layout Itemize
Il trTCM viene configurando specificando se deve essere 
\emph on
color-aware o no
\emph default
 e impostando i 4 parametri:
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
Peak Information Rate
\emph default
 (PIR)
\end_layout

\begin_layout Itemize

\emph on
Peak Burst Size
\emph default
 (PBS)
\end_layout

\begin_layout Itemize

\emph on
Committed Information Rate
\emph default
 (CIR)
\end_layout

\begin_layout Itemize

\emph on
Committed Burst Size
\emph default
 (CBS)
\end_layout

\end_deeper
\begin_layout Itemize
Il comportamento del 
\emph on
meter
\emph default
 dipende da: tipo di flusso in ingresso (colorato o no), 
\begin_inset Formula $P$
\end_inset

 e 
\begin_inset Formula $C$
\end_inset

 e i valori di 
\begin_inset Formula $PIR$
\end_inset

 e 
\begin_inset Formula $CIR$
\end_inset

.
\end_layout

\begin_layout Itemize
Il CIR viene misurato in 
\series bold
bytes del pacchetto IP per secondo
\series default
, header compreso ma escludendo headers datalink.
\end_layout

\begin_layout Itemize
Dobbiamo avere 
\begin_inset Formula $PIR\geq CIR$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $PBS$
\end_inset

 e 
\begin_inset Formula $CBS$
\end_inset

 sono misurati in 
\series bold
bytes
\series default
 e devono essere entrambi maggiori di 0.
 È raccomandato che siano impostati ad essere maggiori o uguali alla dimensione
 del pacchetto IP più grande possibile dello stream.
\end_layout

\begin_layout Itemize
Abbiamo due 
\series bold
\emph on
token buckets
\series default
\emph default
: 
\begin_inset Formula $P$
\end_inset

 e 
\begin_inset Formula $C$
\end_inset

, rispettivamente riempiti a rate 
\begin_inset Formula $PIR$
\end_inset

 e 
\begin_inset Formula $CIR$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
La dimensione massima del 
\emph on
bucket
\emph default
 
\begin_inset Formula $P$
\end_inset

 è 
\begin_inset Formula $PBS$
\end_inset

, quella del 
\emph on
bucket
\emph default
 
\begin_inset Formula $C$
\end_inset

 è 
\begin_inset Formula $CBS$
\end_inset

.
\end_layout

\begin_layout Itemize
Al tempo 
\begin_inset Formula $0$
\end_inset

 abbiamo 
\begin_inset Formula $T_{P}\left(0\right)=PBS$
\end_inset

 e 
\begin_inset Formula $T_{C}\left(0\right)=CBS$
\end_inset


\end_layout

\begin_layout Itemize
Dopo il tempo 
\begin_inset Formula $0$
\end_inset

, il valore di 
\begin_inset Formula $T_{P}$
\end_inset

 viene incrementato di 
\begin_inset Formula $PIR$
\end_inset

 ogni secondo, fino a 
\begin_inset Formula $PBS$
\end_inset


\end_layout

\begin_layout Itemize
Dopo il tempo 
\begin_inset Formula $0$
\end_inset

, il valore di 
\begin_inset Formula $T_{C}$
\end_inset

 viene incrementato di 
\begin_inset Formula $CIR$
\end_inset

 ogni secondo, fino a 
\begin_inset Formula $CBS$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-015.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
Quando un pacchetto di dimensione 
\begin_inset Formula $B$
\end_inset

 entra al tempo 
\begin_inset Formula $t$
\end_inset

 , se trTCM è configurato per operare in modalità 
\series bold
\emph on
color-blind
\series default
\emph default
 abbiamo:
\end_layout

\begin_deeper
\begin_layout Itemize
Se 
\begin_inset Formula $T_{P}\left(t\right)-B\,<\,0$
\end_inset

 allora il pacchetto è 
\emph on
red
\end_layout

\begin_layout Itemize
Altrimenti se 
\begin_inset Formula $T_{C}\left(t\right)-B\,<\,0$
\end_inset

 allora il pacchetto è 
\emph on
yellow
\emph default
 e 
\begin_inset Formula $T_{P}$
\end_inset

 viene decrementato di 
\begin_inset Formula $B$
\end_inset

 fino al minimo di 
\begin_inset Formula $0$
\end_inset

.
\end_layout

\begin_layout Itemize
Altrimenti il pacchetto è 
\emph on
green
\emph default
 e sia 
\begin_inset Formula $T_{P}$
\end_inset

 che 
\begin_inset Formula $T_{C}$
\end_inset

 sono decrementati di 
\begin_inset Formula $B$
\end_inset

 fino al minimo di 
\begin_inset Formula $0$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-017.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Se abbiamo un trTCM configurato per operare in modalità 
\series bold
\emph on
color-aware
\series default
\emph default
:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-016.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
In questo caso quando un pacchetto di dimensione 
\begin_inset Formula $B$
\end_inset

 entra al tempo 
\begin_inset Formula $t$
\end_inset

 , abbiamo:
\end_layout

\begin_deeper
\begin_layout Itemize
Se il pacchetto è stato 
\bar under
pre-colorato 
\emph on
red
\emph default
 
\bar default
oppure se 
\begin_inset Formula $T_{P}\left(t\right)-B\,<\,0$
\end_inset

, il pacchetto è 
\emph on
red
\emph default
, altrimenti
\end_layout

\begin_layout Itemize
Se il pacchetto è stato 
\bar under
pre-colorato 
\emph on
yellow
\emph default
\bar default
 oppure se 
\begin_inset Formula $T_{C}\left(t\right)-B\,<\,0$
\end_inset

, il pacchetto è 
\emph on
yellow
\emph default
 e 
\begin_inset Formula $T_{P}$
\end_inset

 è decrementato di 
\begin_inset Formula $B$
\end_inset

 fino al minimo di 
\begin_inset Formula $0$
\end_inset

, altrimenti
\end_layout

\begin_layout Itemize
Il pacchetto è 
\emph on
green
\emph default
 e sia 
\begin_inset Formula $T_{P}$
\end_inset

 che 
\begin_inset Formula $T_{C}$
\end_inset

 sono decrementati di 
\begin_inset Formula $B$
\end_inset

 fino al minimo di 
\begin_inset Formula $0$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Section*
Scheduling
\end_layout

\begin_layout Subsection*
Contratto sul traffico
\end_layout

\begin_layout Standard
Un contratto sul traffico stipulato tra un cliente e un service provider
 include una TCA e SLA.
\end_layout

\begin_layout Standard
La TCA specifica il profilo di traffico 
\begin_inset Formula $\left(A,P,B\right)$
\end_inset

.
\end_layout

\begin_layout Standard
La SLA specifica i requisiti per la qualità del servizio 
\begin_inset Formula $\left(d,p\right)$
\end_inset

 (QoS):
\end_layout

\begin_layout Itemize
Una 
\series bold
soglia di ritardo massimo
\end_layout

\begin_layout Itemize
La 
\series bold
massima frazione di pacchetti
\series default
 che possono superare la soglia di ritardo massimo
\end_layout

\begin_deeper
\begin_layout Itemize
Se la frazione è 
\begin_inset Formula $0$
\end_inset

, il servizio è 
\series bold
garantito
\end_layout

\begin_layout Itemize
Se la frazione è 
\begin_inset Formula $>0$
\end_inset

, il servizio è 
\series bold
statistico
\end_layout

\end_deeper
\begin_layout Itemize
La 
\series bold
massima frazione di pacchetti persi
\series default
.
\end_layout

\begin_layout Subsection*
Garantire la QoS
\end_layout

\begin_layout Standard
Quando un utente lo richiede, viene stabilito un contratto con TCA e SLA.
\end_layout

\begin_layout Itemize
La 
\series bold
\emph on
admission control
\series default
\emph default
 verifica che questo contratto possa essere soddisfatto senza modificare
 la SLA dei contratti già stabiliti.
 In caso affermativo vengono allocate delle risorse sulla rete per questo
 contratto.
\end_layout

\begin_layout Itemize
Le connessioni si attivano e il controllo 
\emph on
real-time
\emph default
 del traffico inizia:
\end_layout

\begin_deeper
\begin_layout Itemize
Viene fatto 
\emph on
scheduling 
\emph default
in ogni nodo della rete
\end_layout

\begin_layout Itemize
Si effettua 
\emph on
regulation
\emph default
 del traffico in ingresso alla rete
\end_layout

\begin_layout Itemize
Si utilizzano tecniche di 
\series bold
\emph on
active queue management
\series default
\emph default
 nei nodi della rete
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-018.png
	scale 40

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
Admission Control
\end_layout

\begin_layout Standard
Nella parte di 
\emph on
admission control
\emph default
 decidiamo se accettare o rifiutare delle richieste del cliente.
\end_layout

\begin_layout Standard
Accettiamo una richiesta solo se è possibile soddisfarla senza degradare
 la SLA di altri contratti già stabiliti.
\end_layout

\begin_layout Standard
Per esempio possiamo accettare flussi VoIP solo se il delay può essere garantito.
 Del resto è nella natura del sistema telefonico di bloccare delle richieste
 se non ci sono risorse.
\end_layout

\begin_layout Standard
La parte di 
\emph on
admission control
\emph default
 è strettamente legata al 
\emph on
real-time management
\emph default
 del traffico (
\series bold
\emph on
scheduling
\series default
\emph default
).
 Infatti è possibile stabiliare se possiamo soddisfare la SLA solo conoscendo
 le politiche di scheduling implementate nei nodi della rete da attraversare,
 così come la quantità di risorse di ciascun nodo e link.
\end_layout

\begin_layout Subsection*
Scheduling
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-019.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
In un nodo della rete, ogni collegamento in uscita è gestito da uno 
\series bold
\emph on
scheduler
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Lo scheduler organizza la trasmissione dei pacchetti, scegliendo per ogni
 pacchetto, il tipo di 
\emph on
service class
\emph default
 che deve essere fornita.
\end_layout

\begin_deeper
\begin_layout Itemize
In particolare, appena termina la trasmissione di un pacchetto, lo scheduler
 utilizza un algoritmo per scegliere quale 
\emph on
service class
\emph default
 deve essere servita successivamente.
\end_layout

\end_deeper
\begin_layout Itemize
In alcune architetture lo 
\emph on
scheduling 
\emph default
è basato sulle 
\emph on
service classes
\emph default
 , ad esempio flussi di traffico sono aggregati in categorie di servizio
 e, nello scheduler, tutti i pacchetti appartenenti alla stessa categoria
 di servizio vengono salvati nello stesso buffer.
\end_layout

\begin_layout Itemize
In altre architetture, buffering e categorie di servizio sono divise per
 flusso.
 Cioè c'è un buffer per ogni singolo flusso e il servizio di ogni flusso
 è differenziato.
 In questo modo è possibile ottenere una differenziazione del servizio molto
 fine.
\end_layout

\begin_deeper
\begin_layout Itemize
Tuttavia questo presenta dei problemi di scalabilità poiché gli 
\emph on
schedulers
\emph default
 di un nodo 
\emph on
core
\emph default
 della rete potrebbe dover gestire migliaia di flussi contemporaneamente.
\end_layout

\begin_layout Itemize
C'è un limite superiore sui flussi che possono essere gestiti su una architettur
a differenziando il servizio dei flussi individuali.
 
\end_layout

\end_deeper
\begin_layout Itemize
Gestire delle classi di servizio invece dei flussi risolve il problema della
 scalabilità.
 Il numero delle classi di servizio è molto più piccolo del numero di flussi
 che uno scheduler deve sostentere.
 
\end_layout

\begin_deeper
\begin_layout Itemize
Per esempio 
\begin_inset Formula $10000$
\end_inset

 flussi VoIP potrebbero rientrare nella stessa classe di servizio di uno
 scheduler basato su classi.
\end_layout

\begin_layout Itemize
Al contrario in uno scheduler 
\emph on
per-flusso
\emph default
 dovremmo istanziare 
\begin_inset Formula $10000$
\end_inset

 buffers e selezionare tra 
\begin_inset Formula $10000$
\end_inset

 flussi per la trasmissione di ogni pacchetto.
\end_layout

\end_deeper
\begin_layout Itemize
Lo scheduling può essere una funzione molto complicata da svolgere.
 La quantità di risorse necessarie per soddisfare la SLA di tutte le classi
 di servizio che condividono lo stesso link dipende da:
\end_layout

\begin_deeper
\begin_layout Itemize
L'insieme delle TCA di ogni classe di servizio
\end_layout

\begin_layout Itemize
La SLA di ogni classe di servizio
\end_layout

\begin_layout Itemize
La politica di scheduling (l'algoritmo di scheduling)
\end_layout

\end_deeper
\begin_layout Itemize
La 
\emph on
connection admission control 
\emph default
può essere fatta solo se conosciamo tutti gli elementi sopra elencati.
\end_layout

\begin_layout Itemize
Dato il TCA composto di una classe di servizio sullo scheduler di un link
 come 
\begin_inset Formula $TCAi$
\end_inset


\end_layout

\begin_layout Itemize
Dato lo SLA di una classe di servizio come 
\begin_inset Formula $SLAi$
\end_inset


\end_layout

\begin_layout Itemize
La capacità totale del link: 
\begin_inset Formula $C$
\end_inset

 consumata dalle service classes che condividino quel link, è una funzione
 delle TCA, SLA e politica di scheduling: 
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
C=f\left(\left(TCA1,SLA1\right),\,\left(TCA2,SLA2\right),\,...,\, policy\right)
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection*
FIFO Scheduler
\end_layout

\begin_layout Standard
Lo scheduler di tipo FIFO (
\emph on
First-In First-Out
\emph default
, il primo che entra è il primo ad essere servito) è lo scheduler più semplice
 che possiamo realizzare.
 È sostanzialmente una coda semplice.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-020.png
	scale 35

\end_inset


\end_layout

\begin_layout Standard
Pur essendo semplice, è il meno utile a fornire servizi QoS differenziati.
\end_layout

\begin_layout Itemize
Tutti i pacchetti, indipendentemente dalla loro classe di servizio, vengono
 salvati nello stesso buffer e sono serviti nello stesso ordine con cui
 sono arrivati nel buffer.
\end_layout

\begin_layout Itemize
Chiaramente solo una SLA può essere offerta a tutti i flussi.
\end_layout

\begin_layout Itemize
In questo caso per soddisfare tutte le SLA con un sistema di questo tipo,
 bisogna garantire la SLA più stringente tra quelle da soddisfare.
\end_layout

\begin_layout Itemize
È un sistema chiaramente inefficiente, infatti lo scheduler FIFO viene utilizzat
o solo per reti 
\emph on
Best-Effort
\emph default
.
\end_layout

\begin_layout Subsubsection*
Strict Priority Scheduler (SP)
\end_layout

\begin_layout Standard
È uno scheduler semplice ma efficacie.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-021.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
È composto da 
\begin_inset Formula $N$
\end_inset

 buffers di tipo FIFO ordinati per priorità.
\end_layout

\begin_layout Itemize
Lo scheduler SP, quando deve trasmettere un pacchetto, esamina per prima
 la coda con priorità più elevata (in figura 
\emph on
Priority 1
\emph default
)
\end_layout

\begin_layout Itemize
Se la coda contiene almeno un pacchetto, viene estratto dalla coda e servito
 in uscita.
\end_layout

\begin_layout Itemize
Se la coda di priorità superiore è vuota, lo scheduler passa a controllare
 la coda successiva.
 Se è presente un pacchetto, esso viene trasmesso 
\end_layout

\begin_layout Itemize
La coda di priorità successiva (nell'esempio è 
\emph on
Priority 3
\emph default
) viene servita solo se le code precedenti sono vuote.
\end_layout

\begin_layout Standard
Alcune considerazioni su questo scheduler:
\end_layout

\begin_layout Itemize
Possiamo ad esempio assegnare il traffico con requisiti QoS stringenti al
 buffer di priorità più alta.
 Possiamo assegnare il traffico 
\emph on
best effort
\emph default
 alla categoria di priorità più bassa e QoS intermedi nelle altre categorie.
\end_layout

\begin_layout Itemize
È un sistema che ha senso se 
\begin_inset Formula $N$
\end_inset

 è piccolo, dato che è un algoritmo con complessità temporale 
\begin_inset Formula $O\left(N\right)$
\end_inset

.
\end_layout

\begin_layout Subsubsection*
General Processor Sharing scheduler (GPS scheduler)
\end_layout

\begin_layout Standard
In questo tipo di scheduler, simile allo scheduler SP, ad ogni classe di
 servizio è assegnato un peso che varia da 
\begin_inset Formula $0$
\end_inset

 a 
\begin_inset Formula $1$
\end_inset

.
 La somma dei pesi è: 
\begin_inset Formula 
\[
w_{1}+w_{2}+w_{3}+...=1
\]

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-022.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
L'
\emph on
i-esima
\emph default
 classe di servizio riceve una capacità di trasmissione 
\begin_inset Formula $w_{i}C$
\end_inset

, dove 
\begin_inset Formula $C$
\end_inset

 è la capacità del link di uscita.
 Gli scheduler GPS sono anche noti come 
\series bold
\emph on
rate-based schedulers
\series default
\emph default
 perchè dividono la banda esplicitamente ad ogni servizio.
\end_layout

\begin_layout Itemize
Il problema è che se per una delle classi di servizio non trasmette niente,
 non stiamo utilizzando parte della banda a disposizione.
 È possibile risolvere in parte il problema ridistribuendo temporaneamente
 la parte di banda dedicata a quella classe di servizio.
\end_layout

\begin_deeper
\begin_layout Itemize
Per esempio amettiamo che 
\begin_inset Formula $w_{1}=0.3$
\end_inset

, 
\begin_inset Formula $w_{2}=0.5$
\end_inset

 e 
\begin_inset Formula $w_{3}=0.2$
\end_inset

.
 Supponiamo inoltre che il flusso 
\begin_inset Formula $3$
\end_inset

 è in silenzio per un po' di tempo e decidiamo di riallocare le risorse.
 Possiamo farlo facendo: 
\begin_inset Formula 
\[
w_{1}=w_{1}+\frac{w_{3}\cdot w_{1}}{\left(w_{1}+w_{2}\right)}=0.3+\frac{0.2\cdot0.3}{\left(0.3+0.5\right)}
\]

\end_inset

 
\begin_inset Formula 
\[
w_{2}=w_{2}+\frac{w_{3}\cdot w_{2}}{\left(w_{1}+w_{2}\right)}=0.5+\frac{0.2\cdot0.5}{\left(0.3+0.5\right)}
\]

\end_inset


\end_layout

\begin_layout Itemize
Quando la classe 
\begin_inset Formula $3$
\end_inset

 torna attiva si ripristina lo stato precedente.
\end_layout

\begin_layout Itemize
Quindi risolviamo il problema con una media pesata che ridistribuisce un
 modo pesato la banda sulle varie classi.
\end_layout

\begin_layout Itemize
Il 
\series bold
problema
\series default
 è che questo è uno scheduler teorico.
 Nella realtà non possiamo trasmettere metà pacchetto! 
\series bold
Non possiamo mai fermarci dopo aver iniziato la trasmissione di un pacchetto
\series default
.
 
\end_layout

\begin_layout Itemize
Quindi lo scheduler GPS è una approssimazione degli scheduler reali.
\end_layout

\begin_layout Itemize
Gli scheduler WFQ: 
\emph on
Weighted Fair Queueing schedulers
\emph default
 sono un esempio di applicazione reale di GPS.
\end_layout

\end_deeper
\begin_layout Subsubsection*
Earliest Deadline First Schedulers (EDF scheduler)
\end_layout

\begin_layout Standard
In questo tipo di scheduler, la classe di servizio 
\emph on
i-esima
\emph default
 è caratterizzata da una 
\series bold
\emph on
service deadline
\series default
\emph default
 di 
\begin_inset Formula $d_{i}\,\left[seconds\right]$
\end_inset

.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-023.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
Alla fine della trasmissione di ogni pacchetto, lo scheduler prende tra
 i pacchetti in attesa di essere trasmessi, quello con il tempo rimanente
 più basso.
 Questo può essere fatto perché ogni pacchetto che arriva nel sistema viene
 marcato con il suo 
\emph on
timestamp
\emph default
 di arrivo 
\begin_inset Formula $t_{k}$
\end_inset

.
\end_layout

\begin_layout Itemize
Al tempo 
\begin_inset Formula $t$
\end_inset

, il tempo rimanente di un pacchetto all'interno della classe di servizio
 
\begin_inset Formula $i$
\end_inset

, è calcolato come: 
\begin_inset Formula 
\[
Residual\, time\,=\, t_{k}+d_{i}-t
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Che rappresenta la quantità di tempo rimasta prima che la deadline della
 classe vada in scadenza.
\end_layout

\begin_layout Itemize
Notiamo che questa quantità può essere negativa, indicando che il pacchetto
 è 
\begin_inset Quotes eld
\end_inset

in ritardo
\begin_inset Quotes erd
\end_inset

 e la deadline è già scaduta.
\end_layout

\end_deeper
\begin_layout Itemize
Tempo rimanente più basso significa priorità più alta.
\end_layout

\begin_layout Standard
Dobbiamo sempre ricordare comunque che per quanto complessi, gli schedulers
 non sanno cosa sia QoS e SLA, siamo noi a dover fare delle valutazioni
 se ci permettono di soddisfare i nostri requisiti.
\end_layout

\begin_layout Subsection*
Tornando all'Admission Control
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-024.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Vediamo in figura un semplice esempio di scenario da 
\emph on
admission control 
\emph default
con un singolo link servito con uno scheduler FIFO come mostrato in figura.
\end_layout

\begin_layout Itemize
Abbiamo 
\begin_inset Formula $N$
\end_inset

 flussi statisticamente identici che condividono il link.
\end_layout

\begin_layout Itemize
La SLA statistica è definita con i soliti due parametri 
\begin_inset Formula $\left(d,p\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
Il ritardo però aumenta man mano che si aggiungono flussi.
 Esiste un 
\series bold
massimo 
\series default
numero di flussi accettabili 
\begin_inset Formula $N_{max}$
\end_inset

 , oltre il quale la SLA non può essere garantita.
\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $N>N_{max}$
\end_inset

 la SLA è violata.
\end_layout

\begin_layout Standard
Quindi, per uno scheduler a singola classe, il valore di 
\begin_inset Formula $N_{max}$
\end_inset

 definisce la 
\series bold
\emph on
admission region
\series default
\emph default
 (regione di ammissione) dello scheduler.
 Nel caso di uno scheduler a singola classe la regione di ammissione è uni-dimen
sionale e definisce un intervallo di valori 
\begin_inset Formula $\left[0,N_{max}\right]$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-025.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Basandosi su queste assunzioni, le richieste mandate in ingresso alla rete
 che porterebbero il sistema fuori dalla regione di ammissione dello scheduler
 vanno rifiutate, altrimenti ci potrano a violare la SLA! L'ampiezza della
 regione di ammissione dipende dalla 
\bar under
capacità del link di uscita
\bar default
 e dalle 
\bar under
proprietà statistiche del traffico
\bar default
.
\end_layout

\begin_layout Standard
Pensiamo ora ad uno 
\series bold
scheduler a due classi
\series default
:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-026.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
In questo caso la regione di ammissione è chiaramente bidimensionale.
\end_layout

\begin_layout Itemize
La regione di ammissione è l'insieme di tutte le coppie 
\begin_inset Formula $\left(N_{1},\, N_{2}\right)$
\end_inset

 tali che la SLA 
\begin_inset Formula $\left(d_{1},p_{1}\right)$
\end_inset

 della classe 1 e la SLA 
\begin_inset Formula $\left(d_{2},p_{2}\right)$
\end_inset

 della classe 2 siano soddisfatte.
\end_layout

\begin_deeper
\begin_layout Itemize
In una SLA di questo tipo dobbiamo avere: 
\begin_inset Formula $P_{r}\left(D_{1}>d_{1}\right)<p_{1}\;\wedge\; P_{r}\left(D_{2}>d_{1}\right)<p_{2}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
La 
\series bold
\emph on
admission line
\series default
\emph default
 (linea di ammissione) è la curva che rappresenta il massimo numero 
\begin_inset Formula $N_{2}$
\end_inset

 di flussi per la classe 2 che possono essere accettati, dati 
\begin_inset Formula $N_{1}$
\end_inset

 flussi della classe 1 già accettati.
\end_layout

\begin_layout Standard
Proseguendo così abbiamo anche il caso con uno 
\series bold
\emph on
scheduler a 3 classi
\series default
\emph default
:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-027.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
In questo caso la regione di ammissione è tridimensionale.
\end_layout

\begin_layout Standard
Ci sono 
\begin_inset Formula $N_{1}$
\end_inset

 flussi nella classe 1, 
\begin_inset Formula $N_{2}$
\end_inset

 flussi nella classe 2, 
\begin_inset Formula $N_{3}$
\end_inset

 flussi nella classe 3.
\end_layout

\begin_layout Itemize
Gli SLA delle tre classi sono: 
\begin_inset Formula $\left(d_{1},p_{1}\right)$
\end_inset

, 
\begin_inset Formula $\left(d_{2},p_{2}\right)$
\end_inset

 e 
\begin_inset Formula $\left(d_{3},p_{3}\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
La regione di ammissione è l'insieme 
\begin_inset Formula $\left(N_{1},N_{2},N_{3}\right)$
\end_inset

 tale che le tre SLA sono soddisfatte contemporaneamente.
\end_layout

\begin_layout Itemize
L'estensione a più di 3 classi è intuitiva.
 I calcoli per determinare la regione di accettazione sono conseguentemente
 complicati.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{1}>d_{1}\right)<p_{1}\;\wedge\; P_{r}\left(D_{2}>d_{1}\right)<p_{2}\;...\wedge\; P_{r}\left(D_{n}>d_{n}\right)<p_{n}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
Packet Classification
\end_layout

\begin_layout Standard
Nelle architetture di rete che forniscono QoS differenziate, la 
\emph on
packet classification
\emph default
 è uno step 
\series bold
fondamentale
\series default
 per fornire diversi SLA.
\end_layout

\begin_layout Itemize
Nella IP 
\emph on
Differentiated Services Architecture
\emph default
 , questi diversi livelli di servizio sono chiamati 
\emph on
Per-Hop-Behaviour
\emph default
 (PHB).
\end_layout

\begin_layout Itemize
I nodi trattano in modo diverso i pacchetti a seconda del loro PHB.
 Chiaramente i nodi devono essere in grado di stabilire qual'è il PHB a
 cui un pacchetto appartiene, altrimenti non è possibile applicare la SLA
 associata.
\end_layout

\begin_layout Itemize
Quindi i pacchetti trasportano l'informazione sul loro PHB in un codice
 al loro interno.
 Questo codice deve essere scritto da un nodo della rete, subito al bordo
 della rete.
 Questa operazione è chiamata 
\series bold
\emph on
classification
\series default
\emph default
 (classificazione).
 
\end_layout

\begin_layout Standard
La classificazione si basa su chiavi e regole:
\end_layout

\begin_layout Itemize
La chiave di classificazione di solito è un insieme di 
\begin_inset Formula $N$
\end_inset

 bits nel packet header, concentrati in un campo o suddivisi in vari campi.
 Utilizzando una chiave di 
\begin_inset Formula $N$
\end_inset

 bit possiamo definire fino a 
\begin_inset Formula $2^{N}$
\end_inset

 classi di servizio diverse.
\end_layout

\begin_layout Itemize
Il risultato della classificazione è quello di applicare un trattamento
 diverso ad ogni pacchetto.
\end_layout

\begin_layout Standard
Tipi di classificazioni:
\end_layout

\begin_layout Itemize
Il metodo più semplice è chiamato schema 
\series bold
\emph on
single-field
\series default
\emph default
: utilizzamo un unico campo del pacchetto come chiave per fare classificazione
\end_layout

\begin_layout Itemize
La classificazione 
\series bold
\emph on
multi-field
\series default
\emph default
 considera campi multipli dell'header del pacchetto.
 È più complicato perché dobbiamo lavorare a 
\emph on
wire-speed
\emph default
 e non possiamo impiegare troppo tempo per fare classificazione.
\end_layout

\begin_layout Itemize
Tuttavia la classificazione 
\emph on
multi-field
\emph default
 è migliore perché fornisce delle informazioni più contestuali al router
 che deve classificare.
\end_layout

\begin_layout Standard
Tipicamente le classificazioni 
\series bold
\emph on
single-field
\series default
\emph default
 utilizzano il campo 
\emph on
Type of Service
\emph default
 all'interno del pacchetto IPv4.
 Questo campo è stato modificato nel tempo numerose volte cambiandone la
 semantica tante volte.
 Ad oggi questo campo è diventato il 
\series bold
\emph on
Differentiated Services field
\series default
\emph default
.
 È sempre un campo da 1 Byte nella stessa posizione, ma cambia il significato.
 Sono 6 bit che rappresentano la classe di servizio a cui appartiene il
 pacchetto e 2 bit riservati (in realtà sono ad oggi utilizzati da ECN).
\end_layout

\begin_layout Standard
Tuttavia è sempre possibile fare classificazione ulteriore considerando
 il protocollo trasportato e sue eventuali porte.
\end_layout

\begin_layout Subsubsection*
Problemi nella classificazione
\end_layout

\begin_layout Standard
Il problema ad utilizzare classificazione 
\series bold
\emph on
multi-field
\series default
\emph default
 è che alcuni campi sono lunghi!
\end_layout

\begin_layout Itemize
Su IPv4 ad esempio:
\end_layout

\begin_deeper
\begin_layout Itemize
Un flusso è identificato da:
\end_layout

\begin_deeper
\begin_layout Itemize
Source Address (4 Byte)
\end_layout

\begin_layout Itemize
Destination Address (4 Byte)
\end_layout

\begin_layout Itemize
Source Port (2 Byte, assumendo TCP o UDP)
\end_layout

\begin_layout Itemize
Destination Port (2 Byte, assumendo TCP o UDP)
\end_layout

\begin_layout Itemize
Protocol (1 Byte)
\end_layout

\end_deeper
\begin_layout Itemize
Abbiamo in totale 104 bits! È un numero relativamente grosso considerando
 di doverlo utilizzare come match su 
\series bold
ogni singolo pacchetto
\series default
 in transito! Abbiamo bisogno una quantità di calcolo non indifferente per
 controllare tutti questi campi.
\end_layout

\end_deeper
\begin_layout Itemize
Con IPv6:
\end_layout

\begin_deeper
\begin_layout Itemize
Il problema paradossalmente è ancora più difficile perché abbiamo 128 bit
 da analizzare per gli indirizzi, quindi in totale dobbiamo analizzare 288
 bits!
\end_layout

\begin_layout Itemize
Inoltre con IPv6 gli headers sono agganciati come esensioni successive ed
 è quindi necessario un po' di lavoro di parsing per trovare i numeri di
 porta e altre informazioni!
\end_layout

\begin_layout Itemize
Tuttavia il 
\series bold
\emph on
flow label field
\series default
\emph default
 (20 bits) può essere sfruttato per evitare di guardare altri dettagli del
 pacchetto e fare classificazione più semplice.
\end_layout

\end_deeper
\begin_layout Subsubsection*
Regole di classificazione
\end_layout

\begin_layout Standard
Un classificatore 
\emph on
multi-field
\emph default
 ha inoltre il problema di dover affrontare regole di match multiple per
 lo stesso pacchetto.
\end_layout

\begin_layout Standard
Il matching può essere:
\end_layout

\begin_layout Itemize

\series bold
Esatto
\series default
: Un campo deve corrispondere, ad esempio l'indirizzo sorgente deve essere
 192.0.2.1
\end_layout

\begin_layout Itemize
A 
\series bold
\emph on
range
\series default
\emph default
: L'indirizzo può essere all'interno di un intervallo o no.
 Ad esempio tra 192.0.2.1 e 192.0.2.254.
\end_layout

\begin_layout Standard
Inoltre le regole possono essere composte da 
\bar under
operatori logici
\bar default
:
\end_layout

\begin_layout Itemize
Ad esempio l'indirizzo IP deve essere nel range ...
 
\series bold
e
\series default
 il protocollo deve essere TCP 
\series bold
e
\series default
 la porta di destinazione deve essere ...
\end_layout

\begin_layout Standard
Ogni regola logica può essere istanziata però le regole complesse consumano
 una quantità enorme di risorse di calcolo, specialmente considerando che
 vorremmo lavorare a 
\emph on
wire-speed
\emph default
.
\end_layout

\begin_layout Itemize
L'output del processo di classificazione è la classe a cui appartiene il
 pacchetto.
\end_layout

\begin_layout Itemize
Di solito la classe del pacchetto viene scritta all'interno del campo 
\emph on
DiffServ
\emph default
 dell'header IP.
\end_layout

\begin_layout Itemize
Per esempio una classe tradizionale è quella del traffico 
\emph on
best effort
\emph default
.
 Questa classe di traffico, in base alla semantica del campo 
\emph on
DiffServ
\emph default
, ha codice 
\begin_inset Formula $000000$
\end_inset

.
 Un amministratore di rete potrebbe decidere ad esempio di assegnare tutto
 il traffico HTTP al servizio 
\emph on
best effort
\emph default
.
 
\end_layout

\begin_deeper
\begin_layout Itemize
In questo caso la regola sarebbe qualcosa del tipo: 
\series bold
IF 
\series default
SA in [192.0.2.10, 192.0.2.254] 
\series bold
AND
\series default
 protocol=TCP 
\series bold
AND
\series default
 DP=80 
\series bold
THEN 
\series default
class=Best-Effort
\end_layout

\end_deeper
\begin_layout Subsubsection*
Line Rate Processing
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-028.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Ogni linea di ingresso di un nodo ha un classifier che esamina i pacchetti
 in ingresso.
 Se un pacchetto arriva mentre un altro è in corso di classificazione, viene
 messo all'interno di una coda FIFO.
 I pacchetti quindi 
\series bold
accumulano ritardo
\series default
 mentre vengono classificati.
 Per pacchetti che necessitano una SLA stringente questo ritardo può essere
 un grosso problema.
 Inoltre non è possibile dare la precedenza a questi pacchetti proprio perché
 ancora non sono classificati.
 Per questo motivo si tenta di scalare il sistema parallelizzando più CPU
 per fare classificazione in parallelo pensando al caso pessimo.
\end_layout

\begin_layout Standard
Qual'è il caso pessimo? È uno stream di pacchetti consecutivi corti, con
 regole 
\emph on
multi-field
\emph default
 e campi lunghi.
 La regola di classificazione è una regola complessa.
\end_layout

\begin_layout Standard
Dopo aver classificato di solito c'è un marker a cui viene comunicata la
 TCA e si occupa di marcare il pacchetto prima di proseguire nella rete.
\end_layout

\begin_layout Section*
Active Queue Management (AQM)
\end_layout

\begin_layout Standard
È una funzionalità che può essere aggiunta ad un buffer per gestire in modo
 più efficiente il processo di 
\emph on
packet dropping
\emph default
.
\end_layout

\begin_layout Standard
Infatti le code hanno necessariamente una capacità di storage finita ed
 in caso di congestione potrebbero droppare pacchetti.
\end_layout

\begin_layout Standard
In una coda senza AQM, i pacchetti passano in 
\series bold
\emph on
taildrop
\series default
\emph default
, cioè quando la coda è piena, appena arrivano pacchetti in coda vengono
 scartati senza entrare.
\end_layout

\begin_layout Standard
Questo metodo ha funzionato su Internet per anni ma ha due importanti problemi:
\end_layout

\begin_layout Itemize

\series bold
Lock-out
\end_layout

\begin_layout Itemize

\series bold
Full queues
\end_layout

\begin_layout Subsection*
Lock-out
\end_layout

\begin_layout Standard
In alcune situazioni, specialmente con TCP, una politica di taildrop permette
 ad una singola connessione o a poche connessioni fortunate di 
\begin_inset Quotes eld
\end_inset

prendere il controllo
\begin_inset Quotes erd
\end_inset

 di un buffer, monopolizzando lo spazio della coda, senza permettere ad
 altre connessioni di utilizzare il buffer.
\end_layout

\begin_layout Standard
Questo problema di 
\emph on
lock-out
\emph default
 è spesso dovuto alla 
\begin_inset Quotes eld
\end_inset

sincronia
\begin_inset Quotes erd
\end_inset

 di TCP.
\end_layout

\begin_layout Standard
Ecco perché alle volte quando tentiamo di caricare una pagina web ci mettiamo
 moltissimo tempo, poi magari con una operazione di refresh la carichiamo
 subito: al secondo tentativo siamo passati nel flusso 
\begin_inset Quotes eld
\end_inset

fortunato
\begin_inset Quotes erd
\end_inset

 e abbiamo preso il controllo di un buffer per un momento.
\end_layout

\begin_layout Standard
È un problema serio che degrada in modo pessimo anche le prestazioni di
 servizi 
\emph on
best effort
\emph default
.
\end_layout

\begin_layout Standard
Basti pensare come reagisce TCP ad una perdita di pacchetti per capire che
 la banda del servizio inizia a cambiare in modo molto instabile.
\end_layout

\begin_layout Standard
Active Queue Management è un modo per risolvere questo problema.
\end_layout

\begin_layout Subsection*
Full Queue
\end_layout

\begin_layout Standard
È l'altro problema menzionato.
\end_layout

\begin_layout Standard
La disciplina 
\emph on
taildrop
\emph default
 tende a mantenere le code sempre piene (o quasi piene) per molto tempo,
 poiché segnala la congestione solo quando inizia a perdere pacchetti (cioè
 è passata in 
\emph on
taildrop
\emph default
).
\end_layout

\begin_layout Standard
È vero che TCP utilizza una finestra di ricezione, però i pacchetti vengono
 spesso inviati in bursts.
 Se la coda è piena o quasi, tende a droppare tutti i pacchetti del burst
 che arrivano.
\end_layout

\begin_layout Standard
Può andare a finire che si sincronizzano questi tentativi di trasmissione,
 alternando momenti di buffer abbastanza vuoto, con momenti in cui tanti
 flussi mandano burst nello stesso momento.
\end_layout

\begin_layout Subsection*
Le soluzioni di AQM
\end_layout

\begin_layout Standard
La soluzione al problema delle code piene è che i routers inizino a droppare
 i pacchetti 
\series bold
prima
\series default
 che le code si riempiano, di modo che i nodi possono rispondere al problema
 della congestione prima che i buffer vadano in overflow.
\end_layout

\begin_layout Standard
Questo approccio di tipo 
\series bold
\emph on
proactive
\series default
\emph default
 è chiamato Active Queue Management.
 Non gestiamo più il buffer in modo passivo ma in modo attivo.
\end_layout

\begin_layout Standard
Il fatto di poter droppare pacchetti quando il buffer non è pieno, permette
 ai routers di controllare 
\series bold
quando
\series default
 e 
\series bold
quanti
\series default
 pacchetti devono essere droppati, senza doversi preoccupare dell'overflow.
\end_layout

\begin_layout Standard
Un semplice meccanismo di AQM è RED.
\end_layout

\begin_layout Subsection*
Random Early Detection (RED)
\end_layout

\begin_layout Standard
È un meccanismo di AQM.
 Si occupa di droppare i pacchetti in arrivo in modo probabilistico.
\end_layout

\begin_layout Standard
La probabilità di drop cresce man mano che la stima del valore medio della
 coda aumenta.
 Quindi RED lavora su una coda in modo 
\series bold
non istantaneo
\series default
.
\end_layout

\begin_layout Itemize
Se la coda è stata vuota recentemente , RED non tende a droppare pacchetti
 (a meno di overflow instantaneo ovviamente)
\end_layout

\begin_layout Itemize
Se la coda è stata relativamente piena recentemente, indicando congestione
 persistente, i nuovi pacchetti in arrivo hanno più probabilità di essere
 droppati.
\end_layout

\begin_layout Standard
L'algoritmo RED è composto principalmente da due parti:
\end_layout

\begin_layout Itemize

\series bold
La stima della dimensione media della coda
\series default
: RED stima la dimensione media della coda utilizzando una semplice media
 mobile esponenziale.
\end_layout

\begin_layout Itemize

\series bold
La decisione sul drop o meno di un pacchetto
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
L'algoritmo di RED tenta di premiare i flussi che di dimostrano più 
\emph on

\begin_inset Quotes eld
\end_inset

responsive
\emph default

\begin_inset Quotes erd
\end_inset

 
\end_layout

\begin_layout Itemize
Il processo decisionale di RED è basato su due parametri: 
\begin_inset Formula $minth$
\end_inset

 (soglia minima) e 
\begin_inset Formula $maxth$
\end_inset

 (soglia massima).
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
\begin_inset Formula $minth$
\end_inset

 
\series default
specifica il valore medio della coda sotto il quale i pacchetti non vengono
 droppati
\end_layout

\begin_layout Itemize
\begin_inset Formula $maxth$
\end_inset

 specifica il valore medio della coda sopra il quale tutti i pacchetti sono
 droppati
\end_layout

\end_deeper
\begin_layout Itemize
Poichè il valore medio della coda si sposta da 
\emph on

\begin_inset Formula $minth$
\end_inset

 a 
\begin_inset Formula $maxth$
\end_inset

, 
\emph default
i pacchetti saranno droppati con una probabilità che varia linearmente da
 0 a 
\begin_inset Formula $maxp$
\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
Il calcolo del valore medio della coda è fatto come segue:
\end_layout

\begin_layout Standard
All'arrivo di un pacchetto al tempo 
\begin_inset Formula $t$
\end_inset

: 
\begin_inset Formula 
\[
Q_{ave}=\left(1-w\right)\cdot Q_{ave}+w\cdot Q\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Dove:
\end_layout

\begin_layout Itemize
\begin_inset Formula $Q_{ave}$
\end_inset

 è lo stimatore dell'occupazione media della coda,
\end_layout

\begin_layout Itemize
\begin_inset Formula $Q\left(t\right)$
\end_inset

 è l'occupazione istantanea della coda al tempo 
\begin_inset Formula $t$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $w$
\end_inset

 è un peso in 
\begin_inset Formula $0<w<1$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-029.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Quando un pacchetto arriva, il valore attuale di 
\begin_inset Formula $Q_{ave}$
\end_inset

 viene utilizzato per determinare la probabilità di drop del pacchetto,
 in base alla curva di seguito rappresentata:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-030.png
	scale 50

\end_inset


\end_layout

\begin_layout Subsection*
RED for In and Out (RIO)
\end_layout

\begin_layout Standard
Quando i pacchetti hanno diverse priorità di dropping, il meccanismo di
 RED non è sufficiente perché non differenzia il dropping.
\end_layout

\begin_layout Standard
Quindi, un meccanismo più avanzato è richiesto poiché nella architettura
 
\emph on
DiffServ
\emph default
 di IP sono richiesti diversi livelli di packet dropping.
 RIO è in grado di differenziare 
\series bold
due
\series default
 priorità di dropping.
 Questi due livelli sono convenzionalmente indicati come 
\series bold
IN
\series default
 e 
\series bold
OUT
\series default
.
\end_layout

\begin_layout Standard
Il traffico 
\series bold
IN
\series default
 ha probabilità più bassa di essere droppato rispetto all'
\series bold
OUT
\series default
 traffic, a parità di condizioni.
\end_layout

\begin_layout Standard
RIO utilizza due stimatori: 
\begin_inset Formula $Q_{ave,IN}$
\end_inset

 e 
\begin_inset Formula $Q_{ave,OUT}$
\end_inset

.
 In particolare:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Q_{ave,IN}=\left(1-w_{IN}\right)\cdot Q_{ave,IN}+w_{IN}\cdot Q_{IN}\left(t\right)
\]

\end_inset

 
\begin_inset Formula 
\[
Q_{ave,OUT}=\left(1-w_{OUT}\right)\cdot Q_{ave,OUT}+w_{OUT}\cdot Q_{OUT}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Lo stimatore 
\begin_inset Formula $Q_{ave,IN}$
\end_inset

 tiene conto solo della coda dei pacchetti IN, mentre lo stimatore 
\begin_inset Formula $Q_{ave,OUT}$
\end_inset

 tiene conto sia dei pacchetti IN che dei pacchetti OUT.
 In questo modo 
\begin_inset Formula $Q_{ave,IN}\geq Q_{ave,OUT}$
\end_inset


\end_layout

\begin_layout Standard
Quindi ci sono due soglie, una per il traffico IN e una per il traffico
 OUT.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-031.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Queste soglie sono impostate in modo che la curva di drop del traffico OUT
 è sempre superiore alla curva di drop del traffico IN.
\end_layout

\begin_layout Standard
In questo modo la probabilità di drop è differenziata tra due classi.
\end_layout

\begin_layout Standard
Questo può essere esteso ad un numero arbitrario di classi.
 Di solito l'architettura 
\emph on
DiffServ
\emph default
 di IP ha un massimo di 3 comportamenti di drop dentro un gruppo PHB.
\end_layout

\begin_layout Section*
IP Differentiated Services
\end_layout

\begin_layout Standard
Offrire servizi differenziati su reti IP può essere un problema, a causa
 dei problemi presenti per il grosso numero di flussi e il problema di mantenere
 stati per-flusso.
\end_layout

\begin_layout Standard
Inoltre gli operatori devono essere in grado di applicare 
\series bold
\emph on
traffic engineering
\series default
\emph default
 per poter dirigere dei flussi verso percorsi specifici.
\end_layout

\begin_layout Standard
L'architettura 
\series bold
IP Differentiated Services
\series default
 (IP 
\emph on
DiffServ
\emph default
) è un modo per ottenere reti IP scalabili con granzie QoS.
\end_layout

\begin_layout Subsection*
Concetti base
\end_layout

\begin_layout Itemize
L'architettura IP 
\emph on
DiffServ
\emph default
 definisce una sorta di framework con cui operatori e ISP possono fornire
 servizi differenziati 
\emph on
end-to-end
\emph default
 in modo 
\series bold
coordinato
\series default
 e 
\series bold
affidabile
\series default
.
\end_layout

\begin_layout Itemize
Con questo tipo di architettura, un ISP può fare dei contratti standard
 per gestire servizi in modo differenziato.
\end_layout

\begin_layout Itemize
Supportare servizi differenziali è un obbiettivo strategico per un ISP,
 che può garantire banda prioritaria per servizi 
\begin_inset Quotes eld
\end_inset

mission critical
\begin_inset Quotes erd
\end_inset

 per gli utenti che desiderano pagare un costo aggiuntivo.
\end_layout

\begin_layout Itemize
I clienti specificano questi dettagli nel loro SLA, questo agreement può
 anche specificare il volume di traffico, come viene gestito il traffico
 e la politica di pagamento.
\end_layout

\begin_layout Itemize
Un componente importante dell'architettura 
\emph on
DiffServ
\emph default
 è l'avvento del 
\emph on
traffic engineering
\emph default
: la possibilità di spostare percorsi selezionati da IGP (RIP, OSPF...) su
 un path diverso.
\end_layout

\begin_deeper
\begin_layout Itemize
Questo permette all'ISP di spostare il traffico da alcuni punti di congestione
 facendo uso più efficiente della banda.
\end_layout

\begin_layout Itemize
A sua volta questo rende l'ISP più competitivo sul mercato, permettendo
 di fornire servizi migliori.
\end_layout

\end_deeper
\begin_layout Subsection*
Classi di traffico
\end_layout

\begin_layout Standard
Il traffico più finire all'interno di una di tante classi diverse.
\end_layout

\begin_layout Itemize
Al fine di garantire che le procedure dell'ISP funzionino correttamente
 è molto importante che i pacchetti siano classificati correttamente prima
 di entrare nella rete dell'ISP e che sia molto semplice per un dispositivo
 dell'ISP determinare la classe di traffico per un particolare pacchetto.
\end_layout

\begin_layout Itemize
La classe di traffico dei pacchetti MPLS può essere scritta all'interno
 del campo CoS dell'header MPLS, inoltre le classi di traffico per i pacchetti
 IPv4 possono essere identificate tramite il campo 
\series bold
DSCP
\series default
 (
\emph on
Differentiated Services Code Point
\emph default
).
\end_layout

\begin_layout Itemize
La classificazione dei pacchetti ai bordi della rete permette di fare il
 trattamento differenziato all'interno della rete dell'ISP.
\end_layout

\begin_layout Itemize
Tecniche sofisticate di classificazione, marking, shaping, policing, devono
 essere implementate solo ai bordi della rete.
\end_layout

\begin_layout Itemize
Le risorse di rete vengono allocate a stream di traffico in base a previsioni
 su come il traffico è trattato e inoltrato all'interno della rete.
\end_layout

\begin_layout Subsection*
Caratteristiche dell'architettura DiffServ
\end_layout

\begin_layout Standard
È una architettura composta da una serie di elementi:
\end_layout

\begin_layout Itemize
Un piccolo insieme di PHBs
\end_layout

\begin_layout Itemize
Funzioni per la classificazione dei pacchetti
\end_layout

\begin_layout Itemize
Funzioni di 
\series bold
\emph on
traffic conditioning
\series default
\emph default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Metering
\end_layout

\begin_layout Itemize
Marking
\end_layout

\begin_layout Itemize
Shaping
\end_layout

\begin_layout Itemize
Policing
\end_layout

\end_deeper
\begin_layout Standard
Questa architettura ha scalabilità perché implementa funzioni di classificazione
 e conditioning complesse solo ai bordi della rete.
 Applica invece PHBs al traffico già marcato utilizzando il campo DSCP.
\end_layout

\begin_layout Standard
I PHBs vengono definiti per permettere ai nodi intermedi di gestire le risorse
 in modo corretto.
\end_layout

\begin_layout Standard
Viene mantenuta 
\series bold
distinzione tra
\series default
:
\end_layout

\begin_layout Itemize
Il servizio fornito come traffico aggregato
\end_layout

\begin_layout Itemize
Le funzioni di conditioning e PHBs per realizzare i servizi
\end_layout

\begin_layout Itemize
Il campo DSCP utilizzato per marcare e distinguere le varie classi di PHBs.
\end_layout

\begin_layout Itemize
Le particolari implementazioni sui nodi per realizzare i vari PHBs.
\end_layout

\begin_layout Standard
Un 
\series bold
DS Domain
\series default
 è un insieme di nodi contigui caratterizzati dalla fornitura dello stesso
 servizio e gruppo di PHBs implementati su ogni nodo.
\end_layout

\begin_layout Itemize
Ha dei bordi ben definiti nella rete, che classificano e fanno 
\emph on
conditioning
\emph default
 del traffico in ingresso per garantire che i pacchetti in transito nel
 dominio siano propriamente marcati per selezionare un PHB da uno dei gruppi
 di PHB supportati nel dominio.
\end_layout

\begin_layout Itemize
I nodi del DS Domain scelgono i comportamenti di inoltro dei pacchetti in
 base al loro campo DSCP, mappando quel valore ad uno dei PHBs supportati,
 utilizzando l'associazione DCSP→PHB raccomandata o una custom.
\end_layout

\begin_layout Itemize
Un DS Domain solitamente consiste in un insieme di reti sotto la stessa
 amministrazione.
 Per esempio una intranet di una azienda o un ISP.
 L'amministrazione del dominio si deve assicurare di avere risorse adeguate
 e supportare la SLA.
\end_layout

\begin_layout Itemize
I nodi interni alla rete potrebbero essere in grado di fare 
\emph on
conditioning
\emph default
 come ad esempio il 
\emph on
re-marking
\emph default
 del campo DSCP.
\end_layout

\begin_layout Itemize
I nodi di bordo di un DS Domain agiscono sia come DS ingress node che come
 DS egress node per le diverse direzioni del traffico.
\end_layout

\begin_deeper
\begin_layout Itemize
Un DS Ingress Node deve occuparsi di verificare che il traffico in ingresso
 sia conforme alla TCA
\end_layout

\begin_layout Itemize
Un DS Egress Node potrebbe fare operazioni di 
\emph on
traffic conditioning
\emph default
 sul traffico inoltrato
\end_layout

\end_deeper
\begin_layout Standard
Una 
\series bold
DS Region
\series default
 è un insieme di uno o più 
\series bold
DS Domains
\series default
.
\end_layout

\begin_layout Itemize
Le DS Regions possono supportare servizi differenziati su percorsi attorno
 ai domini della regione
\end_layout

\begin_layout Itemize
I DS Domains di una DS Region possono supportare diversi gruppi di PHB e
 diverse associazioni tra DSCP e PHB.
\end_layout

\begin_layout Itemize
Per permettere i servizi attraverso i vari domini, devono stabilire delle
 SLA e TCA tra di loro 
\end_layout

\begin_layout Standard
I servizi differenziati sono estesi tra i bordi dei vari DS Domains stabilendo:
\end_layout

\begin_layout Itemize
Lo SLA che può specificare la 
\emph on
packet classification
\emph default
, le regole di 
\emph on
re-marking 
\emph default
e possono anche specificare i profili di traffico e azioni per gli stream
 di traffico in-profilo o fuori-profilo.
\end_layout

\begin_layout Itemize
Il TCA tra i domini è derivato (esplicitamente o implicitamente) da questo
 SLA
\end_layout

\begin_layout Itemize
Il traffic conditioning deve fare 
\emph on
metering
\emph default
, shaping, policing e/o re-marking per assicurarsi che il traffico in ingresso
 al DS Domain è conforme alle regole specificate nel TCA.
\end_layout

\begin_layout Subsection*
Classification
\end_layout

\begin_layout Standard
I packet classifiers selezionano i pacchetti in uno stream in base al contenuto
 di alcune porzioni del 
\emph on
packet header
\emph default
.
\end_layout

\begin_layout Standard
Ci sono due tipi di classificatori:
\end_layout

\begin_layout Itemize
Il 
\emph on
Behaviour Aggregate
\emph default
 
\emph on
Classifier 
\emph default
(
\series bold
BA
\series default
): Classifica i pacchetti solo in base al campo DSCP.
\end_layout

\begin_layout Itemize
Il 
\emph on
Multi-Field Classifier
\emph default
 (
\series bold
MF
\series default
): Classifica i pacchetti in base ad un insieme di campi come già visto
\end_layout

\begin_layout Standard
In seguito i pacchetti vanno nel conditioner
\end_layout

\begin_layout Subsection*
Traffic Profile
\end_layout

\begin_layout Standard
Il profilo di traffico specifica le proprietà statistiche dello stream di
 traffico classificato.
 Fornisce delle regole per stabilire se un pacchetto è in profilo o fuori
 profilo.
\end_layout

\begin_layout Standard
Per esempio un profilo basato su un 
\emph on
token bucket
\emph default
 può apparire come: 
\begin_inset Quotes eld
\end_inset


\emph on
se codepoint=X allora usa token bucket r,b
\emph default

\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
Questo esempio indica che tutti i pacchetti marcati con il DSCP X devono
 essere misurati con il token bucket di parametri 
\begin_inset Formula $r$
\end_inset

 e 
\begin_inset Formula $b$
\end_inset

.
\end_layout

\begin_layout Standard
Differenti azioni di conditioning possono essere applicate.
\end_layout

\begin_layout Itemize
I pacchetti in-profile possono essere inoltrati semplicemente o il campo
 DSCP può essere modificato.
\end_layout

\begin_deeper
\begin_layout Itemize
Il campo DSCP viene modificato di solito quando si passa in un DS Domain
 dove si utilizzano associazioni diverse tra DSCP e PHB, quindi è necessario
 aggiustare il campo per mantere la stessa politica.
\end_layout

\end_deeper
\begin_layout Itemize
I pacchetti out-profile possono essere accodati fino a quando non sono in
 profilo (
\emph on
shaping
\emph default
), scartati (
\emph on
drop
\emph default
), marcati con un nuovo codepoint (
\emph on
re-marked
\emph default
), ...
\end_layout

\begin_layout Subsection*
Per-Hop Behaviours
\end_layout

\begin_layout Standard
È una descrizione del comportamento di inoltro di un DS node applicato ad
 un certo aggregato DS.
 Più sorgenti possono competere per buffer e banda del DS node.
\end_layout

\begin_layout Itemize
Gli schedulers giocano un ruolo chiave nell'implementazione pratica delle
 PHB.
\end_layout

\begin_layout Itemize
Per esempio le PHB potrebbero garantire una allocazione minima di banda
 
\begin_inset Formula $X$
\end_inset

 su un certo link.
\end_layout

\begin_deeper
\begin_layout Itemize
L'implementazione di un PHB di questo tipo necessita ovviamente di uno scheduler
 di tipo 
\emph on
rate-based
\emph default
 come abbiamo visto.
\end_layout

\end_deeper
\begin_layout Itemize
Il PHB può anche essere definito in termini di priorità rispetto ad altri
 PHB, o in termini delle loro caratteristiche relative di traffico
\end_layout

\begin_layout Itemize
I PHB sono il componente chiave per allocare risorse e devono essere definiti
 in un gruppo (PHB group) per consistenza.
\end_layout

\begin_deeper
\begin_layout Itemize
I gruppi di PHB condividono dei vincoli applicando ogni PHB nel gruppo,
 ad esempio in termini di scheduling dei pacchetti o politiche per la gestione
 dei buffers.
\end_layout

\begin_layout Itemize
La relazione tra i vari PHB in un gruppo è solitamente in termini di priorità
 assoluta o relativa.
\end_layout

\end_deeper
\begin_layout Itemize
I PHB vengono implementati nei vari nodi con qualche politica di gestione
 dei buffers e scheduling dei pacchetti.
\end_layout

\begin_layout Itemize
I PHB vengono definiti in termini di 
\series bold
comportamento 
\series default
e 
\series bold
non di implementazione
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize
Infatti una varietà di meccanismi implementativi potrebbero essere possibili
 per lo stesso PHB group
\end_layout

\end_deeper
\begin_layout Standard
Per selezionare il PHB da applicare ad un nodo, si legge il campo DSCP del
 pacchetto IPv4 e si guarda una tabella di associazioni per sapere a quale
 PHB corrisponde.
\end_layout

\begin_layout Standard
Esiste una tabella standard, tuttavia il numero di PHB standard è minore
 di quello di PHB possibili con questo mapping, quindi è possibile definire
 dei PHB custom a seconda delle necessità.
\end_layout

\begin_layout Subsection*
SLA e TCA nella architettura IP DiffServ
\end_layout

\begin_layout Standard
L'architettura DiffServ utilizza il termine SLA per descrive un contratto
 di servizio che specifica il servizio di 
\emph on
forwarding
\emph default
 che un cliente deve ricevere.
 La SLA può includere regole per il 
\emph on
traffic conditioning
\emph default
 che costituiscono una TCA.
\end_layout

\begin_layout Standard
Una TCA è 
\begin_inset Quotes eld
\end_inset

un contratto che specifica regole di classificazione e ogni corrispondente
 profilo di traffico, metering, marking, dropping e/o shaping che si devono
 applicare...
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
Ci potrebbero ovviamente essere altre considerazioni tecniche, che non vengono
 considerate nel contratto pensato da 
\emph on
DiffServ
\emph default
.
\end_layout

\begin_layout Standard
Vengono definite inoltre:
\end_layout

\begin_layout Itemize

\series bold
\emph on
Service Level Specification
\series default
\emph default
 (
\series bold
SLS
\series default
): È un insieme di parametri e valori che insieme definiscono il servizio
 offerto ad uno stream da parte di un DS Domain
\end_layout

\begin_layout Itemize

\series bold
\emph on
Traffic Conditioning Specification
\series default
\emph default
 (
\series bold
TCS
\series default
): È un insieme di parametri e valori che insieme definiscono le regole
 di classificazione e profilo di traffico
\end_layout

\begin_deeper
\begin_layout Itemize
TCS è un elemento di SLS.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
\emph on
Service Provisioning Policy
\series default
\emph default
: È una politica che specifica come sono configurati i 
\emph on
traffic conditioners
\emph default
 su un DS Boundary node e come gli streams di traffico sono mappati ad un
 DS behaviour per supportare una serie di servizi.
\end_layout

\begin_layout Standard
In base a quanto stabilito dalla RFC3198, una politica (policy) è: 
\begin_inset Quotes eld
\end_inset

un insieme di regole per amministrare, controllare e gestire l'accesso alle
 risorse di rete
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Section*
Expedited Forwarding PHB (EF PHB)
\end_layout

\begin_layout Standard
È una parte fondamentare dell'architettura IP DiffServ.
\end_layout

\begin_layout Standard
EF vuole fornire un componente fondamentale per: basso delay, basso jitter
 e basse perdite .
 Si assicura inoltre che EF aggregate sia fornito ad una certo rate.
\end_layout

\begin_layout Standard
Per esempio servizi di emulazione di circuito possono essere trasportati
 con EF PHB.
\end_layout

\begin_layout Itemize
La causa dominante del delay nelle reti a pacchetto sono i tempi di propagazione
 e ritardi di accodamento negli switch e routers.
\end_layout

\begin_deeper
\begin_layout Itemize
Poiché il delay è una proprietà fissa sulla topologia, il ritardo e jitter
 vengono minimizzati quando i ritardi di propagazione vengono minimizzati.
\end_layout

\end_deeper
\begin_layout Itemize
Per i nostri scopi 
\series bold
definiamo il 
\emph on
jitter
\emph default
 come 
\series default
la variazione tra il ritardo massimo e il ritardo minimo.
\end_layout

\begin_layout Itemize
Lo scopo della EF PHB è quello di fornire una PHB nella quale i pacchetti
 marcati incontrano di solito delle code corte o vuote.
\end_layout

\begin_deeper
\begin_layout Itemize
Inoltre, la coda rimane relativamente corta rispetto allo spazio disponibile
 nel buffer e la perdita dei pacchetti è anche tenuta al minimo
\end_layout

\end_deeper
\begin_layout Itemize
Per assicurarci che le code incontrate dai pacchetti EF siano corte o vuote,
 è necessario assicurarsi che il service rate degli EF packets su una data
 interfaccia di output superi il rate di arrivo sulla stessa interfaccia
 su intervalli di tempo brevi e lunghi, indipendentemente del carico di
 altro traffico non-EF.
\end_layout

\begin_deeper
\begin_layout Itemize
In questo caso il traffico EF devono essere garantiti ad ottenere un servizio
 sopra un rate configurato
\end_layout

\begin_layout Itemize
Inoltre ci serve un modo per quantificare l'accuratezza con cui questo rate
 di servizio è consegnato su qualunque intervallo di tempo.
\end_layout

\end_deeper
\begin_layout Standard
Per poter fare alcune valutazioni sulle performance dobbiamo prima introdurre
 due concetti: 
\series bold
\emph on
curva di traffico
\series default
\emph default
 e 
\series bold
\emph on
curva di servizio
\series default
\emph default
.
\end_layout

\begin_layout Subsection*
Curva di traffico
\end_layout

\begin_layout Standard
Consideriamo una interfaccia di rete specifica e assumiamo che sia in grado
 di contare il numero di bits 
\begin_inset Formula $X\left(t_{1},t_{2}\right)$
\end_inset

 che attraversano l'interfaccia nell'intervallo di tempo 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula $X\left(t_{1},t_{2}\right)$
\end_inset

 è la curva di traffico dell'interfaccia di riferimento.
 Se per convenzione 
\begin_inset Formula $t_{1}=0$
\end_inset

, la curva è indicata come 
\begin_inset Formula $X\left(t\right)$
\end_inset

.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-032.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Questa curva ovviamente è sempre crescente, non abbiamo i bit negativi!
\end_layout

\begin_layout Itemize
Poiché il traffico è suddiviso in pacchetti, la forma reale della curva
 è la seguente:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-033.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
Quando un pacchetto attraversa l'interfaccia di riferimento, la curva cresce
 linearmente con pendenza 
\begin_inset Formula $C\:\left[\frac{bits}{s}\right]$
\end_inset

, che è la capacità del link.
\end_layout

\begin_layout Itemize
Quando non ci sono pacchetti in trasmissione, la curva è costante piatta.
\end_layout

\begin_layout Subsection*
Curva potenziale di servizio
\end_layout

\begin_layout Standard
Dato uno scheduler (in questo esempio uno scheduler FIFO), la curva potenziale
 di servizio 
\begin_inset Formula $S\left(t\right)$
\end_inset

 è
\series bold
 il numero massimo di bits che lo scheduler può servire in un intervallo
 di tempo di durata 
\begin_inset Formula $t$
\end_inset

.
\end_layout

\begin_layout Standard
Dato uno scheduler FIFO che comprende un link di uscita con capacità uguale
 a 
\begin_inset Formula $C$
\end_inset

, la curva potenziale di servizio è uguale a 
\begin_inset Formula $C_{t}$
\end_inset

.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-034.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-035.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S\left(t\right)=C\cdot t
\]

\end_inset


\end_layout

\begin_layout Subsection*
Curva reale di traffico
\end_layout

\begin_layout Standard
Dato un scheduler (anche qua come esempio FIFO), la curva reale di traffico
 è la curva all'uscita dello scheduler, dato un traffico di input con curva
 
\begin_inset Formula $X\left(t\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-036.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsection*
Caratteristiche di EF PHB
\end_layout

\begin_layout Itemize
Di solito un nuovo flusso EF è caratterizzato da un processo periodico di
 arrivo di pacchetti di lunghezza uguale.
\end_layout

\begin_layout Itemize
Tutti i pacchetti hanno lunghezza 
\begin_inset Formula $L\;\left[bit\right]$
\end_inset

 e il rate di arrivo è 
\begin_inset Formula $\frac{1}{T}\:\left[\frac{packet}{s}\right]$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-037.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
r\left(t\right)=\sum_{k}L\cdot\delta\left(t-kT\right)
\]

\end_inset


\end_layout

\begin_layout Standard
La curva di traffico (a scalini in questo caso) è invece:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x\left(t\right)=\int_{0}^{t}r\left(x\right)dx
\]

\end_inset


\end_layout

\begin_layout Standard
Che nel caso dell'esempio in questione diventa:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x\left(t\right)=\int_{0}^{t}r\left(x\right)dx=\int_{0}^{t}\left(\sum_{k}\left(L\cdot\delta\left(x-kT\right)\right)\right)dx=\sum_{k}L\cdot u\left(t-kT\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-038.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Consideriamo invece il caso di un buffer FIFO con in ingresso 3 flussi identici.
 Lo scenario pessimo è quello in cui le fasi dei tre flussi coincidono.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-039.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-040.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Consideriamo invece il caso in cui i flussi sono diversi tra loro:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
X_{1}\left(t\right)=100\,\frac{kbit}{s}\,1\:\text{pacchetto ogni\,}10ms
\]

\end_inset


\begin_inset Formula 
\[
X_{2}\left(t\right)=200\,\frac{kbit}{s}\,1\:\text{pacchetto ogni\,}5ms
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
X_{3}\left(t\right)=250\,\frac{kbit}{s}\,1\:\text{pacchetto ogni\,}4ms
\]

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-041.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
E la relativa curva di traffico reale è la seguente:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-042.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
E la curva di traffico totale:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-043.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Ora invece assumiamo che la capacità della linea sia uguale a 
\begin_inset Formula $1Mbps$
\end_inset

.
 In questo modo il tempo di servizio per un pacchetto è 
\begin_inset Formula $1ms$
\end_inset

.
 Il servizio di un pacchetto viene concluso quando il suo ultimo bit è trasmesso.
 Quindi il primo bit di un pacchetto è trasmesso a tempo 
\begin_inset Formula $t$
\end_inset

 e l'ultimo bit a tempo 
\begin_inset Formula $t+1ms$
\end_inset

.
\end_layout

\begin_layout Standard
Il 
\series bold
massimo ritardo
\series default
 è calcolato come la massima differenza orizzontale tra la curva di traffico
 e la curva di traffico reale.
\end_layout

\begin_layout Standard
Il 
\series bold
massimo accodamento
\series default
 è calcolato come la massima differenza verticale tra la curva di traffico
 e la curva di traffico reale.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-044.png
	scale 40

\end_inset


\end_layout

\begin_layout Subsubsection*
Caso multi-hop
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-045.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Ora consideriamo un caso multi-hop dove l'output del primo scheduler viene
 inoltrato ad un secondo scheduler, che riceve un flusso addizionale 
\begin_inset Formula $X_{4}\left(t\right)$
\end_inset

.
 
\begin_inset Formula $X_{4}\left(t\right)$
\end_inset

ha le stesse caratteristiche statistiche di 
\begin_inset Formula $X_{3}\left(t\right)$
\end_inset

.
\end_layout

\begin_layout Standard
Vogliamo calcolare il 
\series bold
delay massimo end-to-end
\series default
.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-046.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-047.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Quindi il ritardo massimo end-to-end è 
\begin_inset Formula $5ms$
\end_inset

.
\end_layout

\begin_layout Subsubsection*
Multi-class scheduler
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-048.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Ora consideriamo un 
\emph on
multi-class scheduler
\emph default
 (in particolare uno scheduler SP), dove un flusso EF (
\begin_inset Formula $X_{1}\left(t\right)$
\end_inset

) ha priorità superiore ad un flusso non-EF (
\begin_inset Formula $X_{2}\left(t\right)$
\end_inset

)
\end_layout

\begin_layout Itemize
\begin_inset Formula $X_{2}\left(t\right)$
\end_inset

 potrebbe essere ad esempio un flusso 
\emph on
best effort
\emph default
.
\end_layout

\begin_layout Standard
In questo caso il ritardo 
\emph on
end-to-end
\emph default
 massimo è calcolato assumendo che quando un pacchetto EF è offerto allo
 scheduler, un pacchetto non-EF è appena passato in trasmissione.
 Quindi il pacchetto EF deve attendere la fine del pacchetto non-EF prima
 di poter trasmettere.
\end_layout

\begin_layout Standard
Assumiamo in questo esempio che 
\begin_inset Formula $X_{1}\left(t\right)$
\end_inset

 abbia le stesse caratteristiche di 
\begin_inset Formula $X_{3}\left(t\right)$
\end_inset

 del precedente esempio.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-049.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Esiste ovviamente un rate massimo per il traffico EF che può essere allocato
 sulla linea di uscita di un nodo.
 Questo perché tutti i pacchetti EF potrebbero trovare al loro arrivo, un
 altro pacchetto non-EF di dimensione massima, che dimezza il rate sostenibile
 per il rate EF.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-050.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
In generale, dato un flusso EF con lunghezza del pacchetto 
\begin_inset Formula $L_{1}$
\end_inset

 che interferisce con un flusso non-EF con lunghezza del pacchetto 
\begin_inset Formula $L_{2}$
\end_inset

, con velocità della linea 
\begin_inset Formula $C$
\end_inset

; il rate massimo configurabile del traffico EF è ottenuto considerando
 questa figura sopra, dove per ogni pacchetto EF, un pacchetto non-EF causa
 ritardo.
\end_layout

\begin_layout Standard
Il rate massimo di traffico EF sarà: 
\begin_inset Formula 
\[
C_{EF}=\frac{L_{1}}{L_{1}+L_{2}}\cdot C
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Nota: Codepoint di EF PHB
\end_layout

\begin_layout Standard
Nella RFC3246 è stato definito che per il sistema DiffServ, il codepoint
 101110 è assegnato all'EF PHB.
\end_layout

\begin_layout Subsection*
AF - 
\emph on
Assured forwarding 
\emph default
- PHB Group
\end_layout

\begin_layout Standard
Una tipica applicazione che utilizza la PHB AF è quella di una compagnia
 che utilizza Internet per intercollegare diversi siti geograficamente distribui
ti e vuole assicurarsi che i pacchetti IP nelle sue 
\emph on
intranets
\emph default
 siano inoltrati con alta probabilità fin tanto che il traffico aggregato
 di un sito non supera il 
\emph on
subscribed information rate
\emph default
.
\end_layout

\begin_layout Standard
Inoltre:
\end_layout

\begin_layout Itemize
È desiderabile che un sito possa superare il profilo sottoscritto comprendendo
 che il traffico non sarà inoltrato con alta probabilità come il traffico
 all'interno del profilo.
\end_layout

\begin_layout Itemize
È anche importante che 
\bar under
la rete non riordini i pacchetti
\bar default
 che appartengono allo stesso microflusso.
\end_layout

\begin_layout Standard
Vengono definite 
\series bold
4 classi AF
\series default
, dove ogni classe alloca in ogni nodo DS una certa quantità di risorse
 per l'inoltro.
\end_layout

\begin_layout Itemize
I pacchetti IP che vogliono utilizzare i servizi forniti dal gruppo AF PHB
 vengono assegnati dal cliente ad una o più di queste classi AF in base
 ai servizi a cui l'utente ha sottoscritto.
\end_layout

\begin_layout Itemize
In ogni classe AF, i pacchetti IP vengono marcati con una di tre precedenze
 di drop.
 In caso di congestione, la precedenza di drop determina l'importanza relativa
 del pacchetto nella classe AF.
\end_layout

\begin_layout Itemize
Un nodo DS congestionato tenta di proteggere pacchetti con probabilità di
 drop minore dall'essere persi, eventualmente droppando pacchetti con probabilit
à di drop superiore.
\end_layout

\begin_layout Itemize
In un nodo DS, il livello di affidabilità dell'inoltro dipende da:
\end_layout

\begin_deeper
\begin_layout Itemize
Quante risorse di inoltro sono state allocate per la classe AF a cui appartiene
 il pacchetto
\end_layout

\begin_layout Itemize
Qual'è il carico corrente delle classi AF
\end_layout

\begin_layout Itemize
In caso di congestione all'interno della classe, dipende dalla precedenza
 di drop del pacchetto
\end_layout

\end_deeper
\begin_layout Itemize
Formalmente un pacchetto IP che appartiene alla classe 
\emph on
i-esima
\emph default
 e ha precedenza di drop 
\emph on
j
\emph default
, viene marcato con il codepoint AF 
\begin_inset Formula $ij$
\end_inset

 dove 
\begin_inset Formula $1\leq i\leq4$
\end_inset

 e 
\begin_inset Formula $1\leq j\leq3$
\end_inset

 .
 Una implementazione AF deve tentare di minimizzare la congestione a lungo
 termine per ogni classe, mentre deve permettere la congestione a breve
 termine causata dai bursts.
 Questo richiede una sistema di gestione della coda di tipo AQM tipo RED/RIO.
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Class 1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Class 2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Class 3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Class 4
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Drop precedence 1 (low)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
011010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100010
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Drop precedence 2 (medium)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
011100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100100
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Drop precedence 3 (high)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
011110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100110
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Itemize
Di solito abbiamo 4 buffers, uno per ogni classe.
 In ogni buffer entrano pacchetti di tutti i colori: high,medium low.
 Questo perché utilizziamo nei buffer una 
\emph on
3 level active queue management
\emph default
 per servire in modo diverso ogni colore.
\end_layout

\begin_deeper
\begin_layout Itemize
Abbiamo quindi 12 tipi di PHB.
 In tabella vediamo i valori del campo DS per ciascuno dei PHB, così come
 specificato in RFC 2597.
\end_layout

\begin_layout Itemize
Un DS domain potrebbe decidere di utilizzare solo alcuni dei PHB presenti,
 non necessariamente tutti.
\end_layout

\end_deeper
\begin_layout Itemize
Esempi:
\end_layout

\begin_deeper
\begin_layout Itemize
A31 = Classe 3, precedenza di drop 1 → Codepoint 011010
\end_layout

\begin_layout Itemize
A42 = Classe 4, precedenza di drop 2 → Codepoint 100100
\end_layout

\end_deeper
\begin_layout Subsubsection*
AF PHB Group : Olympic service
\end_layout

\begin_layout Standard
È un tipo classico di servizio implementato quando si ha a disposizione
 la possibilità di fare QoS.
\end_layout

\begin_layout Standard
Vengono definite tre classi di servizio:
\end_layout

\begin_layout Itemize

\series bold
\emph on
bronze
\end_layout

\begin_layout Itemize

\series bold
\emph on
silver
\end_layout

\begin_layout Itemize

\series bold
\emph on
gold
\end_layout

\begin_layout Standard
È possibile utilizzare uno scheduler di tipo 
\series bold
\emph on
Static Priority
\series default
\emph default
 per implementare questo tipo di relazione tra le varie classi.
\end_layout

\begin_layout Standard
Volendo è possibile suddividere anche ogni classe in più probabilità di
 drop.
\end_layout

\begin_layout Subsubsection*
Best-Effort PHB
\end_layout

\begin_layout Standard
Nella architettura 
\emph on
DiffServ
\emph default
 esiste uno specifico PHB pensato per trasportare il classico traffico 
\emph on
best-effort
\emph default
, ed ha codefield 000000.
\end_layout

\begin_layout Itemize
Questa è la default PHB e significa cioè che se non riesco a determinare
 la PHB da assegnare ad un flusso, utilizzo la PHB di default.
\end_layout

\begin_layout Subsubsection*
Class Selector PHB group (CS):
\end_layout

\begin_layout Standard
Ha, tra le altre cose, lo scopo di trasportare il traffico associato a certi
 flussi multimediali.
\end_layout

\begin_layout Itemize
Questo tipo di PHB inoltre fornisce un mezzo per avere 
\series bold
\bar under
parziale
\series default
\bar default
 retrocompatibilità per chi utilizzava il vecchio campo 
\emph on
Type Of Service
\emph default
.
\end_layout

\begin_layout Itemize
Ogni PHB ha un nome di un byte, per questo tipo ti classe è: XXX000XX
\end_layout

\begin_deeper
\begin_layout Itemize
I primi tre bit sono gli 8 livelli di priorità, esattamente come il vecchio
 TOS faceva.
\end_layout

\begin_layout Itemize
Gli ultimi due bit sono semplicemente riservati.
\end_layout

\end_deeper
\begin_layout Itemize
Un flusso con CS 
\series bold
alto 
\series default
→ 
\series bold
ritardo minore
\series default
, cioè
\series bold
 priorità elevata
\end_layout

\begin_layout Itemize
Quindi le 8 classi che abbiamo visto sono un ranking 
\series bold
qualitativo
\series default
.
\end_layout

\begin_layout Itemize
Possiamo anche utilizzare schedulers GPS.
\end_layout

\begin_layout Subsubsection*
Riassumendo le PHBs:
\end_layout

\begin_layout Itemize
1 EF (101110+2bit reserved)
\end_layout

\begin_layout Itemize
12 AF (vedi tabella sopra)
\end_layout

\begin_layout Itemize
8 CS: codice (XXX000+2bit reserved)
\end_layout

\begin_layout Itemize
1 Default (Best Effort): codice 000000XX (dove XX sono reserved)
\end_layout

\begin_layout Standard
CS e BE coincidono in codice, quindi in pratica abbiamo un totale di 21
 PHBs.
\end_layout

\begin_layout Section*
Mappare le applicazioni al loro relativo PHB
\end_layout

\begin_layout Standard
Le applicazioni di rete possono essere suddivise in tante categorie.
 Principalmente abbiamo 5 macro-categorie:
\end_layout

\begin_layout Itemize

\series bold
Application control
\end_layout

\begin_deeper
\begin_layout Itemize
Ad esempio le applicazioni che fanno signaling di qualche tipo come ad esempio
 H.323, SIP o IGMP.
\end_layout

\begin_layout Itemize
I requisiti non sono diversi dal traffico di tipo 
\begin_inset Quotes eld
\end_inset

low latency data
\begin_inset Quotes erd
\end_inset

, però si vuole tentare di tenere i dati e il signaling su due classi di
 servizio diverse di solito.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Media-oriented
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Telefonia/VoIP service class
\end_layout

\begin_layout Itemize

\series bold
Real-Time Interactive service class
\series default
: video live o videoconferenza, interactive gaming
\end_layout

\begin_layout Itemize

\series bold
Multimedia conferencing
\series default
: videoconferenza che può adattare la velocità di trasmissione in base allo
 stato della rete.
\end_layout

\begin_layout Itemize

\series bold
Broadcast Video
\series default
 
\series bold
service class
\series default
: broadcast TV (inelastic)
\end_layout

\begin_layout Itemize

\series bold
Multimedia Streaming service class
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Circuit Emulation
\end_layout

\begin_deeper
\begin_layout Itemize
Ad esempio il servizio 
\emph on
pseudowire
\emph default
.
 È un servizio che si occupa di creare circuiti virtuali a bit-rate costante.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Data
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Low latency data
\series default
: per le connessioni che richiedono bassa latenza o sono 
\emph on
long-lived
\emph default
.
\end_layout

\begin_layout Itemize

\series bold
High-throughput data
\series default
: Good-throughput per connessioni long-lived.
\end_layout

\begin_layout Itemize

\series bold
Low-priority data
\series default
: Per applicazioni o servizi che possono tollerare lunghe o brevi interruzioni
 del flusso dati.
 Possiamo vedere questa classe come un 
\begin_inset Quotes eld
\end_inset

don't care
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Best-Effort
\series default
: classico tipo di servizio senza garanzie.
 Se un pacchetto è marcato con un valore DSCP sconosciuto allora viene rimappato
 su 
\emph on
best-effort
\emph default
.
\end_layout

\begin_layout Subsection*
Categorie ITU-T G.1010 del QoS in funzione del delay
\end_layout

\begin_layout Standard
Vengono specificate un insieme di categorie di QoS in funzione del delay
 e del tipo di applicazione.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-066.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Queste categorie sono anche riportate in RFC 4594
\end_layout

\begin_layout Itemize
Ci sono 4 categorie principali:
\end_layout

\begin_deeper
\begin_layout Itemize
Interactive
\end_layout

\begin_layout Itemize
Responsive 
\end_layout

\begin_layout Itemize
Timely
\end_layout

\begin_layout Itemize
Non-critical
\end_layout

\end_deeper
\begin_layout Subsection*
IETF user service classes
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="11" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Categoria
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Service class
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Signaled
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Flow behaviour
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
ITU-T G.1010
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Application control
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inelastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Responsive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Media oriented
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Telephony
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inelastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Interactive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Real-time service
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inelastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Interactive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Multimedia conferencing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate adaptive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Interactive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Broadcast video
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inelastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Responsive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Multimedia streaming
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Sì
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Timely
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low-latency data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Responsive
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
High-throughput data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Timely
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low-priority data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Non-critical
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Best effort
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Standard
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Not specified
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Not specified
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Non-critical
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection*
Caratteristiche delle service classes
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="14" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0pt">
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size tiny
Service class
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size tiny
Traffic Characteristic
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size tiny
Tollerance to
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size tiny
Loss
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size tiny
Delay
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size tiny
Jitter
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
1.Network control
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Pkt dimensioni variabili, brevi messaggi inelastici o bursts
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
2.OAM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Dimensione variabile dei pacchetti, flussi elastici e inelastici
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
3.
 Telephony
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Dimensione variabile dei pacchetti, bitrate costante inelastico
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Very low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
4.Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Dimensione variabile dei pacchetti, short-lived, bursty
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
5.
 Multimedia Conferencing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Dimensione variabile dei pacchetti, rate adattivo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low/Medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
6.
 Real-Time Interactive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Streams RTP/UDP, inelastic, rate variabile
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
7.
 Multimedia streaming
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Dimensione variabile dei pacchetti, elastico e rate variabile
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low/Medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
8.
 Broadcast Video
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Rate costante o variabile, non bursty
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Very low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
9.
 Low-latency data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Rate variabile, bursty, short lived elastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low/Medium
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
10.
 High-Throughput data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Rate variabile, bursty, elastic long lived
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Low
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Medium high
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
11.Standard
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Un po' di tutto
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Non specificato
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
12.
 Low-priority data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Non real-time ed elastic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
High 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
High
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size tiny
Yes
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection*
Possibile selezione delle PHB (RFC 4594)
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="19" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Service class
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DSCP name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DSCP value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Application examples
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.
 Network control
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Network routing
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2.
 OAM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OAM&IP
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3.Telephony
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
EF
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
101110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
IP telephony Barer
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4.Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
101000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
IP Telephony signaling
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5.
 Multimedia conferencing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF41
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
H.323/V2 video
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF42
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Conferencing (adaptive)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF43
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
6.
 Real-Time Interactive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Video conferencing
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
7.
 Multimedia streaming
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
011010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Streaming video/audio
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
8.
 Broadcast video
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
011000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Broadcast TV/live events
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
9.
 Low-latency data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Client/server transaction
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF22
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Web
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF23
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
010110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
10.
 High-Throughput data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF11
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001010
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Store and forward
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001100
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Application
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF13
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
11.
 Standard
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DF (CS)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
000000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Indifferenziato
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
12.
 Low-priority data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
001000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No BW assurance
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsection*
Possibile conditioning e schemi di scheduling
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="20" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Service class
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DSCP name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Conditioning at DS Edge
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Queuing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
AQM
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.
 Network control
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Police using sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2.
 OAM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Police using sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3.Telephony
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
EF
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Police using sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Priority
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4.Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Police using sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5.
 Multimedia conferencing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF41
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Two rate 3-color marker
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF42
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(RFC 2698)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF43
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
6.
 Real-Time Interactive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Police using sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
7.
 Multimedia streaming
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Two rate 3-color marker
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(RFC 2698)
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
8.
 Broadcast video
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Police using sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
9.
 Low-latency data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF21
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Single rate 3-color marker
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF22
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(RFC 2697)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF23
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
10.
 High-Throughput data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF11
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Two rate 3-color marker
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(RFC 2698)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF13
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
11.
 Standard
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DF (CS)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Not applicabile
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
12.
 Low-priority data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Not applicabile
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Itemize

\series bold
Note sul conditioning
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

sr+bs
\begin_inset Quotes erd
\end_inset

 rappresenta il meccanismo di policying che fornisce controllo della lunghezza
 del bursts.
\end_layout

\begin_layout Itemize
Il single rate 3-color marker (
\series bold
srTCM
\series default
): RFC 2697
\end_layout

\begin_layout Itemize
Il two rate 3-color marker (
\series bold
trTCM
\series default
): RFC 2698
\end_layout

\begin_layout Itemize
La PHB per Real-Time Interactive service class dovrebbe essere configurata
 per fornire alta banda affidabile
\end_layout

\begin_layout Itemize
La PHB per Broadcast video class dovrebbe essere configurata per fornire
 alta banda affidabile
\end_layout

\end_deeper
\begin_layout Subsection*
Esempio di scenario di applicazione
\end_layout

\begin_layout Itemize
Un amministratore di rete determina che ha bisogno di fornire diversi livelli
 di performance, in particolare:
\end_layout

\begin_deeper
\begin_layout Itemize
VoIP a livello affidabile, equivalente a PSTN
\end_layout

\begin_layout Itemize
Un servizio dati a basso delay e servizio dati
\end_layout

\begin_layout Itemize
Supporto per i servizi internet attuali
\end_layout

\end_deeper
\begin_layout Itemize
L'amministratore di rete implementa le seguenti 6 classi di servizio:
\end_layout

\begin_deeper
\begin_layout Itemize

\bar under
Network control service class
\bar default
 per routing e control traffic che è necessario per operatibilità affidabile
 della rete del provider.
\end_layout

\begin_layout Itemize

\bar under
Standard service class
\bar default
 per tutto il traffico che riceverà inoltro standard (indifferenziato).
\end_layout

\begin_layout Itemize

\bar under
Telephony service class
\bar default
 per il traffico VoIP
\end_layout

\begin_layout Itemize

\bar under
Signaling service class
\bar default
 per il signaling del traffico VoIP
\end_layout

\begin_layout Itemize

\bar under
Low-Latency data service class
\bar default
 per il traffico che necessita banda a basso delay
\end_layout

\begin_layout Itemize

\bar under
OAM service class
\bar default
 per gestione e operazioni sulla rete
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="6">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Service class
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DSCP
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Conditioning
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
PHB
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Queuing
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
AQM
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Network control
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
***
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RFC2474
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Telephony
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
EF
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RFC3246
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Priority
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Signaling
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CS5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RFC2474
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Low-Latency data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF21
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Single-rate 3-color marker
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF22
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RFC2597
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AF23
\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OAM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
sr+bs
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RFC2474
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Standard
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
N.A.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RFC2474
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rate
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Itemize
La classe di network control viene utilizzata per trasmettere pacchetti
 tra i dispositivi di rete (ad aesempio le informazioni di routing tra i
 routers), così come le informazioni per il peering tra diversi autonomous
 systems.
\end_layout

\begin_deeper
\begin_layout Itemize
Il traffico trasmesso in questa classe di servizio è molto importante poiché
 mantiene la rete funzionante.
 Deve essere inoltrato periodicamente.
\end_layout

\begin_layout Itemize
Dovrebbe essere utilizzato il 
\series bold
PHB CS
\series default
 per questa classe.
\end_layout

\begin_layout Itemize
Bisogna assicurarsi che questa classe riceva sempre una banda garantita.
\end_layout

\begin_layout Itemize
Una serie di protocolli che potrebbero aver bisogno della 
\emph on
Network Control Service Class
\emph default
 sono:
\end_layout

\begin_deeper
\begin_layout Itemize
OSPF, BGP, ISIS, RIP
\end_layout

\begin_layout Itemize
LSP setup con CR-LDP o RSVP-TE
\end_layout

\end_deeper
\begin_layout Itemize
Gli utenti non dovrebbero poter transitare sulla classe di network control.
\end_layout

\begin_layout Itemize
La classe raccomandata è la CS6.
\end_layout

\end_deeper
\begin_layout Itemize
La policy di conditioning raccomandata ai bordi della rete per il servizio
 
\series bold
\emph on
network control
\emph default
 
\series default
è:
\end_layout

\begin_deeper
\begin_layout Itemize
Nei punti di peering tra due reti DiffServ, dove ci sono degli SLA da rispettare
, i pacchetti marcati CS6 dovrebbero essere trattati con 
\series bold
\emph on
policing
\series default
\emph default
 (ad esempio utilizzando un 
\emph on
single rate + burst size
\emph default
: 
\series bold
sr+bs
\series default
).
\end_layout

\begin_layout Itemize
I pacchetti marcati CS6 che arrivano da sorgenti non fidate (per esempio
 terminali utente) dovrebbero essere scartati.
\end_layout

\begin_layout Itemize
Il servizio fondamentale offerto al servizio di 
\emph on
network control
\emph default
 è quello di 
\emph on
best-effort
\emph default
 con alta banda assicurata.
\end_layout

\begin_layout Itemize
Poiché questa classe di servizio viene utilizzata per inoltrare sia flussi
 elastici che inelastici, il servizio dovrebbe essere ingegnerizzato di
 modo che viene utilizzata 
\emph on
Active Queue Management 
\emph default
(
\series bold
AQM
\series default
) ai pacchetti marcati CS6.
\end_layout

\end_deeper
\begin_layout Itemize
La 
\series bold
classe di servizio OAM
\series default
 (Operations, Administration and Management) viene raccomandata per protocolli
 come SNMP, TFTP, FTP, Telnet, COPS
\end_layout

\begin_deeper
\begin_layout Itemize
Le applicazioni che utilizzano questo servizio richiedono una bassa perdita
 di pacchetti ma non sono sensibili anche ad alti delay
\end_layout

\begin_layout Itemize
La classe OAM dovrebbe essere servita utilizzando 
\series bold
PHB CS2
\series default
 che fornisce una garanzia di banda minima per una classe di servizio.
\end_layout

\begin_layout Itemize
Esempi di applicazioni che dovrebbero utilizzare OAM sono:
\end_layout

\begin_deeper
\begin_layout Itemize
Sistemi di controllo e configurazione dei dispositivi di rete (vedi SNMP,
 Telnet)
\end_layout

\begin_layout Itemize
Monitoring delle performance degli elementi di rete
\end_layout

\begin_layout Itemize
Sistemi di 
\begin_inset Quotes eld
\end_inset

allarme
\begin_inset Quotes erd
\end_inset

 su dispositivi di rete
\end_layout

\end_deeper
\begin_layout Itemize
Le applicazioni della classe di servizio OAM sono caratterizzata da un traffico
 con:
\end_layout

\begin_deeper
\begin_layout Itemize
Dimensione dei pacchetti variabile
\end_layout

\begin_layout Itemize
Flussi di traffico intermittenti
\end_layout

\begin_layout Itemize
Traffico con 
\series bold
\emph on
bursts
\end_layout

\begin_layout Itemize
Flussi elastici e inelastici 
\end_layout

\begin_layout Itemize
Traffico non sensibile ai delay
\end_layout

\end_deeper
\begin_layout Itemize
Anche qua si utilizza di solito una AQM.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Servizio di telefonia
\end_layout

\begin_deeper
\begin_layout Itemize
È una classe di servizio raccomandata per applicazioni che richiedono traffico
 
\emph on
\bar under
real-time
\emph default
\bar default
 a 
\bar under
basso ritardo
\bar default
 , 
\bar under
basso jitter
\bar default
 e 
\bar under
bassa packet loss
\bar default
 per sorgenti a traffico costante.
\end_layout

\begin_layout Itemize
Questo tipo di servizio dovrebbe essere utilizzato principalmente per la
 telefonia over IP.
\end_layout

\begin_layout Itemize
Quando inizia una telefonata, il sistema dovrebbe verificare che la rete
 abbia le capacità per gestirne il traffico rispettando la qualità del servizio
 (questa verifica viene fatta dal gateway SIP o dal gatekeeper H.323).
 È ovviamente necessario fare qualche conto per stabilire quante connessioni
 VoIP si possono accettare.
\end_layout

\begin_layout Itemize
Questa classe di servizio dovrebbe utilizzare la 
\series bold
PHB EF
\series default
 (Expedited Forwarding), ma anche altre PHB possono essere utilizzate (se
 configurate correttamente.
\end_layout

\begin_layout Itemize
La classe dovrebbe essere configurata per utilizzare un sistema di 
\emph on
priority quequing
\end_layout

\begin_layout Itemize
Le seguenti applicazioni dovrebbero utilizzare il servizio di telefonia:
\end_layout

\begin_deeper
\begin_layout Itemize
VoIP
\end_layout

\begin_layout Itemize
Voice-band data over IP (modem,fax)
\end_layout

\begin_layout Itemize
Fax over IP
\end_layout

\begin_layout Itemize
Emulazione di circuito su IP, virtual wire.
\end_layout

\end_deeper
\begin_layout Itemize
Le seguenti sono caratteristiche di traffico:
\end_layout

\begin_deeper
\begin_layout Itemize
Solitamente pacchetti di dimensione fissa per il VoIP (60,70,120 o 200 bytes)
\end_layout

\begin_layout Itemize
Pacchetti emessi a rate costante
\end_layout

\begin_layout Itemize
Admission control gestito come sopra descritto
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\series bold
Classe di servizio per il signaling
\end_layout

\begin_deeper
\begin_layout Itemize
È la classe raccomandata per sistemi di signaling sensibili al ritardo della
 rete, tipo signaling per VoIP o reti P2P.
\end_layout

\begin_layout Itemize
Signaling non è solo tra gli endpoints, ma anche tra gateways e signaling
 di interworking.
\end_layout

\begin_layout Itemize
È la classe utilizzata per il controllo di applicazioni e sessioni.
\end_layout

\begin_layout Itemize
Questa classe di servizio deve essere configurata in modo che la probabilità
 di drop o lungo ritardo a banda di picco sia molto bassa
\end_layout

\begin_layout Itemize
È consigliato l'utilizzo della 
\series bold
PHB CS5
\series default
 come classe di signaling
\end_layout

\begin_layout Itemize
Questa classe di servizio dovrebbe essere configurata per fornire una 
\bar under
banda minima garantita
\bar default
 per i pacchetti marcati CS5
\end_layout

\begin_layout Itemize
È consigliato l'utilizzo di un 
\emph on
Rate queuing system
\bar under
 
\emph default
\bar default
per questo tipo di classe.
\end_layout

\begin_layout Itemize
Applicazioni che dovrebbero utilizzare questa classe di servizio:
\end_layout

\begin_deeper
\begin_layout Itemize
P2P IP telephony
\end_layout

\begin_layout Itemize
P2P IP multimedia applications
\end_layout

\begin_layout Itemize
P2P real-time control function
\end_layout

\begin_layout Itemize
Client-server IP telephony
\end_layout

\begin_layout Itemize
Signaling for IPTV control (ad.
 es: IGMP)
\end_layout

\end_deeper
\begin_layout Itemize
Le caratteristiche del traffico sono:
\end_layout

\begin_deeper
\begin_layout Itemize
Dimensione variabile dei pacchetti
\end_layout

\begin_layout Itemize
Flussi di traffico intermittenti
\end_layout

\begin_layout Itemize
Traffico con bursts
\end_layout

\begin_layout Itemize
Messaggi di controllo sensibili al delay
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\series bold
Multimedia conferencing service class
\end_layout

\begin_deeper
\begin_layout Itemize
È raccomandata per applicazioni che richiedono servizio real-time per un
 flusso con rate adattivo, per esempio sistemi di conferenza H.323 che si
 adattano dinamicamente al cambiamento di banda.
\end_layout

\begin_layout Itemize
Anche qua, come per il VoIP, viene consigliato l'utilizzo di 
\series bold
PHB AF
\series default
 (Assured Forwarding), configurata per dare una garanzia di banda ai pacchetti
 marcati AF41,AF42 e AF43.
\end_layout

\begin_layout Itemize
Dovrebbe utilizzare un sistema di 
\emph on
Rate queuing system
\emph default
.
\end_layout

\begin_layout Itemize
Applicazioni che utilizzano questa classe:
\end_layout

\begin_deeper
\begin_layout Itemize
Video conferencing con H.323/SIP
\end_layout

\begin_layout Itemize
Alcuni tipi di VPN basate su IP
\end_layout

\begin_layout Itemize
Applicazioni interattive, time-critical o mission-critical
\end_layout

\end_deeper
\begin_layout Itemize
Caratteristiche del traffico
\end_layout

\begin_deeper
\begin_layout Itemize
Pacchetti di dimensione variabile
\end_layout

\begin_layout Itemize
Maggiore è il rate, maggiore diventa la dimensione dei pacchetti.
\end_layout

\begin_layout Itemize
Intervallo di emissione dei pacchetti costante
\end_layout

\begin_layout Itemize
Rate variabile
\end_layout

\begin_layout Itemize
La sorgente è in grado di ridurre il suo rate di trasmissione se si accorge
 di perdita di pacchetti al ricevitore
\end_layout

\end_deeper
\begin_layout Itemize
Abbiamo visto che è consigliato utilizzare AF PHB, in particolare dato un
 rate 
\begin_inset Formula $A$
\end_inset

 ed un rate 
\begin_inset Formula $B$
\end_inset

, con 
\begin_inset Formula $A<B$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Itemize
AF41: banda fino al rate 
\begin_inset Formula $A$
\end_inset


\end_layout

\begin_layout Itemize
AF42: banda tra 
\begin_inset Formula $A$
\end_inset

 e 
\begin_inset Formula $B$
\end_inset


\end_layout

\begin_layout Itemize
AF43: banda superiore a 
\begin_inset Formula $B$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Nel caso in cui utilizziamo apparecchiature H.323, il tipo di marking consigliato
 è il seguente:
\end_layout

\begin_deeper
\begin_layout Itemize
AF41: H.323 audio stream RTP/UDP
\end_layout

\begin_layout Itemize
AF41: H.323 video control RTCP/TCP
\end_layout

\begin_layout Itemize
AF41: H.323 video stream fino a rate 
\begin_inset Formula $A$
\end_inset


\end_layout

\begin_layout Itemize
AF42: H.323 video stream tra rate 
\begin_inset Formula $A$
\end_inset

 e rate 
\begin_inset Formula $B$
\end_inset


\end_layout

\begin_layout Itemize
AF43: H.323 video stream oltre il rate 
\begin_inset Formula $B$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Il conditioning consigliato è: 
\emph on
two rate, three color marker
\emph default
.
\end_layout

\begin_layout Itemize
Il servizio offerto al multimedia streaming è sostanzialmente best-effort
 con rate e ritardo controllati (non fissi ma controllati).
\end_layout

\begin_layout Itemize
Solitamente in un sistema di video streaming, anche una perdita dell'1%
 comporta una diminuizione del rate di trasmissione (cambiando codec magari).
\end_layout

\begin_layout Itemize
Quindi solitamente si utilizza un sistema basato su AQM per spingere l'applicazi
one a modificare il rate di video encoding.
\end_layout

\begin_layout Itemize
La probabilità di perdita di AF41 non deve superare quella di AF42, che
 non deve superare quella di AF43.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Real-time interactive service class
\end_layout

\begin_deeper
\begin_layout Itemize
È raccomandata per applicazioni che richiedono bassa perdita, basso jitter
 e ritardo molto basso per sorgenti di traffico a rate variabile
\end_layout

\begin_layout Itemize
Esempi di applicazioni sono quelle di 
\emph on
video conferencing 
\emph default
o
\emph on
 interactive gaming
\emph default
.
 Sono le applicazioni che non sono in grado di regolare gli encoding rates
 o di marcare i pacchetti con indicazioni di 
\begin_inset Quotes eld
\end_inset

importanza
\begin_inset Quotes erd
\end_inset

 diversa.
\end_layout

\begin_layout Itemize
La banda e il numero di connessioni 
\emph on
real-time
\emph default
 sulla rete di backbone deve essere monitorata.
\end_layout

\begin_layout Itemize
Viene consigliato l'utilizzo della 
\series bold
PHB CS4
\series default
, di modo da garantire alta affidabilità di banda per i pacchetti marcati
 CS4.
\end_layout

\begin_layout Itemize
Dovrebbe essere utilizzato 
\emph on
Rate Queuing
\end_layout

\begin_layout Itemize
Applicazioni tipiche:
\end_layout

\begin_deeper
\begin_layout Itemize
Interactive gaming and control
\end_layout

\begin_layout Itemize
Video conferencing senza rate adattivo
\end_layout

\begin_layout Itemize
Alcuni servizi di IP VPN
\end_layout

\begin_layout Itemize
Inelastico, interattivo, time-critical, mission-critical che richiedono
 delay molto basso
\end_layout

\end_deeper
\begin_layout Itemize
Caratteristiche del traffico:
\end_layout

\begin_deeper
\begin_layout Itemize
Pacchetti di lunghezza variabile
\end_layout

\begin_layout Itemize
Rate variabile
\end_layout

\begin_layout Itemize
I pacchetti persi sono solitamente ignorati dall'applicazione
\end_layout

\end_deeper
\begin_layout Itemize
Il servizio classico offerto è una sorta di 
\emph on
best-effort
\emph default
 
\begin_inset Quotes eld
\end_inset

potenziato
\begin_inset Quotes erd
\end_inset

, con rate e delay controllato.
\end_layout

\begin_layout Itemize
Poiché questo tipo di traffico non reagisce alle perdite dei pacchetti in
 modo dinamico, non ha senso l'utilizzo di un sistema AQM.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Multimedia streaming
\end_layout

\begin_deeper
\begin_layout Itemize
Applicazioni che necessitano inoltro dei pacchetti 
\emph on
near-real-time
\emph default
 da sorgenti a rate elastico
\end_layout

\begin_layout Itemize
Il traffico viene bufferizzato alla sorgente o destinazione,quindi è meno
 sensibile al delay e jitter
\end_layout

\begin_layout Itemize
È consigliato l'utilizzo della 
\series bold
PHB AF
\series default
 (Assured Forwarding).
 In particolare AF31, AF32, AF33.
\end_layout

\begin_layout Itemize
È consigliato anche l'utilizzo di un 
\emph on
rate queuing system.
\end_layout

\begin_layout Itemize
Applicazioni tipiche:
\end_layout

\begin_deeper
\begin_layout Itemize
Buffered video/audio streaming
\end_layout

\begin_layout Itemize
Webcasts
\end_layout

\begin_layout Itemize
IP VPN service che specifica due rate diversi ed è meno sensibile al ritardo
 e jitter.
\end_layout

\end_deeper
\begin_layout Itemize
Caratteristiche del traffico:
\end_layout

\begin_deeper
\begin_layout Itemize
pacchetti di lunghezza variabile
\end_layout

\begin_layout Itemize
All'aumento del rate aumenta la dimensione dei pacchetti
\end_layout

\begin_layout Itemize
Rate variabile
\end_layout

\begin_layout Itemize
Flussi elastici
\end_layout

\begin_layout Itemize
Alcuni burst iniziali per alcune applicazioni
\end_layout

\end_deeper
\begin_layout Itemize
Soglie della PHB AF:
\end_layout

\begin_deeper
\begin_layout Itemize
AF41: fino al rate 
\begin_inset Formula $A$
\end_inset


\end_layout

\begin_layout Itemize
AF42: Tra il rate 
\begin_inset Formula $A$
\end_inset

 ed il rate 
\begin_inset Formula $B$
\end_inset


\end_layout

\begin_layout Itemize
AF43: superiore al rate 
\begin_inset Formula $B$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $A$
\end_inset

 approssima la somma dei rate medi, 
\begin_inset Formula $B$
\end_inset

 approssima la somma dei valori di picco
\end_layout

\end_deeper
\begin_layout Itemize
Il servizio offerto è 
\emph on
best-effort
\emph default
 con rate e delay controllati
\end_layout

\begin_layout Itemize
Poiché il traffico è elastico e risponde dinamicamente alla perdita di pacchetti
, AQM dovrebbe essere utilizzato per ridurre il rate di inoltro al valore
 minimo garantito nei punti di congestione.
\end_layout

\begin_layout Itemize
La probabilità di perdita di AF31 non deve superare quella di AF32, che
 non deve superare quella di AF33.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Broadcast video service class
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
È raccomandata per applicazioni che richiedono inoltro dei pacchetti 
\emph on
near-real-time
\emph default
, perdita dei pacchetti molto bassa.
\end_layout

\begin_layout Itemize
Le applicazioni tipiche sono: broadcast TV, streaming live, on-demand applicatio
ns, videosorveglianza
\end_layout

\begin_layout Itemize
In questo caso la 
\series bold
PHB CS3
\series default
 dovrebbe essere utilizzata.
\end_layout

\begin_layout Itemize
Un sistema di 
\emph on
Rate Queuing 
\emph default
dovrebbe essere adottato.
\end_layout

\begin_layout Itemize
Applicazioni:
\end_layout

\begin_deeper
\begin_layout Itemize
Videosorveglianza, sicurezza
\end_layout

\begin_layout Itemize
TV broadcast (anche HDTV)
\end_layout

\begin_layout Itemize
Video on-demand (unicast)
\end_layout

\begin_layout Itemize
Streaming di eventi live
\end_layout

\end_deeper
\begin_layout Itemize
Le caratteristiche del traffico sono:
\end_layout

\begin_deeper
\begin_layout Itemize
Grandezza dei pacchetti variabile
\end_layout

\begin_layout Itemize
Con rate superiore, maggiore densità di pacchetti grossi
\end_layout

\begin_layout Itemize
Misto di rate costante e variabile
\end_layout

\begin_layout Itemize
Tempi di emissione fissa di pacchetti.
\end_layout

\begin_layout Itemize
Flussi inelastici.
\end_layout

\end_deeper
\begin_layout Itemize
Solitamente questo tipo di applicazioni non reagisce alla perdita di pacchetti
 ,quindi l'utilizzo di AQM è inutile.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Low-latency data service class
\end_layout

\begin_deeper
\begin_layout Itemize
Raccomandato per applicazioni elastiche e responsive (tipicamente client/server)
, dove il client invia una richiesta breve e il server invia una risposta
 lunga.
\end_layout

\begin_layout Itemize
Un esempio tipico di questo traffico è quello generato dal browsing web
 di un utente (poche richieste cliccando su dei link, ma lunghe risposte
 dal server).
\end_layout

\begin_layout Itemize
Lo scopo di questa classe è quello di dare una buona risposta ai flussi
 TCP 
\emph on
short-lived
\end_layout

\begin_layout Itemize
La 
\series bold
PHB AF
\series default
 (Assured Forwarding) dovrebbe essere utilizzata (AF21,AF22,AF23)
\end_layout

\begin_layout Itemize
Un sistema di 
\emph on
rate queuing 
\emph default
dovrebbe essere utilizzato.
\end_layout

\begin_layout Itemize
Applicazioni:
\end_layout

\begin_deeper
\begin_layout Itemize
Client/server
\end_layout

\begin_layout Itemize
Web-based
\end_layout

\begin_layout Itemize
Transazioni di carte di credito
\end_layout

\begin_layout Itemize
Trasferimenti bancari
\end_layout

\begin_layout Itemize
Applicazioni ERP (tipo SAP)
\end_layout

\begin_layout Itemize
Servizi di VPN che supportano CIR (Committed Information Rate) con fino
 a due bust sizes
\end_layout

\end_deeper
\begin_layout Itemize
Caratteristiche del traffico:
\end_layout

\begin_deeper
\begin_layout Itemize
Dimensione variabile dei pacchetti
\end_layout

\begin_layout Itemize
Emissione variabile di pacchetti con bursts della finestra TCP (iniziali)
\end_layout

\begin_layout Itemize
Bursts di traffico brevi
\end_layout

\end_deeper
\begin_layout Itemize
AQM e rate queuing dovrebbero essere utilizzati.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
High-Throughput data service class
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
È raccomandato per applicazioni elastiche che richiedono inoltro dei pacchetti
 per tempo, sorgenti a rate variabile.
 In generale si vogliono fornire buone performance a connessioni TCP 
\emph on
long-lived 
\emph default
(il protocollo FTP è un esempio classico).
\end_layout

\begin_layout Itemize
La 
\series bold
PHB AF 
\series default
(Assured Forwarding) dovrebbe essere utilizzato (AF11, AF12 e AF13)
\end_layout

\begin_layout Itemize
AQM e 
\emph on
rate queuing
\emph default
 dovrebbero essere utilizzati.
\end_layout

\begin_layout Itemize
Applicazioni:
\end_layout

\begin_deeper
\begin_layout Itemize
Applicazioni 
\emph on
store-and-forward
\end_layout

\begin_layout Itemize
Applicazioni di 
\emph on
file-transfer
\end_layout

\begin_layout Itemize
Email
\end_layout

\begin_layout Itemize
Servizi VPN che supportano due rate di trasmissione (CIR e 
\emph on
peak information rate
\emph default
)
\emph on
.
\end_layout

\end_deeper
\begin_layout Itemize
Caratteristiche del traffico:
\end_layout

\begin_deeper
\begin_layout Itemize
Dimensione variabile dei pacchetti
\end_layout

\begin_layout Itemize
Rate di emissione dei pacchetti variabile.
\end_layout

\begin_layout Itemize
Rate variabile con bursts di pacchetti e aumento della finestra del TCP.
\end_layout

\end_deeper
\begin_layout Itemize
Viene raccomandato l'uso di un conditioning fatto con un 
\emph on
two rate three color marker
\emph default
.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Standard service class
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
È la classe raccomandata per il traffico non classificato
\end_layout

\begin_layout Itemize
È il tipico 
\emph on
best-effort
\emph default
.
\end_layout

\begin_layout Itemize
Questa classe può avere una garanzia di banda minima.
\end_layout

\begin_layout Itemize
Dovrebbe essere utilizzato 
\emph on
Rate Queuing
\emph default
.
\end_layout

\begin_layout Itemize
DSCP di tipo
\series bold
 DF
\series default
 (Default Forwarding): 00000000
\end_layout

\begin_layout Itemize
Applicazioni:
\end_layout

\begin_deeper
\begin_layout Itemize
Servizi di rete, DNS, DHCP
\end_layout

\begin_layout Itemize
Qualunque flusso non differenziato trasportato nella rete 
\emph on
diffserv
\end_layout

\end_deeper
\begin_layout Itemize
Caratteristiche: Traffico non deterministico, un misto di tutte le caratteristic
he viste.
\end_layout

\begin_layout Itemize
Non è richiesto conditioning.
\end_layout

\begin_layout Itemize
Solitamente si utilizza AQM per garantire un ritardo massimo (piuttosto
 alto).
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
Low-priority service class
\series default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Qualunque applicazione con bassa priorità che utilizza TCP e che l'utente
 accetta di ricevere senza garanzie.
\end_layout

\begin_layout Itemize
Diverse applicazioni best-effort possono eventualmente decidere di essere
 marcate come 
\emph on
low-priority
\emph default
.
\end_layout

\begin_layout Itemize
Il traffico è di tipo 
\emph on
non-real-time
\emph default
 ed elastico.
\end_layout

\begin_layout Itemize
Non c'è nessuna richiesta di conditioning.
\end_layout

\begin_layout Itemize
Il marking DSCP consigliato è 
\series bold
CS1
\series default
 (Class Selector 1)
\end_layout

\begin_layout Itemize
Il servizio fondamentale è uguale al servizio best-effort, senza però nessuna
 garanzia di banda.
\end_layout

\begin_layout Itemize
Si può eventualmente trattare con uno specifico SLA.
\end_layout

\begin_layout Itemize
Applicazioni:
\end_layout

\end_deeper
\begin_layout Section*
Design di reti IP con QoS
\end_layout

\begin_layout Standard
Per fare analisi del traffico utilizzeremo dei modelli stocastici.
\end_layout

\begin_layout Itemize
Il modelling del traffico è un problema serio, di solito si utilizzano modelli
 astratti come ad esempio le catene di Markov.
 Questo tipo di modelli forniscono un tool per dimensionare le reti, ma
 hanno una serie di problemi:
\end_layout

\begin_deeper
\begin_layout Itemize
Le sorgenti 
\bar under
reali
\bar default
 di traffico sono difficili da modellare utilizzando le catene di Markov
\end_layout

\begin_layout Itemize
Inoltre l'analisi utilizzando le catene di Markov è complessa perché il
 numero di stati necessario per l'analisi aumenta esponenzialmente man mano
 che le sorgenti aumentano.
\end_layout

\begin_layout Itemize
È necessaria analisi computerizzata
\end_layout

\end_deeper
\begin_layout Standard
L'analisi deterministica delle reti tende a fornire dei valori che portano
 ad un design molto conservativo nel caso di SLA statistiche.
\end_layout

\begin_layout Standard
I modelli statistici risolvono questo problema ma gli approcci classici
 sono molti conservativi
\end_layout

\begin_layout Standard

\series bold
\emph on
Bounded variance network calculus
\series default
\emph default
 è una nuova disciplina che tenta di modellizzare i sistemi reali.
 Quindi svilupperemo una teoria.
\end_layout

\begin_layout Itemize
Riguardo la traffico, utilizzeremo una 
\series bold
\emph on
two-moment description
\series default
\emph default
 del traffico cumulativo.
 
\end_layout

\begin_deeper
\begin_layout Itemize
Quindi vengono utilizzate solo media e varianza.
 
\end_layout

\begin_layout Itemize
Il traffico è un processo casuale 
\bar under
caratterizzato dal rate istantaneo
\bar default
.
\end_layout

\begin_layout Itemize
Se osserviamo un link nella rete, possiamo definire una variabile 
\begin_inset Formula $X\left(t\right)$
\end_inset

 che rappresenta il numero di bits che attraversano il link (punto di osservazio
ne) in un intervallo di tempo 
\begin_inset Formula $t$
\end_inset

.
 È la 
\begin_inset Quotes eld
\end_inset


\emph on
traffic curve
\emph default

\begin_inset Quotes erd
\end_inset

 che abbiamo già visto.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-051.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Però possiamo considerare il valore medio di 
\begin_inset Formula $X\left(t\right)$
\end_inset

,cioè 
\begin_inset Formula $E\left(X\left(t\right)\right)$
\end_inset

, che rappresenta il 
\begin_inset Quotes eld
\end_inset


\emph on
primo-momento
\emph default

\begin_inset Quotes erd
\end_inset

.
 Allo stesso modo possiamo considerare anche la varianza di 
\begin_inset Formula $X\left(t\right)$
\end_inset

, cioè 
\begin_inset Formula $Var\left(X\left(t\right)\right)$
\end_inset

, che è il 
\begin_inset Quotes eld
\end_inset


\emph on
secondo-momento
\emph default

\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
Prendiamo una curva reale di traffico e calcoliamo questi due momenti per
 capire cosa rappresentano.
\end_layout

\begin_layout Itemize
Dato un tempo di riferimento 
\begin_inset Formula $t^{*}$
\end_inset

diciamo che 
\begin_inset Formula $X\left(t^{*}\right)$
\end_inset

 è una variabile stocastica.
 Ognuno dei valori di questa variabile ha una densità di probabilità 
\begin_inset Formula $f_{X\left(t^{*}\right)}\left(x\right)$
\end_inset

.
 Questa densità ha un valore medio 
\begin_inset Formula $E\left(X\left(t^{*}\right)\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
La curva 
\begin_inset Formula $E\left(x\left(t\right)\right)$
\end_inset

 è una curva lineare, pari a 
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=m\cdot t
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Dove 
\begin_inset Formula $m$
\end_inset

 è il rate istantaneo del traffico (
\begin_inset Formula $r$
\end_inset

) 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-052.png
	scale 30

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
E la 
\begin_inset Formula $Var\left(X\left(t\right)\right)$
\end_inset

? Ad un dato istante di tempo, la quantità di traffico cumulativa è un valore
 casuale che ha una media e ovviamente anche una varianza.
\end_layout

\begin_deeper
\begin_layout Itemize
Se disegnamo il grafico di 
\begin_inset Formula $Var\left(X\left(t\right)\right)$
\end_inset

 cosa otteniamo?
\end_layout

\begin_layout Itemize
È una curva che è solitamente non-lineare.
\end_layout

\begin_layout Itemize

\series bold
L'unico 
\series default
caso in cui la varianza è lineare è il caso in cui il traffico è completamente
 di tipo 
\emph on
poisson
\emph default
.
 Tuttavia è piuttosto raro.
\end_layout

\begin_layout Itemize
La curva della varianza può avere qualitativamente tanti tipi diversi di
 forme a seconda del tipo di sorgente del traffico.
\end_layout

\begin_layout Itemize
Abbiamo vari tipi di 
\bar under
sorgenti di traffico
\bar default
:
\end_layout

\begin_deeper
\begin_layout Itemize
Sorgente 
\series bold
deterministica
\series default
 (rate istantaneo costante)
\end_layout

\begin_deeper
\begin_layout Itemize
Abbiamo già visto come dimensionare il traffico in questo caso quando abbiamo
 visto la EF PHB, quindi non è lo scopo dello studio che faremo qua di seguito.
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
Bit rate 
\emph default
variabile, 
\series bold
\emph on
short-range-dependent
\series default
\emph default
 (
\series bold
SRD
\series default
) (ad esempio dati e VoIP)
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
Asintoticamente lineare
\series default
.
 Non è lineare per valori piccoli di 
\begin_inset Formula $t$
\end_inset

, ma diventa sempre più lineare man mano che passa il tempo.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-053.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize
Se assumiamo una soglia massima lineare come varianza facciamo una stima
 del traffico che tende ad essere sempre conservativa
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
Bit rate 
\emph default
variabile, 
\series bold
\emph on
long-range-dependent 
\series default
\emph default
(
\series bold
LRD
\series default
)
\series bold
\emph on
 
\series default
\emph default
(Traffico dati misto)
\end_layout

\begin_deeper
\begin_layout Itemize
È il caso 
\series bold
\bar under
più comune su Internet
\series default
\bar default
.
\end_layout

\begin_layout Itemize
Ha una varianza di tipo parabolico: 
\begin_inset Formula $Var\left(X\left(t\right)\right)=k\cdot t^{\gamma}$
\end_inset

 con 
\begin_inset Formula $\gamma>1$
\end_inset

.
 Questo è il caso di traffico 
\series bold
\emph on
long-range dependent
\series default
\emph default
.
 È anche chiamato 
\series bold
\emph on
fractal traffic
\series default
\emph default
.
 È anche chiamato 
\series bold
\emph on
self-similar traffic
\series default
\emph default
.
 Purtroppo, oltre ad essere il caso più frequente, è anche il più difficile
 da trattare.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-054.png
	scale 30

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
Esempio VoIP
\end_layout

\begin_layout Standard
Vediamo un esempio di una sorgente di traffico SRD (
\series bold
\emph on
short-range dependent
\series default
\emph default
): un codec VoIP, in particolare un coder di tipo VBR: Variable Bit Rate.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-055.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Quando siamo nello stato ON trasmettiamo 
\begin_inset Formula $P\,\left[\frac{bits}{s}\right]$
\end_inset

, quando siamo in OFF trasmettiamo 
\begin_inset Formula $0\,\left[\frac{bits}{s}\right]$
\end_inset

.
\end_layout

\begin_layout Standard
Quando siamo nello stato ON assumiamo che 
\begin_inset Formula $P=\gamma\cdot L$
\end_inset

 dove 
\begin_inset Formula $\gamma$
\end_inset

 è il numero di pacchetti al secondo e 
\begin_inset Formula $L$
\end_inset

 è il numero di bits per ogni pacchetto.
\end_layout

\begin_layout Standard
Nei pacchetti VoIP 
\begin_inset Formula $L$
\end_inset

 è la lunghezza media dei pacchetti in bit.
 Però è un valore variabile, quindi ha anche la sua varianza 
\begin_inset Formula $\sigma^{2}\:\left[bit^{2}\right]$
\end_inset

.
 Tuttavia solitamente 
\begin_inset Formula $\sigma=0$
\end_inset

.
\end_layout

\begin_layout Standard
Questa è una 
\emph on
short-range dependent traffic source.
\end_layout

\begin_layout Standard
Qual'è il valore medio di 
\begin_inset Formula $X\left(t\right)$
\end_inset

 per questo tipo di sorgente (dimostrazione saltata): 
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=\gamma\cdot L\cdot\frac{\lambda}{\lambda+\mu}\cdot t
\]

\end_inset


\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)\simeq\frac{\mu}{\lambda+\mu}\cdot\gamma\cdot\left(L^{2}+\sigma^{2}\right)\cdot t-2\cdot\frac{\lambda\cdot\mu}{\left(\lambda+\mu\right)^{3}}\cdot\gamma^{2}\cdot L^{2}\cdot e^{-\left(\lambda+\mu\right)\cdot t}
\]

\end_inset


\end_layout

\begin_layout Standard
Questa espressione della varianza è in realtà una approssimazione del risultato
 reale (molto più lungo).
\end_layout

\begin_layout Standard
Come vediamo la varianza è composta da una prima parte lineare ed una seconda
 parte non lineare.
 Tuttavia questa parte non lineare tende a 0 man mano che 
\begin_inset Formula $t$
\end_inset

 aumenta.
 Quindi la parte non-lineare dopo un po' di tempo tende a svanire.
 Ecco perché prima abbiamo disegnato un grafico che tende asintoticamente
 ad essere lineare.
 
\series bold
È traffico con poca memoria
\series default
.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var_{LE}\left(x\left(t\right)\right)=\frac{\mu}{\lambda+\mu}\cdot\gamma\cdot\left(L^{2}+\sigma^{2}\right)\cdot t
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var_{LE}\left(x\left(t\right)\right)\,\geq\, Var\left(x\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $Var_{LE}\left(x\left(t\right)\right)$
\end_inset

 è il linear envelope of variance.
 Quindi come vediamo ci resta solo un termine che è una stima lineare per
 eccesso della varianza.
\end_layout

\begin_layout Subsection*
Flussi aggregati
\end_layout

\begin_layout Standard
Ci interessa sempre calcolare 
\begin_inset Formula $E\left(x\left(t\right)\right)$
\end_inset

 e 
\begin_inset Formula $Var\left(x\left(t\right)\right)$
\end_inset

 per evitare di lavorare con i processi stocastici 
\begin_inset Formula $x\left(t\right)$
\end_inset

.
 Con media e varianza invece lavoriamo sempre con 
\begin_inset Quotes eld
\end_inset

semplici
\begin_inset Quotes erd
\end_inset

 funzioni.
\end_layout

\begin_layout Standard
È fondamentale però che troviamo un modo, data media e varianza di tanti
 microflussi, di trovare la media e varianza del flusso aggregato.
\end_layout

\begin_layout Standard
Se ad esempio abbiamo uno scheduler FIFO con uscita 
\begin_inset Formula $C$
\end_inset

 e dobbiamo fare analisi sul traffico, ci basta sapere 
\begin_inset Formula $E\left(x\left(t\right)\right)$
\end_inset

 e 
\begin_inset Formula $Var\left(x\left(t\right)\right)$
\end_inset

 del traffico in ingresso e calcoliamo tutto ciò che ci serve (ritardo,
 ...).
\end_layout

\begin_layout Standard
Però nella realtà non abbiamo un singolo flusso che entra in uno scheduler,
 ma tanti piccoli flussi.
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-056.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Cosa facciamo in questo caso? In questo caso avremo 
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

, 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

, ..., 
\begin_inset Formula $x_{n}\left(t\right)$
\end_inset

.
 Quindi 
\begin_inset Formula $x\left(t\right)$
\end_inset

 in ingresso allo scheduler sarà 
\begin_inset Formula $x\left(t\right)=x_{1}\left(t\right)+x_{2}\left(t\right)+....+x_{n}\left(t\right)$
\end_inset

.
 
\series bold
Se facciamo l'assunzione che i flussi siano statisticamente indipendenti
 tra di loro
\series default
: 
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=E\left(x_{1}\left(t\right)+x_{2}\left(t\right)+....+x_{n}\left(t\right)\right)=E\left[x_{1}\left(t\right)\right]+E\left[x_{2}\left(t\right)\right]+...+E\left[x_{n}\left(t\right)\right]
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)=Var\left(x_{1}\left(t\right)+x_{2}\left(t\right)+....+x_{n}\left(t\right)\right)=Var\left(x_{1}\left(t\right)\right)+Var\left(x_{2}\left(t\right)\right)+...+Var\left(x_{n}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Nel caso del valore medio possiamo anche andare oltre:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=m_{1}\cdot t+m_{2}\cdot t+...+m_{n}\cdot t=t\cdot\sum_{i=1}^{N}m_{i}
\]

\end_inset


\end_layout

\begin_layout Standard
Mentre per la varianza:
\begin_inset Formula 
\[
Var\left(X\left(t\right)\right)=\sum_{i=1}^{n}Var\left(X_{i}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Subsection*
Rappresentare i flussi di traffico
\end_layout

\begin_layout Standard
Un flusso di traffico può essere rappresentato tramite il suo 
\series bold
rate istantaneo
\series default
 
\begin_inset Formula $r\left(t\right)$
\end_inset

, misurato in 
\begin_inset Formula $\left[\frac{bit}{s}\right]$
\end_inset

, definito come 
\emph on

\begin_inset Quotes eld
\end_inset

il numero di bits trasferiti in un intervallo di tempo istantaneo
\emph default

\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Itemize
Nel seguito considereremo flussi di traffico 
\series bold
stazionari
\series default
, dunque 
\begin_inset Formula $r\left(t\right)$
\end_inset

 avrà un valore medio stazionario
\begin_inset Formula 
\[
m=E\left[r\left(t\right)\right]
\]

\end_inset


\end_layout

\begin_layout Itemize
Il 
\bar under
traffico cumulativo trasmesso in un intervallo di tempo di durata 
\begin_inset Formula $t$
\end_inset


\bar default
 è una importante caratteristica di uno stream di traffico, ci riferiremo
 ad esso indicandolo con 
\begin_inset Formula 
\[
X\left(t_{0},t_{0}+t\right)
\]

\end_inset

Dove 
\begin_inset Formula $t_{0}$
\end_inset

 è un tempo di riferimento.
\end_layout

\begin_layout Itemize
Poiché assumiamo che il traffico sia stazionario, la distribuzione di 
\begin_inset Formula $X\left(t_{0},\, t_{0}+t\right)$
\end_inset

 è uguale alla distribuzione di 
\begin_inset Formula $X\left(t_{1},t_{1}+t\right)$
\end_inset

 per ogni 
\begin_inset Formula $t_{1}$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Itemize
Quindi il tempo di riferimento iniziale può essere trascurato e , statisticament
e, 
\begin_inset Formula $X\left(t\right)$
\end_inset

 rappresenta completamente il processo del traffico.
\end_layout

\end_deeper
\begin_layout Itemize
Il rate istantaneo e quello cumulativo sono correlati dalle seguenti relazioni:
\begin_inset Formula 
\[
r\left(t\right)=\frac{dX\left(t\right)}{dt}
\]

\end_inset


\begin_inset Formula 
\[
X\left(t\right)=\int_{0}^{t}r\left(\tau\right)\, d\tau
\]

\end_inset


\end_layout

\begin_layout Itemize
Nel caso del 
\bar under
traffico cumulativo 
\bar default
e ipotesi stazionaria, abbiamo che:
\begin_inset Formula 
\[
E\left(X\left(t\right)\right)=E\left(\int_{0}^{t}r\left(\tau\right)\, d\tau\right)=\int_{0}^{t}E\left(r\left(\tau\right)\right)\, d\tau=mt
\]

\end_inset


\begin_inset Formula 
\[
Var\left(X\left(t\right)\right)=2\int_{0}^{t}\left(R_{r}\left(\tau\right)-m^{2}\right)\left(t-\tau\right)\, d\tau
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Dove 
\begin_inset Formula $R_{r}\left(\tau\right)$
\end_inset

 è la funzione di autocorrelazione del rate istantaneo.
\end_layout

\begin_layout Itemize
L'autocovarianza del rate istantaneo è definita come:
\begin_inset Formula 
\[
C_{r}\left(\tau\right)=R_{r}\left(\tau\right)-m^{2}
\]

\end_inset


\end_layout

\begin_layout Itemize
La forma della funzione di autocovarianza determina il comportamento di
 accodamento del traffico
\end_layout

\begin_layout Itemize
Il traffico di tipo 
\bar under
short-range dependent
\bar default
 ha una funzione di autocovarianza che decresce esponenzialmente man mano
 che passa il tempo, cioè
\begin_inset Formula 
\[
C_{r}\left(t\right)\sim e^{-t}\;\text{per }t\rightarrow\infty
\]

\end_inset


\end_layout

\begin_layout Itemize
Il traffico di tipo 
\bar under
long-range dependent
\bar default
 ha una funzione di autocovarianza sub-esponenziale
\begin_inset Formula 
\[
C_{r}\left(t\right)\sim t^{-\gamma}\:\text{per }t\rightarrow\infty\,,\,\gamma>0
\]

\end_inset


\end_layout

\begin_layout Itemize
Il profilo di varianza per il traffico cumulativo di un flusso 
\emph on
short-range dependent
\emph default
 è asintoticamente lineare per il tempo crescente:
\begin_inset Formula 
\[
Var\left(X\left(t\right)\right)\sim kt\:\text{per}\: t\rightarrow\infty,\: k>0
\]

\end_inset


\end_layout

\begin_layout Itemize
Invece, il profilo di varianza per il traffico cumulativo di un flusso 
\emph on
long-range dependent
\emph default
 cresce con una legge esponenziale:
\begin_inset Formula 
\[
Var\left(X\left(t\right)\right)\sim kt^{2-\gamma}\:\text{for}\: t\rightarrow\infty,\: k>0
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Questo è il caso della 
\series bold
maggior parte del traffico di Internet
\series default
.
\end_layout

\end_deeper
\begin_layout Itemize
Viene mostrato che il comporamento di accodamento di un flusso di traffico
 dipende dal profilo della varianza.
\end_layout

\end_deeper
\begin_layout Standard
A volte il traffico 
\series bold
\emph on
long-range dependent
\series default
\emph default
 è anche chiamato 
\emph on
self-similar traffic
\emph default
 o 
\emph on
fractal traffic
\emph default
.
\end_layout

\begin_layout Itemize

\emph on
Self-similar o factal traffic
\emph default
 (sono sinonimi tra loro):
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x\left(t\right)\,\overset{d}{=}\, a^{-H}\cdot x\left(at\right)\quad\forall a>0,\, t\geq0
\]

\end_inset


\end_layout

\begin_layout Standard
Dove 
\begin_inset Formula $H$
\end_inset

 è il parametro di Hurst del traffico.
\end_layout

\begin_layout Standard
Cosa siginifca 
\begin_inset Formula $\overset{d}{=}$
\end_inset

significa che tutte le distribuzioni di probabilità sono uguali per i due
 processi.
 
\series bold
I due processi sono uguali se tutte le loro densità di probabilità sono
 uguali tra loro
\series default
.
\end_layout

\begin_layout Standard
Però 
\series bold
\emph on
\bar under
Self-similar o factal traffic
\emph default
 non è sinonimo di 
\emph on
long-range dependent
\series default
\emph default
\bar default
, però quasi tutti i processi 
\emph on
fractal processes
\emph default
 sono 
\emph on
long-range
\emph default
 e viceversa.
 Non è vero matematicamente ma nella pratica sì.
\end_layout

\begin_layout Standard
Dopo questa lunga discussione tiriamo fuori due modelli di traffico:
\end_layout

\begin_layout Itemize

\series bold
SRD
\series default
:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=r\cdot t
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)=r\cdot b\cdot t
\]

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r$
\end_inset

 è il rate istantaneo del traffico (prima l'avevamo chiamato 
\begin_inset Formula $m$
\end_inset

).
\end_layout

\begin_layout Itemize
\begin_inset Formula $b$
\end_inset

 è una costante in 
\begin_inset Formula $\left[bit\cdot s\right]$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
LRD
\series default
 (o 
\emph on
fractional gaussian traffic
\emph default
):
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=r\cdot t
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)=r\cdot b\cdot t^{2H}
\]

\end_inset


\end_layout

\begin_layout Standard
Dove:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\frac{1}{2}\leq H<1
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Ci accorgiamo che 
\series bold
SRD è un caso particolare di LRD
\series default
 nel caso 
\begin_inset Formula $H=\frac{1}{2}$
\end_inset

.
 L'aumento di 
\begin_inset Formula $H$
\end_inset

 significa l'aumento di memoria.
\end_layout

\begin_layout Standard
Nelle slides ci sono alcuni esempi del rate istantaneo del traffico.
 Ce ne sono 3:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-057.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Il primo è senza memoria, il secondo è con 
\begin_inset Formula $H=0.7$
\end_inset

 e poi un ultimo con tanta memoria e 
\begin_inset Formula $H=0.9$
\end_inset

 .
\end_layout

\begin_layout Standard
E cosa ce ne facciamo adesso?
\end_layout

\begin_layout Standard
Immaginiamo di avere uno scheduler a più classi, quindi 
\begin_inset Formula $n$
\end_inset

 buffers con 
\begin_inset Formula $n$
\end_inset

 flussi in ingresso (possono essere multipli ma li riassumiamo come uno
 unico come abbiamo visto prima usando media e varianza).
\end_layout

\begin_layout Standard
Ora come facciamo a correlare le informazioni che abbiamo sul traffico,
 con il 
\series bold
ritardo
\series default
 che il traffico prende nello scheduler? È una parte teorica che affronteremo
 adesso.
 È un percorso teorico complesso con però risultati molto semplici.
\end_layout

\begin_layout Subsection*
Bounded-variance network calculus
\end_layout

\begin_layout Itemize
Questo metodo funziona con l'analisi dei primi due momenti del traffico,
 quindi valor medio e varianza.
\end_layout

\begin_layout Itemize
Questo modello ha il vantaggio di essere semplice, generale, permette risultati
 analitici, permette analisi multi-hop, le approssimazioni sono molto buone
 (specialmente quelle fatte sui microflussi).
\end_layout

\begin_layout Itemize
Quando uno stream 
\begin_inset Formula $X\left(t\right)$
\end_inset

 è un aggregato di 
\begin_inset Formula $N$
\end_inset

 flussi indipendenti 
\begin_inset Formula $x_{i}\left(t\right)$
\end_inset

, il suo valor medio e varianza sono calcolati come:
\begin_inset Formula 
\[
E\left(X\left(t\right)\right)=\sum_{i=1}^{m}E\left(x_{i}\left(t\right)\right)=\sum_{i=1}^{m}m_{i}\cdot t
\]

\end_inset


\begin_inset Formula 
\[
Var\left(X\left(t\right)\right)=\sum_{i=1}^{m}Var\left(x_{i}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Se i microflussi sono statisticamente identici, cioè 
\begin_inset Formula $E\left[x_{i}\left(t\right)\right]=m$
\end_inset

 (i valori medi sono uguali) e 
\begin_inset Formula $Var\left(x_{i}\left(t\right)\right)=Var\left(x_{j}\left(t\right)\right)$
\end_inset

 (le varianze sono diverse), allora: 
\begin_inset Formula 
\[
E\left(X\left(t\right)\right)=N\cdot m\cdot t
\]

\end_inset


\begin_inset Formula 
\[
Var\left(X\left(t\right)\right)=N\cdot Var\left(x_{i}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Consideriamo uno scheduler dove nella classe di servizio 
\emph on
i-esima
\emph default
, il traffico cumulativo 
\begin_inset Formula $X_{i}\left(t_{1},t_{2}\right)$
\end_inset

 è offerto alla rete nell'intervallo di tempo 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

.
 Nello stesso intervallo di tempo il traffico cumulativo 
\begin_inset Formula $Y_{i}\left(t_{1},t_{2}\right)$
\end_inset

 viene servito per la classe 
\begin_inset Formula $i$
\end_inset

 
\end_layout

\begin_deeper
\begin_layout Itemize
Al tempo 
\begin_inset Formula $t$
\end_inset

, 
\begin_inset Formula $Q_{i}\left(t\right)$
\end_inset

 è la quantità di traffico arretrato nella coda della service class.
\end_layout

\begin_layout Itemize
L'intervallo di tempo 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

 è definito come l'intervallo di traffico arretrato per la classe di servizio
 
\begin_inset Formula $i$
\end_inset

 
\series bold
se
\series default
 per ogni 
\begin_inset Formula $t$
\end_inset

 in 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

 abbiamo che 
\begin_inset Formula $Q_{i}\left(t\right)>0$
\end_inset

.
\end_layout

\begin_layout Itemize
\begin_inset Formula $X_{i}^{*}\left(t_{1},t_{2}\right)$
\end_inset

 è la minima quantità di traffico che deve essere fornito alla service class
 
\begin_inset Formula $i$
\end_inset

 per mantenere la sua coda continuamente in stato di traffico arretrato
 da processare in 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

.
\end_layout

\begin_layout Itemize
Il servizio disponibile 
\begin_inset Formula $Y_{i}^{*}\left(t_{1},t_{2}\right)$
\end_inset

 per la classe 
\begin_inset Formula $i$
\end_inset

 in 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

 è il traffico servito per la classe 
\begin_inset Formula $i$
\end_inset

 in 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

 quando alla classe viene offerta la sua minima quantità di traffico arretrato
 di input.
\end_layout

\end_deeper
\begin_layout Itemize
In generale, nell'intervallo di tempo 
\begin_inset Formula $\left[t_{1},t_{2}\right]$
\end_inset

, la quantità di traffico servito per la classe 
\begin_inset Formula $i$
\end_inset

 è definita da 
\begin_inset Formula $Y_{i}\left(t_{1},t_{2}\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
Il 
\series bold
\emph on
virtual delay
\series default
\emph default
 della classe 
\emph on
i-esima
\emph default
 è definito come:
\begin_inset Formula 
\[
D_{i}\left(t\right)=min\left(\Delta t\geq0\,:\, X_{i}\left(t_{0},t\right)\geq Y_{i}\left(t_{0},t+\Delta t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Una 
\series bold
SLA
\series default
 di tipo 
\emph on
delay-oriented
\emph default
 viene formalizzata come segue:
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d_{i}\right)\leq p_{i}
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Dove abbiamo anche l'identità:
\begin_inset Formula 
\[
\left(D_{i}\left(t\right)\geq d_{i}\right)\equiv\left(X_{i}\left(t_{1},t\right)-Y_{i}\left(t_{1},t+d_{i}\right)>0\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Quindi:
\begin_inset Formula 
\[
P_{r}\left(D_{i}\left(t\right)\geq d_{i}\right)\equiv P_{r}\left(X_{i}\left(t_{1},t\right)-Y_{i}\left(t_{1},t+d_{i}\right)>0\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Da cui abbiamo:
\begin_inset Formula 
\[
P_{r}\left(D_{i}\left(t\right)\geq d_{i}\right)\leq P_{r}\left(\underset{t\geq t_{1}}{max}\left(X_{i}\left(t_{1},t\right)-Y_{i}\left(t_{1},t+d_{i}\right)\right)>0\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Otteniamo:
\begin_inset Formula 
\[
P_{r}\left(D_{i}\left(t\right)\geq d_{i}\right)\leq P_{r}\left(\underset{t\geq t_{1}}{max}\left(X_{i}\left(t_{1},t\right)-Y_{i}^{*}\left(t_{1},t+d_{i}\right)\right)>0\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Questo che abbiamo visto vale in generale, anche nei casi non stazionari.
 Se però consideriamo anche l'assunzione che il traffico sia stazionario,
 abbiamo che:
\begin_inset Formula 
\[
P_{r}\left(D_{i}\left(t\right)\geq d_{i}\right)\leq P_{r}\left(\underset{t>0}{max}\left(X_{i}\left(t_{1},t\right)-Y_{i}^{*}\left(t_{1},t+d_{i}\right)\right)>0\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Infine tentiamo di semplificare la formalizzazione introducendo il concetto
 di 
\series bold
\emph on
service envelope 
\series default
\emph default
.
\end_layout

\begin_layout Itemize
Per la classe 
\emph on
i-esima
\emph default
 la 
\series bold
\emph on
service envelope
\series default
\emph default
 
\begin_inset Formula $S_{i}\left(t\right)$
\end_inset

 è un processo stocastico tale che: 
\begin_inset Formula 
\[
\forall t\geq0,\;\forall z\geq0\,:\qquad P_{r}\left(Y_{i}^{*}\left(t\right)\geq z\right)\geq P_{r}\left(S_{i}\left(t\right)\geq z\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Cioè la 
\series bold
\emph on
service envelope 
\series default
\emph default
è semplicemente un limite inferiore statistico del servizio disponibile.
\end_layout

\end_deeper
\begin_layout Itemize
Possiamo, in base a quanto visto qua sopra, stabilire quindi la seguente
 disuguaglianza:
\begin_inset Formula 
\[
P_{r}\left(D_{i}\geq d_{i}\right)\leq P_{r}\left(\underset{t\geq0}{max}\left(X_{i}\left(t\right)-S_{i}\left(t+d_{i}\right)\right)>0\right)
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Il problema di calcolare la probabilità di violare il delay di una SLA statistic
a viene ridotto al semplice calcolo della disuguaglianza qua sopra.
\end_layout

\begin_layout Itemize
Tuttavia abbiamo 
\series bold
due problemi
\series default
 da affrontare:
\end_layout

\begin_deeper
\begin_layout Itemize
Dobbiamo scoprire la 
\begin_inset Formula $S_{i}\left(t\right)$
\end_inset

 dei vari tipi di schedulers.
\end_layout

\begin_layout Itemize
Il calcolo della probabilità qua sopra descritta è molto complicato e dobbiamo
 trovare un modo semplice per risolverlo.
\end_layout

\end_deeper
\begin_layout Itemize
Il primo problema è semplice perché la service envelope degli schedulers
 più importanti è già nota, mentre il secondo problema richiede un po' di
 analisi.
\end_layout

\end_deeper
\begin_layout Subsubsection*
Scheduler FIFO
\end_layout

\begin_layout Standard
Consideriamo il caso di uno scheduler FIFO con capacità di uscita 
\begin_inset Formula $C$
\end_inset

.
 
\end_layout

\begin_layout Standard
La service envelope è in modo elementare 
\begin_inset Formula 
\[
S\left(t\right)=C\cdot t
\]

\end_inset


\end_layout

\begin_layout Itemize
Infatti, l'ammontare di servizio disponibile per 
\begin_inset Formula $X\left(t\right)$
\end_inset

in un intervallo di tempo di durata 
\begin_inset Formula $t$
\end_inset

 è uguale alla capacità della linea moltiplicata per la durata dell'intervallo
 di servizio
\end_layout

\begin_layout Itemize
Il calcolo della SLA diventa quindi:
\begin_inset Formula 
\[
P_{r}\left(D\geq d\right)\leq P_{r}\left(\underset{t\geq0}{max}\left(X\left(t\right)-C\left(t+d\right)\right)>0\right)
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Come detto prima, questo calcolo è piuttosto complicato.
 Nella pratica dobbiamo calcolare la probabilità che il massimo assoluto
 del processo 
\begin_inset Formula $X\left(t\right)-C\left(t+d\right)$
\end_inset

 sia maggiore di 
\begin_inset Formula $0$
\end_inset

.
\end_layout

\begin_layout Itemize
Poiché il calcolo è complesso , tentiamo di introdurre dei metodi per semplifica
rlo.
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
Choe
\emph default
 e 
\emph on
Shroff
\emph default
 propongono di utilizzare la 
\series bold
\emph on
varianza massima asintotica 
\series default
\emph default
(
\series bold
MVA
\series default
) come limite superiore per la probabilità di violare il delay della SLA
 statistica quando il traffico è gaussiano.
\end_layout

\begin_deeper
\begin_layout Itemize
La derivazione di questa teoria è abbastanza complessa, noi vedremo solo
 la teoria principale.
\end_layout

\begin_layout Itemize
Se il rate istantaneo medio del traffico di ingresso è 
\begin_inset Formula $m$
\end_inset

, il valore medio di 
\begin_inset Formula $X\left(t\right)$
\end_inset

 sarà uguale a 
\begin_inset Formula $E\left[X\left(t\right)\right]=m\cdot t$
\end_inset


\end_layout

\begin_layout Itemize
Il processo 
\begin_inset Formula $X\left(t\right)-C\left(t+d\right)$
\end_inset

 ha una deriva negativa, poiché il valore medio decresce come 
\begin_inset Formula $m\cdot t-C\left(t+d\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
La varianza di 
\begin_inset Formula $X\left(t\right)-C\left(t+d\right)$
\end_inset

 aumenta con l'aumento del tempo ed è uguale a 
\begin_inset Formula $Var\left(X\left(t\right)\right)$
\end_inset


\end_layout

\begin_layout Itemize
L'istante di tempo 
\begin_inset Formula $t^{*}$
\end_inset

 in cui il processo 
\begin_inset Formula $X\left(t\right)-C\left(t+d\right)$
\end_inset

 ha più probabilità di diventare positivo è quando il rapporto tra il suo
 valore medio e la sua deviazione standard è minimo.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-067.png
	scale 30

\end_inset


\end_layout

\begin_layout Itemize

\emph on
Choe 
\emph default
e 
\emph on
Shroff
\emph default
 hanno provato che se il traffico è gaussiano: 
\begin_inset Formula 
\[
P_{r}\left(X\left(t^{*}-C\left(t^{*}+d\right)\right)\geq0\right)\geq P_{r}\left(D>d\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Quindi il problema viene ridotto al calcolo di 
\begin_inset Formula $t^{*}$
\end_inset

, l'istante di tempo dove c'è più probabilità che 
\begin_inset Formula $X\left(t\right)-C\left(t+d\right)$
\end_inset

 attraversi l'asse dei tempi.
\end_layout

\end_deeper
\begin_layout Itemize
La 
\series bold
procedura per il calcolo del limite superiore asintotico alla massima varianza
\series default
 (
\series bold
MVA
\series default
) è eseguita come segue:
\end_layout

\begin_deeper
\begin_layout Itemize
Prima di tutto definiamo: 
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(X_{i}\left(t\right)-S\left(t+d_{i}\right)\right)}{\sqrt{Var\left(B\left(t\right)\right)+Var\left(S\left(t+d_{i}\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Poi calcoliamo:
\begin_inset Formula 
\[
\alpha_{i,min}=\underset{t\geq0}{min}\left(\alpha_{i}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Infine troviamo: 
\begin_inset Formula 
\[
P_{r}\left(D_{i}\geq d\right)\leq e^{-\frac{\alpha_{i,min}^{2}}{2}}
\]

\end_inset


\end_layout

\begin_layout Itemize
La procedura che abbiamo illustrato produce dei limiti superiori sul traffico
 di tipo gaussiano.
\end_layout

\begin_layout Itemize
Se il traffico 
\series bold
non è gaussiano
\series default
, allora applicando la stessa procedura otteniamo una approssimazione piuttosto
 che un limite superiore.
 La qualità di questa approssimazione cresce man mano che i microflussi
 in ingresso aumentano (per il teorema del limite centrale)
\end_layout

\end_deeper
\begin_layout Subsubsection*
Two moment analysis applicata ai voice codecs
\end_layout

\begin_layout Itemize
Per applicare questa analisi a dei casi pratici è necessario caratterizzare
 il momento primo e secondo del traffico di interesse.
\end_layout

\begin_layout Itemize
Consideriamo allora uno stream di un variable bit rate codec audio che può
 essere rappresentanto come una catena di Markov, per esempio il codec G.726.
 Abbiamo descritto prima i parametri di questo tipo di sorgente di traffico
 e abbiamo visto che era una sorgente di tipo 
\series bold
SRD
\series default
.
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=\frac{\lambda}{\lambda+\mu}\cdot P\cdot t
\]

\end_inset


\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)=2\cdot\frac{\lambda\cdot\mu}{\left(\lambda+\mu\right)^{3}}\cdot P^{2}\cdot t-2\frac{\lambda\cdot\mu}{\left(\lambda+\mu\right)^{4}}\cdot P^{2}\cdot\left(1-e^{-\left(\lambda+\mu\right)\cdot t}\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Possiamo semplificare la varianza considerandone un limite superiore:
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)\leq2\cdot\frac{\lambda\cdot\mu}{\left(\lambda+\mu\right)^{3}}\cdot P^{2}\cdot t
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Sorgenti di Markov
\end_layout

\begin_layout Standard
Data una sorgente modellizzabile con una catena di Markov ed un numero arbitrari
o di stati, può essere complesso calcolarne la varianza.
\end_layout

\begin_layout Standard
Un recente teorema di 
\emph on
Giacomazzi
\emph default
 e 
\emph on
Verticale
\emph default
 dimostra che tutte le sorgenti di Markov ammettono 
\series bold
un limite superiore lineare per la varianza del traffico cumulativo generato
\series default
.
\end_layout

\begin_layout Itemize
Questo semplifica molto l'analisi poiché, se uno scheduler è soggetto ad
 uno stream di traffico che può essere modellato come una sorgente di Markov,
 la varianza del traffico cumulativo in ingresso sarà lineare.
\end_layout

\begin_layout Itemize
Cioè, per il traffico offerto alla classe di servizio 
\emph on
i-esima
\emph default
:
\begin_inset Formula 
\[
E\left(X_{i}\left(t\right)\right)=r_{i}\cdot t
\]

\end_inset


\begin_inset Formula 
\[
Var\left(X_{i}\left(t\right)\right)=r_{i}\cdot b_{i}\cdot t
\]

\end_inset


\end_layout

\begin_layout Itemize
Dunque, analizzando uno scheduler a cui è offerto un traffico con varianza
 lineare, quello scheduler sarà studiato in un colpo solo per tutte le possibili
 combinazioni di ogni insieme di sorgenti di Markov, con transizioni di
 rate arbitrarie e velocità di trasmissione 
\emph on
per-stato
\emph default
.
\end_layout

\begin_layout Subsubsection*
Rianalisi dello scheduler FIFO
\end_layout

\begin_layout Itemize
Capacità di uscita 
\begin_inset Formula $C$
\end_inset

.
\end_layout

\begin_layout Itemize
Assumiamo 
\begin_inset Formula $N$
\end_inset

 flussi in ingresso statisticamente identici con copertura di varianza lineare
 
\end_layout

\begin_layout Itemize
Il rate medio di uno stream di traffico individuale è 
\begin_inset Formula $r$
\end_inset


\end_layout

\begin_layout Itemize
La varianza del traffico cumulativo di ogni stream di traffico individuale
 è pari a 
\begin_inset Formula $r\cdot b\cdot t$
\end_inset


\end_layout

\begin_layout Itemize
Applichiamo il modello MVA:
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{N\cdot r\cdot t-C\left(t+d\right)}{\sqrt{N\cdot r\cdot b\cdot t}}
\]

\end_inset


\begin_inset Formula 
\[
\alpha_{min}\left(t\right)=2\cdot\sqrt{\frac{Cd\left(C-N\cdot r\right)}{N\cdot r\cdot b\cdot t}}
\]

\end_inset


\begin_inset Formula 
\[
P_{r}\left(D>d\right)\approx e^{-\frac{\alpha_{min}^{2}}{2}}=exp\left(-2\cdot\frac{C\left(C-N\cdot r\right)}{N\cdot r\cdot b}\cdot d\right)
\]

\end_inset


\begin_inset Formula 
\[
E\left(D\right)=\frac{N\cdot r\cdot b}{2C\cdot\left(C-N\cdot r\right)}
\]

\end_inset


\end_layout

\begin_layout Itemize
Per il codec G.726 i parametri sono:
\begin_inset Formula 
\[
r=\frac{\lambda}{\lambda+\mu}\cdot P
\]

\end_inset


\begin_inset Formula 
\[
r\cdot b=2\cdot\frac{\lambda\cdot\mu}{\left(\lambda+\mu\right)^{3}}\cdot P^{2}
\]

\end_inset


\begin_inset Formula 
\[
P_{r}\left(D>d\right)=exp\left(-2\cdot\frac{C\cdot\left(C-N\frac{\lambda}{\lambda+\mu}\cdot P\right)}{2N\cdot\frac{\lambda\cdot\mu}{\left(\lambda+\mu\right)^{3}}\cdot P^{2}}\cdot d\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Dato uno scheduler FIFO che fa multiplexing di 
\begin_inset Formula $N$
\end_inset

 flussi, ciascuno con rate medio 
\begin_inset Formula $r$
\end_inset

 e varianza del traffico cumulativo 
\begin_inset Formula $r\cdot b\cdot t$
\end_inset

.
\end_layout

\begin_layout Standard
La procedura per l'allocazione della capacità consiste nel trovare la capacità
 di linea 
\begin_inset Formula $C$
\end_inset

 necessaria per soddisfare lo SLA statistico 
\begin_inset Formula $\left(d,p\right)$
\end_inset

.
\end_layout

\begin_layout Standard
Questo viene fatto calcolando la probabilità di violare la SLA e risolvendo
 questa equazione in C, il risultato è:
\begin_inset Formula 
\[
C\geq\frac{N\cdot r}{2}+\sqrt{\left(\frac{N\cdot r}{2}\right)^{2}+\frac{N\cdot b\cdot\left(-ln\left(p\right)\right)}{2d}}
\]

\end_inset


\end_layout

\begin_layout Itemize

\series bold
Admission control dello scheduler
\end_layout

\begin_deeper
\begin_layout Itemize
Dato uno scheduler con capacità di linea uguale a 
\begin_inset Formula $C$
\end_inset

, a cui vengono offerti dei flussi di traffico statisticamente identici
 con valor medio 
\begin_inset Formula $r$
\end_inset

 e varianza 
\begin_inset Formula $r\cdot b\cdot t$
\end_inset

, il calcolo della admission control ci permette di trovare il numero massimo
 di sorgenti che possono essere accettate in ingresso, allo scopo di soddisfare
 la SLA statistica 
\begin_inset Formula $\left(d,p\right)$
\end_inset

.
\end_layout

\begin_layout Itemize
Questo viene fatto calcolando la probabilità di superare il delay massimo
 della SLA e risolvendo l'equazione con 
\begin_inset Formula $N$
\end_inset

 come incognita.
 Il risultato è:
\begin_inset Formula 
\[
N\leq\frac{2C^{2}\cdot d}{2C\cdot d\cdot r-b\cdot ln\left(p\right)}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsubsection*
FIFO scheduler con traffico gaussiano (fractional) in ingresso
\end_layout

\begin_layout Standard
Sappiamo che il traffico gaussiano ha un valore medio del traffico cumulativo
\begin_inset Formula 
\[
E\left[X\left(t\right)\right]=a\cdot m\cdot t^{2H}
\]

\end_inset


\end_layout

\begin_layout Itemize
Dato uno scheduler FIFO con capacità di linea 
\begin_inset Formula $C$
\end_inset

, calcoliamo la probabilità di violare la SLA statistica 
\begin_inset Formula $\left(d,p\right)$
\end_inset

 applicando la MVA vista prima:
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{m\cdot t-C\left(t+d\right)}{\sqrt{a\cdot m\cdot t^{2H}}}
\]

\end_inset


\begin_inset Formula 
\[
\alpha_{min}=\frac{1}{\sqrt{a\cdot m}}\cdot\frac{1}{H^{H}\left(1-H\right)^{1-H}}\cdot C^{1-H}\cdot\left(C-m\right)^{H}\cdot d^{1-H}
\]

\end_inset


\begin_inset Formula 
\[
P_{r}\left(D>d\right)\approx e^{-\frac{\alpha_{min}^{2}}{2}}=exp\left(-\frac{1}{2\cdot a\cdot m}\cdot\frac{1}{H^{2H}\cdot\left(1-H\right)^{2-2H}}\cdot C^{2-2H}\cdot\left(C-m\right)^{2H}\cdot d^{2-2H}\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
La distribuzione del ritardo di uno scheduler FIFO con traffico gaussiano
 in ingresso è una Weibull non esponenziale.
\end_layout

\begin_layout Itemize
La distribuzione Weibull descresce molto lentamente.
 Questo significa che alti picchi di ritardo sono possibili.
\end_layout

\begin_layout Itemize
Questo non accade invece per il traffico SRD con varianza lineare (in rosso
 nel grafico)
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-068.png
	scale 40

\end_inset


\end_layout

\begin_layout Section*
SP e GPS schedulers
\end_layout

\begin_layout Standard
Fino adesso abbiamo visto il caso dei FIFO schedulers con un certo numero
 di flussi in ingresso e una uscita caratterizzata da un processo stocastico.
\end_layout

\begin_layout Standard
Riassumiamo qua di seguito tutte le assunzioni e formule che abbiamo ricavato:
 
\begin_inset Formula 
\[
x\left(t\right)=\sum_{i=1}^{n}x_{i}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=E\left(\sum_{i=1}^{n}x_{i}\left(t\right)\right)=\sum_{i=1}^{n}E\left(x_{i}\left(t\right)\right)=t\sum_{i=1}^{n}r_{i}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)=Var\left(\sum_{i=1}^{n}x_{i}\left(t\right)\right)=\sum_{i=1}^{n}Var\left(x_{i}\left(t\right)\right)=\sum_{i=1}^{n}r_{i}b_{i}t^{2H_{i}}\;\overset{\text{SRD}}{=}\;\sum_{i=1}^{n}r_{i}b_{i}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)\;\overset{\text{LRD}}{=}\; t^{2H}\sum_{i=1}^{n}r_{i}b_{i}
\]

\end_inset


\end_layout

\begin_layout Standard
Abbiamo poi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{E\left(x\left(t\right)\right)-E\left(C\left(t+d\right)\right)}{\sqrt{Var\left(x\left(t\right)\right)+Var\left(C\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Dove sappiamo che: 
\begin_inset Formula 
\[
Var\left(C\left(t+d\right)\right)=\begin{cases}
0 & \text{ se la capacità è costante}\\
\neq0 & \text{ se è un canale tempo variante}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Oggi invece analizzeremo il caso di un multi-class scheduler!
\end_layout

\begin_layout Subsection*
Strict Prioririty scheduler
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-021.png
	scale 40

\end_inset


\end_layout

\begin_layout Itemize
È uno scheduler molto semplice ed efficiente.
\end_layout

\begin_layout Itemize
Abbiamo 
\begin_inset Formula $n$
\end_inset

 code con vari input (
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

, 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

, ...) e capacità di uscita 
\begin_inset Formula $C$
\end_inset

 costante.
\end_layout

\begin_layout Itemize
Abbiamo dei delay diversi per ogni classe, quindi non avremo una singola
 funzione 
\begin_inset Formula $\alpha\left(t\right)$
\end_inset

, ma ne avremo una per ogni classe.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-E\left(S_{i}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(S_{i}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Dove 
\begin_inset Formula $S_{i}\left(t\right)$
\end_inset

 è il servizio disponibile per la classe 
\begin_inset Formula $i$
\end_inset

 e dipende dalla policy di scheduling.
\end_layout

\begin_layout Standard
Analizziamo lo scheduler.
 Partiamo ad analizzare la classe di servizio 1.
\end_layout

\begin_layout Itemize
Se c'è un pacchetto pronto per essere servito nella prima classe, viene
 preso e trasmesso.
 Quindi per la prima classe abbiamo 
\begin_inset Formula $S_{1}\left(t\right)=C\cdot t$
\end_inset

, cioè agisce come se fosse un FIFO scheduler.
 In realtà non è esattamente un FIFO scheduler.
 Qui stiamo lavorando sotto l'ipotesi che il traffico sia infinitamente
 divisibile.
 
\series bold
Questo significa che stiamo assumendo di poter trasmettere un solo bit o
 anche frazioni di bit.
 Sappiamo che questo non è reale, quando si inizia a servire un pacchetto,
 dobbiamo finire la trasmissione.
\end_layout

\begin_layout Itemize
Riguardo alla classe 2?
\end_layout

\begin_deeper
\begin_layout Itemize
Viene servita solo se non abbiamo dati da trasmettere nella classe 1: 
\begin_inset Formula $S_{2}\left(t\right)=Ct-x_{1}\left(t\right)$
\end_inset

 .
 Quindi sottraiamo alla capacità totale quella già usata per la classe 1.
\end_layout

\end_deeper
\begin_layout Itemize
La classe 3?
\end_layout

\begin_deeper
\begin_layout Itemize
Viene servita solo se sia 1 che 2 sono vuote: 
\begin_inset Formula $S_{3}\left(t\right)=Ct-x_{1}\left(t\right)-x_{2}\left(t\right)$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
La classe i-esima?
\end_layout

\begin_deeper
\begin_layout Itemize
Viene servita solo se tutte le classi prima sono vuote: 
\begin_inset Formula 
\[
S_{i}\left(t\right)=C\cdot t-\sum_{i=1}^{i-1}x_{i}\left(t\right)
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Tornando al calcolo di 
\begin_inset Formula $\alpha_{i}\left(t\right)$
\end_inset

 otteniamo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-E\left(C\left(t+d\right)-\sum_{j=1}^{i-1}x_{j}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(C\left(t+d\right)-\sum_{j=1}^{i-1}x_{j}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Nota: ricordiamoci che se 
\begin_inset Formula $z=x+y$
\end_inset

 abbiamo:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $Var\left(z\right)=Var\left(x\right)+Var\left(y\right)$
\end_inset


\end_layout

\begin_layout Itemize
ma se 
\begin_inset Formula $z=x-y$
\end_inset

 allora abbiamo sempre 
\begin_inset Formula $Var\left(z\right)=Var\left(x\right)+Var\left(y\right)$
\end_inset

 ! Ricordiamoci di 
\series bold
\bar under
fare attenzione ai segni delle varianze
\series default
\bar default
.
\end_layout

\end_deeper
\begin_layout Itemize
Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-E\left(C\left(t+d\right)-\sum_{j=1}^{i-1}x_{j}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(C\left(t+d\right)\right)+Var\left(\sum_{j=1}^{i-1}x_{j}\left(t+d\right)\right)}}=
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{r_{i}\cdot t-C\left(t+d\right)+\sum_{j=1}^{i-1}E\left(x_{j}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(\sum_{j=1}^{i-1}x_{j}\left(t+d\right)\right)}}=
\]

\end_inset


\end_layout

\begin_layout Standard
Nota: 
\begin_inset Formula $Var\left(C\left(t+d\right)\right)=0$
\end_inset

 perché è costante.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{r_{i}\cdot t-C\left(t+d\right)+\sum_{j=1}^{i-1}r_{j}\left(t+d\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+\sum_{j=1}^{i-1}Var\left(x_{j}\left(t+d\right)\right)}}=
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=\frac{\left(C-\sum_{j=1}^{i}r_{j}\right)+\left(C-\sum_{j=1}^{i-1}r_{j}\right)d}{\sqrt{Var\left(x_{i}\left(t\right)\right)+\sum_{j=1}^{i-1}Var\left(x_{j}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Quest'ultima è la forma più generale di 
\begin_inset Formula $\alpha_{i}\left(t\right)$
\end_inset

 per il nostro scheduler SP.
\end_layout

\begin_layout Itemize

\series bold
Assumiamo
\series default
 invece ora 
\series bold
che
\series default
 
\begin_inset Formula $x_{i}\left(t\right)$
\end_inset

, il flusso in ingresso generico, è fatto di 
\begin_inset Formula $N_{i}$
\end_inset

 diversi flussi, tutti statisticamente identici.
\end_layout

\begin_deeper
\begin_layout Itemize
Definiamo inoltre 
\begin_inset Formula $\rho_{i}=\text{Valore medio di uno degli }N_{i}\text{ flussi nella classe }i$
\end_inset

.
 Quindi abbiamo 
\begin_inset Formula $r_{i}=N_{i}\cdot\rho_{i}$
\end_inset


\end_layout

\begin_layout Itemize
Quindi, per 
\series bold
\bar under
questo caso specifico
\series default
\bar default
:
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=\frac{\left(C-\sum_{j=1}^{i}N_{j}\cdot\rho_{j}\right)\cdot t+\left(C-\sum_{j=1}^{i-1}N_{j}\cdot\rho_{j}\right)\cdot d}{\sqrt{Var\left(x_{i}\left(t\right)\right)+\sum_{j=1}^{i-1}Var\left(x_{j}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Proviamo con un'altra assunzione, e cioè che tutti i 
\emph on
microflussi
\emph default
 visti sopra siano di tipo 
\emph on
short-range-dependent:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=\frac{\left(C-\sum_{j=1}^{i}N_{j}\cdot\rho_{j}\right)+\left(C-\sum_{j=1}^{i-1}N_{j}\cdot\rho_{j}\right)}{\sqrt{N_{i}\rho_{i}\beta_{i}t+\sum_{j=1}^{i-1}N_{j}\rho_{j}\beta_{j}\left(t+d\right)}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Infatti, in base all'assunzione che abbiamo visto:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(\sum_{j=1}^{N_{i}}x_{i,j}\left(t\right)\right)=\sum_{j=1}^{N_{i}}Var\left(x_{i,j}\left(t\right)\right)=\sum_{j=1}^{N_{i}}\rho_{i}\beta_{i}t=N_{i}\rho_{i}\beta_{i}t
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Ora, detto tutto questo, scopriamo qual'è la probabilità che il ritardo
 della classe 
\emph on
i-esima
\emph default
 sia superiore a un certo valore 
\begin_inset Formula $d$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{min}=2\sqrt{\frac{\left(C-A_{i}\right)\cdot\left(\left(C-A_{i-1}\right)\cdot B_{i}-\left(C-A_{i}\right)\cdot B_{i-1}\right)}{B_{i}^{2}}\cdot d_{i}}
\]

\end_inset


\end_layout

\begin_layout Itemize
Dove: 
\begin_inset Formula 
\[
A_{i}=\sum_{j=1}^{i}N_{j}r_{j}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{i}=\sum_{j=1}^{i}N_{j}r_{j}b_{j}
\]

\end_inset


\end_layout

\begin_layout Itemize
Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d\right)=exp\left(-2\cdot\frac{C-A_{i}}{B_{i}^{2}}\cdot\left(\left(C-A_{i-1}\right)\cdot B_{i}-\left(C-A_{i}\right)\cdot B_{i-1}\right)d\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Quindi il ritardo è nella forma 
\begin_inset Formula $e^{-kd}$
\end_inset

, infatti quando il traffico è di tipo SRD, questa probabilità è sempre
 esponenziale!
\end_layout

\begin_layout Itemize
Abbiamo inoltre che:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(D_{i}\right)=\frac{B_{i}^{2}}{2\cdot\left(C-A_{i}\right)\cdot\left(\left(C-A_{i-1}\right)\cdot B_{i}-\left(C-A_{i}\right)\cdot B_{i-1}\right)}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
Capacity Allocation Problem
\end_layout

\begin_layout Standard
Abbiamo quest'altro problema, vediamone le caratteristiche:
\end_layout

\begin_layout Itemize
Assumiamo di avere uno scheduler SP con capacità 
\begin_inset Formula $C$
\end_inset

 costante
\end_layout

\begin_layout Itemize
Abbiamo 
\begin_inset Formula $N$
\end_inset

 classi di servizio
\end_layout

\begin_layout Itemize
La classe di servizio 
\emph on
i-esima
\emph default
 riceve 
\begin_inset Formula $N_{i}$
\end_inset

 flussi, statisticamente identici
\end_layout

\begin_layout Itemize
Tutto i flussi sono 
\emph on
short-range-dependent
\emph default
.
\end_layout

\begin_layout Itemize
La classe di servizio 
\emph on
i-esima
\emph default
 ha SLA 
\begin_inset Formula $\left(d_{i},p_{i}\right).$
\end_inset


\end_layout

\begin_layout Standard
La domanda è: trovare 
\begin_inset Formula $C$
\end_inset

.
 
\series bold
Qual'è la 
\begin_inset Formula $C$
\end_inset

 necessaria per riuscire a soddisfare tutti gli SLA di tutte le classi,
 dato questo scheduler?
\end_layout

\begin_layout Standard
Partiamo dalla probabilità di ritardo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d_{i}\right)=exp\left(-2\cdot\frac{C-A_{i}}{B_{i}^{2}}\left(\left(C-A_{i-1}\right)\cdot B_{i}-\left(C-A_{i}\right)\cdot B_{i-1}\right)\cdot d_{i}\right)\leq p_{i}
\]

\end_inset


\end_layout

\begin_layout Standard
Dobbiamo mettere questa disequazione a sistema per ognuna delle classi e
 risolvere...
\end_layout

\begin_layout Standard
Alla fine avremo 
\begin_inset Formula $N$
\end_inset

 risultati di tipo condizionali 
\begin_inset Formula $C\geq C_{i}$
\end_inset

, uno da ciascuna classe.
 Quindi poi possiamo fare il passo finale di: 
\begin_inset Formula 
\[
C=\underset{1\leq i\leq n}{max}\left(C_{i}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Il problema è che dobbiamo risolvere queste disequazioni sopra in funzione
 di 
\begin_inset Formula $C$
\end_inset

.
 Non è complesso ma sicuramente lungo.
\end_layout

\begin_layout Standard
Quello che otteniamo, per brevità qua riportato senza passaggi:
\end_layout

\begin_layout Standard

\size footnotesize
\begin_inset Formula 
\[
C_{i}=\frac{\left(2\cdot A_{i}\cdot B_{i-1}-A_{i-1}\cdot B_{i}-A_{i}\cdot B_{i}\right)d_{i}-\sqrt{A_{i-1}^{2}\cdot B_{i}^{2}\cdot d_{i}^{2}-2\cdot A_{i-1}\cdot A_{i}\cdot B_{i}^{2}\cdot d_{i}^{2}+A_{i}^{2}\cdot B_{i}^{2}\cdot d_{i}^{2}+2\cdot B_{i-1}\cdot B_{i}^{2}\cdot d_{i}\cdot ln\left(p_{i}\right)-2\cdot B_{i}^{3}\cdot d_{i}\cdot ln\left(p_{i}\right)}}{2\cdot\left(B_{i-1}-B_{i}\right)\cdot d_{i}}
\]

\end_inset


\end_layout

\begin_layout Itemize
La capacità richiesta dipende dal livello di priorità assegnato ad ogni
 classe di servizio
\end_layout

\begin_layout Itemize
Date 
\begin_inset Formula $n$
\end_inset

 classi di servizio, ci sono 
\begin_inset Formula $n!$
\end_inset

 permutazioni per questo assegnamento.
 Il problema di trovare la permutazione ottima è NP-completo.
\end_layout

\begin_deeper
\begin_layout Itemize
Spesso, la permutazione ottima è quella che assegna il traffico con il valor
 medio più elevato alla classe di priorità 1, la seconda alla classe di
 priorità 2 e così via.
\end_layout

\begin_layout Itemize
Tuttavia questo non è necessariamente vero nel caso generale, poiché anche
 la varianza influisce.
\end_layout

\end_deeper
\begin_layout Subsubsection*
Esempio
\end_layout

\begin_layout Standard
Assumiamo uno scheduler SP con due classi di servizio e:
\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{1}=200\: kbit/s$
\end_inset

 , 
\begin_inset Formula $b_{1}=9600\: bit$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{2}=200\: kbit/s$
\end_inset

 , 
\begin_inset Formula $b_{2}=4600\: bit$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $N_{1}=30$
\end_inset

 , 
\begin_inset Formula $N_{2}=10$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $C=1\cdot10^{7}\: bit/s$
\end_inset


\end_layout

\begin_layout Standard
Sappiamo che:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d\right)=exp\left(-2\cdot\frac{C-A_{i}}{B_{i}^{2}}\cdot\left(\left(C-A_{i-1}\right)\cdot B_{i}-\left(C-A_{i}\right)\cdot B_{i-1}\right)\cdot d_{i}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{i}=\sum_{j=1}^{i}N_{j}\cdot r_{j}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{i}=\sum_{j=1}^{i}N_{j}r_{j}b_{j}
\]

\end_inset


\end_layout

\begin_layout Standard
Calcoliamo quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{1}=6\cdot10^{6}\:\left[\frac{bit}{s}\right]
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{2}=8\cdot10^{6}\:\left[\frac{bit}{s}\right]
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{1}=57.6\cdot10^{9}=5.76\cdot10^{10}\:\left[\frac{bit}{s}\right]
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{2}=6.68\cdot10^{10}
\]

\end_inset


\end_layout

\begin_layout Standard
Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{1}>d\right)=exp\left(.........\right)=exp\left(-2\cdot\frac{4\cdot10^{6}}{33.1776\cdot10^{20}}\cdot1\cdot10^{7}\cdot5.76\cdot10^{10}\cdot d\right)=exp\left(...crazy\: stuff...\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{1}>d\right)=e^{-1.38\cdot10^{3}\cdot d}
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Esercizio
\end_layout

\begin_layout Itemize
Assumiamo di avere uno scheduler SP con due classi.
 
\end_layout

\begin_layout Itemize
Nella classe 1 entrano 
\begin_inset Formula $N_{1}=30$
\end_inset

 flussi di tipo SRD 
\begin_inset Formula $\left(r_{1},b_{1}\right)$
\end_inset


\end_layout

\begin_layout Itemize
Nella classe 2 entrano 
\begin_inset Formula $N_{2}=10$
\end_inset

 flussi di tipo SRD 
\begin_inset Formula $\left(r_{2},b_{2}\right)$
\end_inset


\end_layout

\begin_layout Itemize
La capacità di uscita è 
\begin_inset Formula $C=10^{7}\;\left[\frac{bit}{s}\right]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{1}=200\,\frac{kbit}{s}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b_{1}=9600\: bit$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{2}=200\:\frac{kbit}{s}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b_{2}=4600\, bit$
\end_inset


\end_layout

\begin_layout Standard
Prima avviamo calcolato 
\begin_inset Formula $P_{r}\left(D_{1}>d\right)=e^{-1.39\cdot10^{3}\cdot d}$
\end_inset


\end_layout

\begin_layout Standard
Vediamo ora:
\begin_inset Formula $P_{r}\left(D_{2}>d\right)=e^{-136\cdot d}$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename 064.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Assumiamo di non conoscere 
\begin_inset Formula $C$
\end_inset

 e consideriamo che abbiamo i vari SLA:
\end_layout

\begin_layout Itemize
SLA1: 
\begin_inset Formula $\left(50\, ms,\:10^{-3}\right)$
\end_inset


\end_layout

\begin_layout Itemize
SLA2: 
\begin_inset Formula $\left(70\, ms,\:2\cdot10^{-3}\right)$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
C_{i}=\digamma\left(N_{1},r_{1},b_{1},N_{2},r_{2},b_{2},d_{1},p_{1},d_{2},p_{2}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
(non riscriviamo anche qua il mega-formulozzo)
\end_layout

\begin_layout Standard
Otteniamo:
\end_layout

\begin_layout Itemize
\begin_inset Formula $C_{1}\geq66\cdot10^{6}\;\left[\frac{bit}{s}\right]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $C_{2}\geq9.35\cdot10^{6}\;\left[\frac{bit}{s}\right]$
\end_inset


\end_layout

\begin_layout Standard
Quindi 
\begin_inset Formula $C_{1}\geq C_{2}$
\end_inset

.
\end_layout

\begin_layout Subsubsection*
Admission control per lo scheduler SP
\end_layout

\begin_layout Itemize
Dato uno scheduler SP con 
\begin_inset Formula $n$
\end_inset

 classi di servizio, dove il traffico della classe 
\emph on
i-esima
\emph default
 
\begin_inset Formula $X_{i}\left(t\right)$
\end_inset

 ha valore medio
\begin_inset Formula 
\[
E\left[X_{i}\left(t\right)\right]=r_{i}\cdot t
\]

\end_inset

E limite superiore della varianza: 
\begin_inset Formula 
\[
Var\left(X_{i}\left(t\right)\right)\leq r_{i}\cdot b_{i}\cdot t
\]

\end_inset


\end_layout

\begin_layout Itemize
Dato inoltre lo SLA statistico della classe 
\emph on
i-esima
\emph default
 pari a 
\begin_inset Formula $\left(d_{i},p_{i}\right)$
\end_inset

 e la capacità di uscita 
\begin_inset Formula $C$
\end_inset

 
\end_layout

\begin_layout Itemize
La regione di ammissione è l'insieme delle tuple 
\begin_inset Formula $\left(N_{1},N_{2},...,N_{n}\right)$
\end_inset

 per le quali tutte le 
\bar under
SLA sono soddisfatte contemporaneamente
\bar default
.
\end_layout

\begin_layout Itemize
La regione di ammissione viene calcolata invertendo la curva del delay
\end_layout

\begin_layout Itemize
I calcoli algebrici sono molto complessi, ma è possibile trovare una espressione
 in forma chiusa per la regione di ammissione.
\end_layout

\begin_layout Standard
Vogliamo trovare la regione di accettazione, la regione nel piano 
\begin_inset Formula $\left(N_{1},N_{2}\right)$
\end_inset

 dove entrambe le SLA possono essere soddisfatte.
\end_layout

\begin_layout Standard
La formula arriva dall'inversione della formula della probabilità che abbiamo
 già usato.
\end_layout

\begin_layout Standard

\size footnotesize
\begin_inset Formula 
\[
\begin{cases}
N_{i}\leq\frac{\left(\left(\frac{B_{i-1}}{b_{i}}\right)^{2}-\left(2C-2A_{i-1}+\frac{B_{i-1}}{b_{i}}\right)^{2}-4B_{i-1}\cdot\frac{ln\left(p_{i}\right)}{d_{i}}\right)-4\left(C-A_{i-1}+\frac{B_{i-1}}{b_{i}}\right)\cdot\sqrt{\left(C-A_{i-1}\right)^{2}+2B_{i-1}\cdot\frac{ln\left(p_{i}\right)}{d_{i}}}}{-4r_{i}\left(2\cdot\left(C-A_{i-1}+\frac{B_{i-1}}{b_{i}}\right)-\frac{b_{i}\cdot ln\left(p_{i}\right)}{d_{i}}\right)} & \text{per }0\leq N_{i-k}\leq min\left(N_{i-k}^{*},\, N_{i-k,max}\right)\,\text{e}\, i>k=1,2,...,n\\
N_{i}=0 & \text{per }N_{i-k}^{*}\leq N_{i-k}\leq N_{i-k,max}\,\text{e}\, i>k=1,2,...n
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Dove:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
N_{i-k}^{*}=\frac{\left(Cd_{i}-b_{i-k}\cdot ln\left(p_{i}\right)-d_{i}A_{i-1-k}\right)-\sqrt{-ln\left(p_{i}\right)\cdot\left(-b_{i-k}^{2}\cdot ln\left(p_{i}\right)+2d_{i}b_{i-k}\cdot\left(C-A_{i-1-k}\right)+2d_{i}B_{i-1-k}\right)}}{r_{i-k}\cdot d_{i}}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
N_{i-k,max}=\frac{2d_{i-k}C^{2}}{2d_{i-k}r_{i-k}C-r_{i-k}b_{i-k}ln\left(p_{i-k}\right)}
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Esercizio (parte 2)
\end_layout

\begin_layout Standard
Tornando all'esercizio di prima, tenendo i parametri del problema iniziale
 con 
\begin_inset Formula $C=10\cdot10^{6}\,\left[\frac{bit}{s}\right]$
\end_inset

 e applicando le formule che abbiamo appena visto, otteniamo che:
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename 065.png
	scale 40

\end_inset


\end_layout

\begin_layout Standard
Possiamo accettare fino a 34 connessioni di tipo 1, ma poi possiamo accettare
 solo quelle, non possiamo più accettare connessioni di tipo 2.
 Dobbiamo tentare di lavorare verso il centro della curva.
\end_layout

\begin_layout Standard
In ogni caso comunque 
\bar under
gli ISP preferiscono mantenere attive le connessioni già accettate invece
 di dropparle e accettarne altre nuove
\bar default
.
 
\end_layout

\begin_layout Itemize
Se modificassimo lo SLA della classe 2 e lo impostassimo a 
\begin_inset Formula $\left(0.8s,\,1\cdot10^{-1}\right)$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename 066.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Abbiamo alleggerito la SLA, quindi possiamo accettare più connessioni.
\end_layout

\begin_layout Subsection*
Scheduler GPS
\end_layout

\begin_layout Standard
Abbiamo uno scheduler GPS con 
\begin_inset Formula $n$
\end_inset

 classi e capacità 
\begin_inset Formula $C$
\end_inset

 di uscita.
 Ogni classe ha un peso 
\begin_inset Formula $w_{i}$
\end_inset

.
\end_layout

\begin_layout Standard
Lo scheduler GPS però è intelligente, se una classe è in silenzio ridistribuisce
 il peso alle altre classi.
\end_layout

\begin_layout Standard
Abbiamo come sempre:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-E\left(S_{i}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(S_{i}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Però non conosciamo 
\begin_inset Formula $S_{i}$
\end_inset

!
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{i}\left(t\right)=w_{i}Ct+\sum_{j\neq i}\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\cdot max\left(0,w_{j}Ct-X_{j}\left(t\right)\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Il fattore 
\begin_inset Formula $max\left(...\right)$
\end_inset

 è la capacità non utilizzata di una specifica classe 
\begin_inset Formula $j$
\end_inset

 che stiamo considerando.
 Però non va tutta alla classe 
\begin_inset Formula $i$
\end_inset

, quindi c'è un fattore di pesatura prima.
\end_layout

\begin_layout Standard
\begin_inset Formula $j$
\end_inset

 è l'indice che si riferisce alle classi senza traffico arretrato, mentre
 
\begin_inset Formula $k$
\end_inset

 si riferisce alle classi con traffico arretrato.
\end_layout

\begin_layout Standard
Nel seguito assumeremo una approssimazione conservativa:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{i}\left(t\right)\approx w_{i}Ct+\sum_{j\neq i}\frac{w_{i}}{\sum_{k\neq j}w_{k}}\cdot\left(w_{j}Ct-X_{j}\left(t\right)\right)
\]

\end_inset

 cioè teniamo il valore più alto del massimo.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x\left(t\right)\right)-w_{i}C\left(t+d\right)-\sum_{j\neq i}\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\cdot\left(w_{j}C\left(t+d\right)-E\left(x_{j}\left(t+d\right)\right)\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+\sum_{j\neq i}\left(\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\right)^{2}\cdot Var\left(x_{j}\left(t+d\right)\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Assumiamo adesso che 
\series bold
tutto il traffico sia di tipo SRD
\series default
 e ogni classe è formata da 
\begin_inset Formula $N_{i}$
\end_inset

 microflussi con caratteristiche 
\begin_inset Formula $r_{i}$
\end_inset

 e 
\begin_inset Formula $b_{i}$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{N_{i}r_{i}t-w_{i}C\left(t+d\right)-\sum_{j\neq i}\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\cdot\left(w_{j}\cdot C\cdot\left(t+d\right)-N_{j}r_{j}\left(t+d\right)\right)\right)}{\sqrt{N_{i}r_{i}b_{i}t+\sum_{j\neq i}\left(\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\right)^{2}\cdot N_{j}r_{j}b_{j}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
E possiamo trovare:
\begin_inset Formula 
\[
\alpha_{i,min}=\sqrt{\frac{4\cdot N_{i}\cdot r_{i}\cdot d_{i}\cdot\left(w_{i}\cdot b_{i}\cdot C+b_{i}\cdot A_{i}+B_{i}\right)\cdot\left(w_{i}\cdot C+A_{i}-N_{i}\cdot r_{i}\right)}{\left(N_{i}\cdot r_{i}\cdot b_{i}+B_{i}\right)^{2}}}
\]

\end_inset


\end_layout

\begin_layout Standard
Otteniamo quindi (finalmente) che:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d_{i}\right)=exp\left(-2\frac{N_{i}r_{i}\left(w_{i}b_{i}C+b_{i}A_{i}+B_{i}\right)\left(w_{i}C+A_{i}-N_{i}r_{i}\right)}{\left(N_{i}r_{i}b_{i}+B_{i}\right)^{2}}d_{i}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Dove:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{i}=\sum_{j\neq i}\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\cdot\left(w_{j}C-N_{j}r_{j}\right)\right)
\]

\end_inset

(Nota: nella formula sopra non c'è max ancora perché facciamo una stima
 per il limite superiore)
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{i}=\sum_{j\neq i}\left(\left(\frac{w_{i}}{\sum_{k\neq j}w_{k}}\right)^{2}\cdot N_{j}r_{j}b_{j}\right)
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Admission control dello scheduler GPS
\end_layout

\begin_layout Standard
Definiamo
\begin_inset Formula 
\[
N_{i,min}=\frac{2d_{i}\cdot\left(w_{i}\cdot C\right)^{2}}{r_{i}\cdot\left(2d_{i}\cdot w_{i}\cdot C-b_{i}\cdot ln\left(p_{i}\right)\right)}
\]

\end_inset


\size scriptsize

\begin_inset Formula 
\[
N_{i,max}=\frac{d_{i}\cdot\left(w_{i}\cdot C+A_{i}\right)\cdot\left(w_{i}\cdot b_{i}\cdot C+b_{i}\cdot A_{i}+B_{i}\right)+b_{i}\cdot B_{i}\cdot ln\left(p_{i}\right)+\sqrt{d_{i}\cdot\left(w_{i}\cdot b_{i}\cdot C+b_{i}\cdot A_{i}+B_{i}\right)^{2}\cdot\left(d_{i}\cdot\left(w_{i}\cdot C+A_{i}\right)^{2}+2\cdot B_{i}\cdot ln\left(p_{i}\right)\right)}}{r_{i}\left(2d_{i}\left(w_{i}\cdot b_{i}\cdot C+b_{i}\cdot A_{i}+B_{i}\right)-b_{i}^{2}\cdot ln\left(p_{i}\right)\right)}
\]

\end_inset


\end_layout

\begin_layout Standard
Dove dobbiamo considerare la 
\series bold
condizione
\series default
 che:
\begin_inset Formula 
\[
\text{se }\left(d_{i}\cdot\left(w_{i}\cdot C+A_{i}\right)^{2}+2B_{i}\cdot ln\left(p_{i}\right)\right)>0\quad\text{allora}\quad N_{i}<max\left(N_{i,min},\, N_{i,max}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\text{altrimenti }N_{i}\leq N_{i,min}
\]

\end_inset


\end_layout

\begin_layout Subsection*
Esempio:
\end_layout

\begin_layout Standard
Assumiamo uno scheduler SP di tipo GPS con due classi con 
\begin_inset Formula $N_{1}$
\end_inset

 e 
\begin_inset Formula $N_{2}$
\end_inset

 microflussi in ingresso rispettivamente.
\end_layout

\begin_layout Standard
Capacità di uscita dello scheduler pari a 
\begin_inset Formula $C=45Mbit/s$
\end_inset


\end_layout

\begin_layout Itemize
SLA1: 
\begin_inset Formula $\left(0.01s,10^{-6}\right)$
\end_inset


\end_layout

\begin_layout Itemize
SLA2: 
\begin_inset Formula $\left(0.05s,\,10^{-6}\right)$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{1}=0.6\cdot10^{-6}\: bit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b_{1}=40000\, bit$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{2}=0.8\cdot10^{-6}\, bit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b_{2}=100000\, bit$
\end_inset


\end_layout

\begin_layout Standard
Vediamo dalla figura che anche nel punto in cui cola a picco abbiamo una
 capacità garantita per ogni classe, che non avevamo con lo scheduler SP.
\end_layout

\begin_layout Standard
Nell figura vediamo proprio la differenza.
\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename 067.png
	scale 50

\end_inset


\end_layout

\begin_layout Part*
Scheduler EDF
\end_layout

\begin_layout Standard
Abbiamo 
\begin_inset Formula $n$
\end_inset

 classi di servizio, ciascuna con:
\end_layout

\begin_layout Itemize
Un flusso in ingresso 
\begin_inset Formula $x_{i}\left(t\right)$
\end_inset

 (
\begin_inset Formula $x_{1}\left(t\right),x_{2}\left(t\right),...,x_{n}\left(t\right)$
\end_inset

)
\end_layout

\begin_layout Itemize
Una deadline 
\begin_inset Formula $\delta_{i}$
\end_inset


\end_layout

\begin_layout Standard
E poi una capacità di uscita totale 
\begin_inset Formula $C$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-E\left(S_{i}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(S_{i}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Itemize
In questo caso sappiamo che 
\begin_inset Formula $S_{i}\left(t\right)$
\end_inset

 è:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{i}\left(t\right)=max\left(0,C\cdot t-\sum_{n\neq i}X_{n}\left(t-max\left(0,\,\delta_{n}-\delta_{i}\right)\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Nella formula sopra:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\delta_{n}-\delta_{i}$
\end_inset

 tiene conto della differenza tra le varie deadlines.
 Infatti se 
\begin_inset Formula $\delta_{n}-\delta_{i}$
\end_inset

 è negativo, il massimo diventa 
\begin_inset Formula $0$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Standard
Possiamo approssimare:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{i}\left(t\right)\approx C\cdot t-\sum_{n\neq i}x_{n}\left(t-max\left(0,\delta_{n}-\delta_{i}\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Torniamo alla definizione di 
\begin_inset Formula $\alpha_{i}\left(t\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-C\left(t+d\right)+\sum_{n\neq i}E\left[x_{n}\left(t-max\left(\delta_{n}-\delta_{i}\right)+d\right)\right]}{\sqrt{Var\left(x_{i}\left(t\right)\right)+\sum_{n\neq i}Var\left(x_{n}\left(t+d-max\left(0,\delta_{n}-\delta_{i}\right)\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Vediamo cosa succede nel 
\series bold
caso
\series default
 di 
\series bold
\bar under
traffico 
\emph on
short-dependent
\series default
\bar default
.
\end_layout

\begin_layout Standard
Sappiamo che nel caso in cui il traffico sia short-dependent abbiamo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{i}\left(t\right)\right)=r_{i}t\\
Var\left(x_{i}\left(t\right)\right)=r_{i}b_{i}t
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
E nel caso dei microflussi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{i}\left(t\right)\right)=N_{i}r_{i}t\\
Var\left(x_{i}\left(t\right)\right)=N_{i}r_{i}b_{i}t
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Definiamo quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{i}=\sum_{n\neq i}N_{n}r_{n}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset space \thinspace{}
\end_inset


\begin_inset Formula 
\[
E_{i}=\sum_{n\neq i}N_{n}r_{n}max\left(0,\delta_{n}-\delta_{i}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{i}=\sum_{n\neq i}N_{n}r_{n}b_{n}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
F_{i}=\sum_{n\neq i}N_{n}r_{n}b_{n}max\left(0,\delta_{n}-\delta_{i}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
La probabilità di ritardo è quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{i}>d\right)=exp\left(-2\left(N_{i}r_{i}d_{i}\left(b_{i}\left(C-A_{i}\right)+B_{i}\right)+E_{i}\left(B_{i}+N_{i}r_{i}b_{i}\right)+F_{i}\left(C-N_{i}r_{i}-A_{i}\right)\right)\frac{\left(C-N_{i}r_{i}-A_{i}\right)}{\left(B_{i}+N_{i}r_{i}b_{i}\right)^{2}}\right)
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Capacity planning con scheduler EDF
\end_layout

\begin_layout Standard
La formula per il capacity planning è 
\begin_inset Formula 
\[
C_{i}\geq\frac{\left(A_{i}\cdot d_{i}-E_{i}+\sqrt{\left(E_{i}+N_{i}\cdot r_{i}\cdot d_{i}\right)^{2}-2\cdot ln\left(p_{i}\right)\cdot\left(F_{i}+N_{i}\cdot r_{i}\cdot b_{i}\cdot d_{i}\right)}\right)}{2\cdot\left(F_{i}+N_{i}\cdot r_{i}\cdot b_{i}\cdot d_{i}\right)}\cdot\left(B_{i}+N_{i}\cdot r_{i}\cdot b_{i}\right)+\frac{1}{2}\cdot\left(A_{i}+N_{i}r_{i}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Quindi:
\end_layout

\begin_layout Subsubsection*
\begin_inset Formula 
\[
C=\underset{1\leq i\leq n}{max}\left(C_{i}\right)
\]

\end_inset

 Admission control
\end_layout

\begin_layout Standard

\size tiny
\begin_inset Formula 
\[
N_{i}\leq\frac{1}{r_{i}\left(2\left(b_{i}\left(Cd_{i}-A_{i}d_{i}+E_{i}\right)+B_{i}d_{i}-F_{i}\right)-b_{i}^{2}ln\left(p_{i}\right)\right)}\cdot
\]

\end_inset


\end_layout

\begin_layout Standard

\size tiny
\begin_inset Formula 
\[
\cdot\left\{ \left(A_{i}b_{i}+B_{i}-Cb_{i}\right)\left(A_{i}d_{i}-E_{i}-Cd_{i}\right)-2\left(B_{i}d_{i}-F_{i}\right)\left(A_{i}-C\right)+b_{i}B_{i}\cdot ln\left(p_{i}\right)+\sqrt{\left(-A_{i}b_{i}+B_{i}+Cb_{i}\right)^{2}\cdot\left(\left(A_{i}d_{i}-E_{i}-Cd_{i}\right)^{2}+2\left(B_{i}d_{i}-F_{i}\right)ln\left(p_{i}\right)\right)}\right\} 
\]

\end_inset


\end_layout

\begin_layout Standard
(la formula è stata mandata a capo perché era troppo lunga)
\end_layout

\begin_layout Subsection*
Esempio
\end_layout

\begin_layout Standard
Assumiamo di avere due classi con rispettivamente 
\begin_inset Formula $N_{1}$
\end_inset

 e 
\begin_inset Formula $N_{2}$
\end_inset

 microflussi in ingresso, di tipo 
\emph on
short-dependent.
 
\end_layout

\begin_layout Standard
I parmetri sono:
\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{1}=600kbit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{2}=800kbit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b_{1}=40kbit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b_{2}=100kbit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $d_{1}=0.012$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $d_{2}=0.051$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $p_{1}=0.01$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $p_{2}=0.02$
\end_inset


\end_layout

\begin_layout Standard
Confrontiamo EDF,GPS e SP, sapendo che i parametri sono:
\end_layout

\begin_layout Itemize
\begin_inset Formula $\delta_{1}=0.1\,\left[s\right]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $\delta_{2}=0.05\,\left[s\right]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $w_{1}=0.8$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $w_{2}=0.2$
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename net-058.png
	scale 30

\end_inset


\end_layout

\begin_layout Standard
Ad alto carico, i tre scheduler tendono a lavorare in modo diverso, mentre
 a basso carico sono quasi identici.
\end_layout

\begin_layout Standard
Ricordiamoci sempre che stiamo analizzando il caso del 
\emph on
short-dependent 
\emph default
traffic.
\end_layout

\begin_layout Standard
Ma cosa succede nel caso generale? Se il traffico non è 
\emph on
short-dependent
\emph default
 non abbiamo delle formule analitiche ma possiamo comunque fare dei calcoli
 numerici.
\end_layout

\begin_layout Part*
Multihop case
\end_layout

\begin_layout Standard
Puntiamo più a fare una approssimazione in questo caso, piuttosto che a
 trovare un limite superiore.
 La prima approssimazione è che utilizziamo MVA per prendere un limite superiore
 e assumiamo che tutto il traffico sia di tipo gaussiano.
 Sotto specifiche condizioni potremo rifare gli stessi ragionamenti anche
 senza traffico gaussiano.
\end_layout

\begin_layout Standard
In generale vedremo che possiamo ragionare come fatto fino ad ora e procedere
 in modo iterativo: calcoliamo l'uscita del primo scheduler dato l'ingresso
 e riutilizziamo i dati in ingresso ad uno scheduler successivo.
 L'assunzione principale sarà poi che il 
\series bold
\emph on
delay end-to-end
\series default
\emph default
 sarà calcolato come 
\begin_inset Formula 
\[
d_{e2e}=d_{1}+d_{2}+d_{3}+...
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
f_{de2e}\left(t\right)=d_{d1}\left(t\right)+f_{d2}\left(t\right)+...
\]

\end_inset


\end_layout

\begin_layout Standard
Fino ad adesso abbiamo analizzato traffico 
\begin_inset Quotes eld
\end_inset

nuovo
\begin_inset Quotes erd
\end_inset

 in ingresso: 
\series bold
\emph on
fresh traffic
\series default
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x\left(t\right)\right)=rt\\
Var\left(x\left(t\right)\right)=rbt^{2H}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Per 
\begin_inset Quotes eld
\end_inset

nuovo
\begin_inset Quotes erd
\end_inset

 intendiamo prodotto da una sorgente di traffico e non già passato in rete.
\end_layout

\begin_layout Standard
Sappiamo che c'è una bella differenza tra:
\end_layout

\begin_layout Itemize
\begin_inset Formula $H=\frac{1}{2}$
\end_inset

 (short-range dependent, tipico di VoIP)
\end_layout

\begin_layout Itemize
\begin_inset Formula $\frac{1}{2}<H<1$
\end_inset

 (long-range dependent, tipico di video streaming)
\end_layout

\begin_layout Standard
Però nel caso reale è diverso.
\end_layout

\begin_layout Standard
Assumiamo di avere uno scheduler SP con due ingressi 
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

 e 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

 e capacità di uscita 
\begin_inset Formula $C$
\end_inset

.
 In uscita dallo scheduler avremo due flussi di traffico: 
\begin_inset Formula $x_{1,out}\left(t\right)$
\end_inset

 e 
\begin_inset Formula $x_{2,out}\left(t\right)$
\end_inset

.
 Qual'è la caratterizzazione del traffico di uscita?
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{1,out}\left(t\right)\rightarrow\begin{cases}
E\left(x_{1,out}\left(t\right)\right)=?\\
Var\left(x_{1,out}\left(t\right)\right)=?
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{2,out}\left(t\right)\rightarrow\begin{cases}
E\left(x_{2,out}\left(t\right)\right)=?\\
Var\left(x_{2,out}\left(t\right)\right)=?
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Nel caso SP siamo fortunati, conosciamo già 
\begin_inset Formula $x_{1,out}\left(t\right)$
\end_inset

.
 Infatti viene sempre servito per primo, quindi in teoria non viene modificato!
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{1,out}\left(t\right)\rightarrow\begin{cases}
E\left(x_{1,out}\left(t\right)\right)=r_{1}t\\
Var\left(x_{1,out}\left(t\right)\right)\overset{SP}{=}Var\left(x_{1}\left(t\right)\right)
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{2,out}\left(t\right)\rightarrow\begin{cases}
E\left(x_{2,out}\left(t\right)\right)=r_{2}t\\
Var\left(x_{2,out}\left(t\right)\right)=???
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Invece per la classe 2:
\end_layout

\begin_layout Itemize
La media è facile: 
\series bold
se lo scheduler lavora in condizioni stabili perché 
\begin_inset Formula $r_{1}+r_{2}<C$
\end_inset

, allora sappiamo che la media in ingresso è uguale alla media in uscita
 
\series default
(stiamo anche assumendo che connection admission control sta funzionando
 correttamente).
\end_layout

\begin_deeper
\begin_layout Itemize
In questo caso siamo fortunati perché in SP la prima classe non viene toccata,
 quindi solo in questo caso specifico non cambia.
\end_layout

\end_deeper
\begin_layout Itemize
Sfortunatamente invece, la varianza varia.
 Quindi anche se abbiamo il traffico in ingresso che rispecchia la nostra
 teoria sul 
\emph on
fresh traffic
\emph default
, la varianza cambierà.
\end_layout

\begin_layout Itemize
Come calcoliamo la varianza per 
\begin_inset Formula $x_{2,out}\left(t\right)$
\end_inset

? 
\end_layout

\begin_deeper
\begin_layout Itemize
Abbiamo due flussi, uno in ingresso e uno in uscita: 
\begin_inset Formula $x_{i,in}\left(t\right)$
\end_inset

 e 
\begin_inset Formula $x_{i,out}\left(t\right)$
\end_inset

.
 Sappiamo inoltre la caratteristica di servizio dello scheduler da 
\begin_inset Formula $S_{i}\left(t\right)$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Formula 
\[
X_{i,out}\left(t\right)=min\left(x_{i,in}\left(t\right),S_{i}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Se 
\begin_inset Formula $S_{i}\left(t\right)$
\end_inset

 è maggiore di 
\begin_inset Formula $x_{i,in}\left(t\right)$
\end_inset

 otteniamo 
\begin_inset Formula $x_{i,in}\left(t\right)$
\end_inset

.
 Perché? Se lo scheduler può servire 
\begin_inset Formula $0.5Mbps$
\end_inset

 e fornisco in ingresso 
\begin_inset Formula $1Mbps$
\end_inset

, in uscita avrò ovviamente 
\begin_inset Formula $0.5Mbps$
\end_inset

.
\end_layout

\begin_layout Itemize
Ma come otteniamo la varianza? Abbiamo una relazione che dice che se abbiamo
 due variabili casuali 
\begin_inset Formula $x,y$
\end_inset

 distribuite in modo 
\bar under
gaussiano
\bar default
 (caso comune perché abbiamo tanti flussi di traffico individuali che sommati
 formano il flusso di traffico globale (teorema del limite centrale)).
\end_layout

\begin_layout Itemize
Abbiamo una 
\series bold
relazione statistica fondamentale
\series default
 per noi che ci dice che:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
z=min\left(x,y\right)\Rightarrow Var\left(z\right)\leq max\left(Var\left(x\right),Var\left(y\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x_{i,out}\left(t\right)\right)\leq max\left(Var\left(x_{i,in}\left(t\right)\right),Var\left(S_{i}\left(t\right)\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Consideriamo un flusso che attraversa una sequenza di 
\begin_inset Formula $H$
\end_inset

 schedulers, dove ogni scheduler fornisce servizi differenziati a più classi
 di servizio, numerate da 
\begin_inset Formula $1$
\end_inset

 a 
\begin_inset Formula $Q_{h}$
\end_inset

.
 Nello scheduler 
\emph on
h-esimo
\emph default
, il flusso viene servito nella classe di servizio 
\begin_inset Formula $q_{h}$
\end_inset

.
\end_layout

\begin_layout Itemize
Denotiamo il traffico cumulativo in ingresso e uscita all'
\emph on
h-esimo
\emph default
 scheduler come:
\begin_inset Formula 
\[
X_{q_{h}}^{in}\left(t\right)\quad,\quad X_{q_{h}}^{out}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Per riferirci invece al 
\emph on
service envelope
\emph default
 del flusso taggato nello scheduler 
\emph on
h-esimo
\emph default
 come:
\begin_inset Formula 
\[
S_{q_{h}}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Possiamo mostrare che il traffico di uscita cumulativo del flusso taggato
 nello scheduler 
\emph on
h-esimo
\emph default
 è dato da:
\begin_inset Formula 
\[
X_{q_{h}}^{out}\left(t\right)=min\left(X_{q_{h}}^{in}\left(t\right),S_{q_{h}}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Lo scheduler non puoi mandare in output più traffico di quello offerto in
 ingresso, quindi:
\begin_inset Formula 
\[
X_{q_{h}}^{out}\left(t\right)\leq X_{q_{h}}^{in}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Per uno scheduler SP abbiamo che:
\begin_inset Formula 
\[
S_{q_{h}}\left(t\right)=max\left(0,\, Ct-\sum_{j=1}^{q_{h}-1}X_{j}^{in}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Cioè il servizio disponibile è:
\begin_inset Formula 
\[
X_{av,q_{h}}^{out}\left(t\right)
\]

\end_inset

 
\end_layout

\begin_layout Itemize
Definiamo la capacità disponibile con:
\begin_inset Formula 
\[
\Xi_{av,q_{h}}^{out}\left(t\right)
\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Questa è la capacità di uscita disponibile per il traffico di riferimento
\end_layout

\begin_layout Itemize
La capacità disponibile è diverso dal servizio disponibile.
 Il servizio disponibile rappresenta un traffico di uscita, mentre la capacità
 disponibile rappresenta il potenziale volume di traffico che lo scheduler
 può mandare in output per il flusso di traffico di riferimento.
\end_layout

\begin_layout Itemize
È abbastanza intuitivo che per lo scheduler SP abbiamo:
\begin_inset Formula 
\[
\Xi_{av,q_{h}}^{out}\left(t\right)=max\left(0,\, Ct-\sum_{j=1}^{q_{h}-1}X_{j}^{in}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Infatti, uno strict priority scheduler, l'ammontare di capacità disponibile
 per il flusso di riferimento non dipende dal traffico arretrato nella coda
 corrispondente, poiché dipende solamente dal volume di traffico offerto
 alla classe di servizio con priorità massima.
\end_layout

\begin_layout Itemize
Quindi la capacità disponibile rappresenta la capacità disponibile per il
 flusso di traffico di riferimento, indipendentemente dal volume di traffico
 che offre allo scheduler.
 Cioè il traffico in ingresso nella classe 
\emph on
i-esima
\emph default
 potrà essere uguale a, maggiore di o minore del minimo traffico arretrato
 in ingresso e, in tutti questi casi, la capacità sarà data da:
\begin_inset Formula 
\[
\Xi_{av,q_{h}}^{out}\left(t\right)=max\left(0,\, Ct-\sum_{j=1}^{q_{h}-1}X_{j}^{in}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Lo scheduler non può mandare in output, un traffico maggiore della capacità
 disponibile, quindi:
\begin_inset Formula 
\[
X_{q_{h}}^{out}\left(t\right)\leq\Xi_{av,q_{h}}^{out}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Dunque:
\begin_inset Formula 
\[
X_{q_{h}}^{out}\left(t\right)\leq S_{q_{h}}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Poiché lo scheduler non può servire più traffico della capacità disponibile
 per il servizio, quindi in conclusione abbiamo che:
\begin_inset Formula 
\[
Var\left(X^{out}\left(t\right)\right)\leq Var\left(B_{q_{h}}^{out}\left(t\right)\right)\leq max\left(Var\left(B_{q_{h}}^{in}\left(t\right)\right),Var\left(S_{q_{h}}\left(t\right)\right)\right)
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Data una sequenza di 
\begin_inset Formula $H$
\end_inset

 nodi attraversati da un flusso di traffico, procediamo iterativamente iniziando
 dal nodo 
\begin_inset Formula $1$
\end_inset

 e, sapendo che:
\begin_inset Formula 
\[
X_{q_{h+1}}^{in}\left(t\right)\approx B_{q_{h}}^{out}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Possiamo allora calcolare la caratterizzazione statistica del traffico di
 input di ogni nodo.
\end_layout

\begin_layout Itemize
Allora possiamo calcolare la densità di probabilità del ritardo 
\begin_inset Formula $d_{h}$
\end_inset

 all'
\emph on
h-esimo
\emph default
 nodo utilizzando la MVA.
 Sappiamo che il ritardo 
\emph on
end-to-end
\emph default
 sarà:
\begin_inset Formula 
\[
d_{e2e}=d_{1}+d_{2}+...+d_{h}
\]

\end_inset


\end_layout

\begin_layout Itemize
Calcoliamo poi la densità di probabilità del ritardo 
\emph on
end-to-end
\emph default
 come:
\begin_inset Formula 
\[
f_{e2e}\left(t\right)=d_{d1}\left(t\right)+f_{d2}\left(t\right)+...+f_{dH}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Infine, la probabilità di violare una soglia di ritardo 
\emph on
end-to-end
\emph default
 sarà:
\begin_inset Formula 
\[
P_{r}\left(d_{e2e}>d\right)=\int_{d}^{+\infty}f_{d_{e2e}}\left(\tau\right)d\tau
\]

\end_inset


\end_layout

\begin_layout Itemize
Considerazioni simili possono essere fatte per gli altri tipi di schedulers.
\end_layout

\begin_layout Standard
Proseguiamo prendendo un altro esempio:
\end_layout

\begin_layout Itemize
Due classi con 
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

 e 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

 con un qualche tipo di scheduler
\end_layout

\begin_layout Itemize
In cascata abbiamo un altro scheduler (di qualche tipo non noto) con altre
 due classi di servizio.
\end_layout

\begin_layout Itemize
Assumiamo che il flusso che entra da 
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

 nel primo scheduler poi esca a metà, mentre entra un altro flusso dal mezzo
 verso la prima classe del secondo scheduler (
\begin_inset Formula $y_{1}\left(t\right)$
\end_inset

).
 Il flusso che entra invece in 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

 esce dal primo scheduler chiamato 
\begin_inset Formula $y_{2}\left(t\right)$
\end_inset

 e va nella seconda classe del secondo scheduler.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{1}\left(t\right)\right)=r_{1}t\\
Var\left(x_{1}\left(t\right)\right)=r_{1}b_{1}t^{2H_{1}}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{2}\left(t\right)\right)=r_{2}t\\
Var\left(x_{2}\left(t\right)\right)=r_{2}b_{2}t^{2H_{2}}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(y_{1}\left(t\right)\right)=r_{3}t\\
Var\left(y_{1}\left(t\right)\right)=r_{3}b_{3}t^{2H_{3}}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Assumiamo adesso di voler calcolare il ritardo massimo end-to-end.
 Ora possiamo farlo!
\end_layout

\begin_layout Standard
Però prima c'è un problema: non sappiamo niente su 
\begin_inset Formula $y_{2}\left(t\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(y_{2}\left(t\right)\right)=r_{2}t\\
Var\left(y_{2}\left(t\right)\right)=max\left(Var\left(x_{2}\left(t\right)\right),Var\left(S_{2}\left(t\right)\right)\right)
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Infatti sappiamo l'espressione di 
\begin_inset Formula $S_{2}\left(t\right)$
\end_inset

, se sappiamo il tipo di scheduler.
 Utilizziamo 
\begin_inset Formula $=$
\end_inset

 invece di 
\begin_inset Formula $\leq$
\end_inset

per metterci nel caso pessimo e mantenere una analisi conservativa.
\end_layout

\begin_layout Standard
Ora sappiamo cosa c'è (in termini di media e varianza) all'input del secondo
 scheduler, quindi possiamo proseguire la nostra analisi riutilizzando i
 dati che abbiamo ottenuto nel primo step.
\end_layout

\begin_layout Standard
Possiamo quindi calcolare:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{2,1}>d\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Dove 
\begin_inset Formula $D_{2,1}$
\end_inset

 significa il delay del flusso 2 nello scheduler 1.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{2,1}\left(t\right)=-\frac{E\left(x_{2}\left(t\right)\right)-E\left(S_{2}\left(t+d\right)\right)}{\sqrt{Var\left(x_{2}\left(t\right)\right)+Var\left(S_{2}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Quindi sapendo 
\begin_inset Formula $\alpha_{2,1}\left(t\right)$
\end_inset

 posso calcolare 
\begin_inset Formula $P_{r}\left(D_{2,1}>d\right)$
\end_inset

 perché l'unica incognita in 
\begin_inset Formula $\alpha_{2,1}\left(t\right)$
\end_inset

 è 
\begin_inset Formula $d$
\end_inset

.
\end_layout

\begin_layout Standard
Per il secondo scheduler:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{2,2}>d\right)=?
\]

\end_inset


\begin_inset Formula 
\[
\alpha_{1,2}\left(t\right)=-\frac{E\left(y_{2}\left(t\right)\right)-E\left(G_{2}\left(t+d\right)\right)}{\sqrt{max\left(Var\left(x_{2}\left(t\right)\right),Var\left(S_{2}\left(t\right)\right)\right)+Var\left(G_{2}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
E anche qua l'incognita è solo 
\begin_inset Formula $d$
\end_inset

, quindi possiamo ricavare l'espressione analitica.
\end_layout

\begin_layout Standard
Poi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
D_{2,end-to-end}=D_{2,1}+D_{2,2}
\]

\end_inset


\end_layout

\begin_layout Standard
E quindi possiamo trovare la nostra probabilità.
\end_layout

\begin_layout Subsection*
Esempio
\end_layout

\begin_layout Standard
Abbiamo 
\begin_inset Formula $H$
\end_inset

 schedulers di tipo SP.
\end_layout

\begin_layout Standard
Abbiamo dei 
\emph on
cross flows
\emph default
 che entrano ed escono da ognuno dei vari schedulers, mentre poi ci sono
 dei 
\emph on
through flows
\emph default
 che attraversano tutti gli schedulers.
\end_layout

\begin_layout Standard
Lavoriamo in un caso 
\emph on
short-range dependent
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-059.png
	scale 50

\end_inset


\end_layout

\begin_layout Itemize
Ogni 
\emph on
cross flow
\emph default
 ha caratteristiche 
\begin_inset Formula $N_{1},r_{1},b_{1}$
\end_inset

.
\end_layout

\begin_layout Itemize
Il 
\emph on
through flow
\emph default
 ha caratteristiche 
\begin_inset Formula $N_{2},r_{2},b_{2}$
\end_inset

.
\end_layout

\begin_layout Standard
Vogliamo vedere il ritardo end-to-end dei through flows.
 Iniziamo a guardare quello che succede al through flow dopo il primo scheduler.
 In ingresso abbiamo: 
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{1}\left(t\right)\right)=N_{1}r_{1}t\\
Var\left(x_{1}\left(t\right)\right)=N_{1}R_{1}b_{1}t
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{2}\left(t\right)\right)=N_{2}r_{2}t\\
Var\left(x_{2}\left(t\right)\right)=N_{2}R_{2}b_{2}t
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
In uscita dal primo scheduler abbiamo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{2,out}\left(t\right)\right)=N_{2}r_{2}t\\
Var\left(x_{2,out}\left(t\right)\right)=max\left(Var\left(x_{2}\left(t\right)\right),Var\left(S_{2}\left(t\right)\right)\right)=max\left(N_{2}r_{2}b_{2}t,Var\left(Ct-x_{1}\left(t\right)\right)\right)=max\left(N_{2}r_{2}b_{2}t,\, N_{1}r_{1}b_{1}t\right)
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
(Nota: la varianza di 
\begin_inset Formula $Ct$
\end_inset

 è 
\begin_inset Formula $0$
\end_inset

)
\end_layout

\begin_layout Standard
Per semplicità assumiamo che: 
\begin_inset Formula 
\[
N_{2}r_{2}b_{2}t\geq N_{1}r_{1}b_{1}t=N_{2}r_{2}b_{2}t
\]

\end_inset


\end_layout

\begin_layout Standard
Per le assunzioni e il tipo di rete che abbiamo, ci basta fare il conto
 per uno degli scheduler e poi replicarlo per tutti i seguenti.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{2}>t\right)=exp\left(-2\frac{C-A_{2}}{B_{2}^{2}}\left(\left(C-A_{1}\right)B_{2}-\left(C-A_{2}\right)B_{1}\right)t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Dove:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{1}=N_{1}r_{1}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
A_{2}=N_{1}r_{1}+N_{2}r_{2}
\]

\end_inset


\begin_inset Formula 
\[
B_{1}=N_{1}r_{1}b_{1}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
B_{2}=N_{1}r_{1}b_{1}+N_{2}r_{2}b_{2}
\]

\end_inset


\end_layout

\begin_layout Standard
Prendiamo una parte delle espressione esponenziale come parametro:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
k=2\frac{C-A_{2}}{B_{2}^{2}}\left(\left(C-A_{1}\right)B_{2}-\left(C-A_{2}\right)B_{1}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Scheduler:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{2}>t\right)=e^{-kt}
\]

\end_inset


\begin_inset Formula 
\[
D_{i}\sim f_{D_{2}}\left(t\right)=ke^{-kt}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
D_{2,end-to-end}=D_{1}+D_{2}+D_{3}+....+D_{H}\sim f_{D_{1}}\left(t\right)*f_{D_{2}}\left(t\right)*...*f_{D_{H}}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Questa è una distribuzione erlang
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
f_{D_{2,end-to-end}}\left(t\right)=\frac{k^{H}t^{H-1}}{\left(H-1\right)!}e^{-kt}
\]

\end_inset


\end_layout

\begin_layout Standard
Anche se questo è stato un esercizio abbastanza artificiale.
\end_layout

\begin_layout Subsection*
Esempio (set slides numero 23)
\end_layout

\begin_layout Standard
Abbiamo uno scheduler FIFO con in ingresso 3 flussi 
\begin_inset Quotes eld
\end_inset

fresh
\begin_inset Quotes erd
\end_inset

 di tipo video.
\end_layout

\begin_layout Itemize
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\begin{cases}
r_{1}=146.64\, kbit/s\\
b_{1}=174.577\, kbit\\
H_{1}=0.9134
\end{cases}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\begin{cases}
r_{2}=156.48\, kbit/s\\
b_{2}=55.214\, kbit\\
H_{2}=0.8988
\end{cases}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
\begin_inset Formula $x_{3}\left(t\right)$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $\begin{cases}
r_{3}=440.16\, kbit/s\\
b_{3}=218.102\, kbit\\
H_{3}=0.8968
\end{cases}$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Abbiamo due casi su 
\begin_inset Formula $C$
\end_inset

 di uscita:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Formula $C=1\cdot10^{6}\, bit/s$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $C=2\cdot10^{6}bit/s$
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Vogliamo calcolare il delay 
\begin_inset Formula $D$
\end_inset

 per i vari flussi
\end_layout

\begin_layout Standard
Sappiamo che per gli scheduler FIFO:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{E\left(x\left(t\right)\right)-C\left(t+d\right)}{\sqrt{Var\left(x\left(t\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x\left(t\right)=x_{1}\left(t\right)+x_{2}\left(t\right)+x_{3}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Vediamo un caso in cui 
\begin_inset Formula 
\[
d=150\, ms
\]

\end_inset


\end_layout

\begin_layout Standard
Abbiamo bisogno media e varianza di 
\begin_inset Formula $x\left(t\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(x\left(t\right)\right)=E\left(x_{1}\left(t\right)\right)+E\left(x_{2}\left(t\right)\right)+E\left(x_{3}\left(t\right)\right)=\left(r_{1}+r_{2}+r_{3}\right)t=0.7437\cdot10^{6}\cdot t\:\left[bit\right]
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x\left(t\right)\right)=r_{1}b_{1}t^{2H_{1}}+r_{2}b_{2}t^{2H_{2}}+r_{3}b_{3}t^{2H_{3}}=...
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Downarrow
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{0.7437\cdot10^{6}-C\cdot\left(t+0.15\right)}{\sqrt{0.0256\cdot10^{12}\cdot t^{1.8268}+0.00864\cdot10^{12}\cdot t^{1.7976}+0.09596\cdot10^{12}\cdot t^{1.7976}}}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Downarrow
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
t^{*}:\;\alpha\left(t\right)\,\text{is the absolute minimum of }\alpha\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Potremmo farlo con 
\begin_inset Formula 
\[
\frac{d\alpha\left(t\right)}{dt}=0
\]

\end_inset


\end_layout

\begin_layout Standard
Ma funziona solo nel caso 
\emph on
short-range dependent
\emph default
.
\end_layout

\begin_layout Standard
La cosa migliore che possiamo fare è un grafico approssimato di 
\begin_inset Formula $\alpha\left(t\right)$
\end_inset

.
\end_layout

\begin_layout Standard
Nel caso in cui 
\begin_inset Formula 
\[
C=10^{6}
\]

\end_inset


\end_layout

\begin_layout Standard
Abbiamo il grafico seguente calcolato numericamente:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-060.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{min}\approx0.93
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D>0.15\right)=e^{-\frac{\alpha_{min}^{2}}{2}}\approx0.64
\]

\end_inset

 (probabilità di superare la soglia 60%!)
\end_layout

\begin_layout Standard
Il carico del sistema è dell'
\series bold
80%
\series default
 circa (confrontando la capacità in ingresso con quella di uscita).
\end_layout

\begin_layout Standard
Invece, nel caso:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
C=2\cdot10^{6}
\]

\end_inset


\end_layout

\begin_layout Standard
Abbiamo il grafico:
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-061.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Il carico è del 
\begin_inset Formula $\sim40\%$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha\approx4.1
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D>0.15\, ms\right)=e^{-\frac{\alpha_{min}^{2}}{2}}\approx1.6\cdot10^{-4}
\]

\end_inset


\end_layout

\begin_layout Standard
(probabilità di superare la soglia molto più bassa)
\end_layout

\begin_layout Subsection*
Esercizio scenario multihop
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-062.png
	lyxscale 70
	scale 30

\end_inset


\end_layout

\begin_layout Standard
(Per qualche motivo, nella tabella dei parametri, per 
\begin_inset Formula $y_{1}$
\end_inset

 e 
\begin_inset Formula $y_{2}$
\end_inset

 c'è 
\begin_inset Formula $m$
\end_inset

 e 
\begin_inset Formula $a$
\end_inset

 invece di 
\begin_inset Formula $r$
\end_inset

 e 
\begin_inset Formula $b$
\end_inset

, probabilmente per distinguere il traffico di tipo 
\emph on
long-range dependent
\emph default
)
\end_layout

\begin_layout Itemize
Il traffico di 
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

 e 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

 è di tipo 
\emph on
short-range dependent
\emph default
, quindi non scriviamo il valore del parametro 
\begin_inset Formula $H_{i}$
\end_inset

 perché sappiamo già essere 
\begin_inset Formula $\frac{1}{2}$
\end_inset

.
\end_layout

\begin_layout Standard
Vogliamo calcolare 
\begin_inset Formula $P_{r}\left(D_{x_{2,out}}>90\, ms\right)$
\end_inset

, cioè la probabilità che il flusso 
\begin_inset Formula $x_{2,out}$
\end_inset

 superi il ritardo di 
\begin_inset Formula $90ms$
\end_inset

 nello scheduler 3.
\end_layout

\begin_layout Standard
Assumiamo la capacità di uscita degli scheduler in ingresso sia sufficiente
 per gestire il traffico in ingresso in modo stabile (ignoriamo i valori
 specifici).
\end_layout

\begin_layout Standard
Per risolvere il problema abbiamo bisogno la 
\emph on
two-moment description 
\emph default
di 
\begin_inset Formula $x_{1,out}\left(t\right)$
\end_inset

 e 
\begin_inset Formula $x_{2,out}\left(t\right)$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
z_{1}\left(t\right)\rightarrow\begin{cases}
E\left(z_{1}\left(t\right)\right)=r_{z_{1}}\cdot t=2\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(z_{1}\left(t\right)\right)=r_{z_{1}}\cdot b_{z_{1}}\cdot t=2\cdot10^{6}\cdot0.15\cdot10^{6}\cdot t=0.3\cdot10^{6}\cdot t\;\left[bit^{2}\right]
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
y_{1}\left(t\right)\rightarrow\begin{cases}
E\left(y_{1}\left(t\right)\right)=r_{y_{1}}\cdot t=32\cdot10^{5}\cdot t\:\left[bit\right]\\
Var\left(y_{1}\left(t\right)\right)=r_{y_{1}}\cdot b_{y_{1}}\cdot t=16\cdot10^{12}\cdot t^{1.98}\;\left[bit^{2}\right]
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{1}\left(t\right)\rightarrow\begin{cases}
E\left(x_{1}\left(t\right)\right)=r_{x_{1}}\cdot t=3\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(x_{1}\left(t\right)\right)=r_{x_{1}}\cdot b_{x_{1}}\cdot t=0.3\cdot10^{12}\;\left[bit^{2}\right]
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{1,out}\left(t\right)\rightarrow\begin{cases}
E\left(x_{1,out}\left(t\right)\right)=E\left(x_{1}\left(t\right)\right)=3\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(x_{1,out}\left(t\right)\right)=max\left(Var\left(x_{1}\left(t\right)\right),\, Var\left(S_{x_{1}}\left(t\right)\right)\right)
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{x_{1}}\left(t\right)=\text{dipende dalla policy dello scheduler}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{x_{1}}\left(t\right)=Ct-z_{1}\left(t\right)-y_{1}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{x_{1}}\left(t\right)\right)=Var\left(Ct\right)+Var\left(z_{1}\left(t\right)\right)+Var\left(y_{1}\left(t\right)\right)=0+0.3\cdot10^{6}+16\cdot10^{12}\cdot t^{1.98}\;\left[bit^{2}\right]
\]

\end_inset


\end_layout

\begin_layout Standard
(
\series bold
Nota
\series default
: Ricordarsi sempre che quando lavoriamo con le varianze, tutto diventa
 
\series bold
sommato
\series default
)
\end_layout

\begin_layout Standard
Tornando al calcolo della varianza per 
\begin_inset Formula $x_{1,out}\left(t\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x_{1,out}\left(t\right)\right)=max\left(Var\left(x_{1}\left(t\right)\right),\, Var\left(S_{x_{1}}\left(t\right)\right)\right)=0.3\cdot10^{12}\cdot t+16\cdot10^{12}\cdot t^{1.98}
\]

\end_inset


\end_layout

\begin_layout Standard
Ora dobbiamo rifare lo stesso conto per 
\begin_inset Formula $x_{2,out}\left(t\right)$
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
z_{2}\left(t\right)\rightarrow\begin{cases}
E\left(z_{2}\left(t\right)\right)=r_{z_{2}}\cdot t=1\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(z_{2}\left(t\right)\right)=r_{z_{2}}\cdot b_{z_{2}}\cdot t=0.05\cdot10^{12}\cdot t\;\left[bit^{2}\right]
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
y_{2}\left(t\right)\rightarrow\begin{cases}
E\left(y_{2}\left(t\right)\right)=m_{y_{2}}\cdot t=2.5\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(y_{2}\left(t\right)\right)=m_{y_{2}}\cdot a_{y_{2}}\cdot t^{2H_{y_{2}}}=12.5\cdot10^{12}\cdot t^{1.7}\;\left[bit^{2}\right]
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{2}\left(t\right)\rightarrow\begin{cases}
E\left(x_{2}\left(t\right)\right)=r_{x_{2}}\cdot t=4\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(x_{2}\left(t\right)\right)=r_{x_{2}}\cdot b_{x_{2}}\cdot t=4\cdot10^{6}\cdot0.0125\cdot10^{6}t=0.05\cdot10^{12}\;\left[bit^{2}\right]
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{2,out}\left(t\right)\rightarrow\begin{cases}
E\left(x_{2,out}\left(t\right)\right)=E\left(x_{2}\left(t\right)\right)=4\cdot10^{6}\cdot t\:\left[bit\right]\\
Var\left(x_{2,out}\left(t\right)\right)=max\left(Var\left(x_{2}\left(t\right)\right),\, Var\left(S_{x_{2}}\left(t\right)\right)\right)
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
Sappiamo che nello scheduler EDF:
\begin_inset Formula 
\[
S_{i}\left(t\right)=Ct-\sum_{n\neq i}x_{n}\left(t-max\left(0,\delta_{n}-\delta_{i}\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\Downarrow
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{x_{2}}\left(t\right)\right)=0+\sum_{n\neq x_{2}}Var\left(x_{n}\left(t-max\left(0,\delta_{n}-\delta_{x_{2}}\right)\right)\right)=Var\left(z_{2}\left(t-max\left(0,\delta_{z_{2}}-\delta_{x_{2}}\right)\right)\right)+Var\left(y_{2}\left(t-max\left(0,\delta_{y_{2}}-\delta_{x_{2}}\right)\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{x_{2}}\left(t\right)\right)=0.05\cdot10^{12}\left(t-0.09\right)+12.5\cdot10^{12}\cdot\left(t-0.04\right)^{1.7}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(x_{2,out}\left(t\right)\right)=max\left(0.05\cdot10^{12}\cdot t,\,0.05\cdot10^{12}\cdot\left(t-0.09\right)+12.5\cdot10^{12}\cdot\left(t-0.04\right)^{1.7}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Arrivati a questo punto conosciamo la 
\emph on
two-moment description
\emph default
 dei flussi in ingresso all'ultimo scheduler.
 Vogliamo calcolare la probabilità che il ritardo di 
\begin_inset Formula $x_{2,out}\left(t\right)$
\end_inset

 sia maggiore di 
\begin_inset Formula $90ms$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{x_{2,out}}\left(t\right)=-\frac{E\left(x_{2,out}\left(t\right)\right)-E\left(S_{x_{2,out}}\left(t+d\right)\right)}{\sqrt{Var\left(x_{2,out}\left(t\right)\right)+Var\left(S_{x_{2,out}}\left(t+d\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Standard
Ci manca ancora 
\begin_inset Formula $S_{x_{2,out}}\left(t\right)$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
S_{x_{2,out}}\left(t\right)=Ct-x_{1,out}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(S_{x_{2,out}}\left(t\right)\right)=Ct-E\left(x_{1,out}\left(t\right)\right)=25\cdot10^{6}\cdot t-3\cdot10^{6}\cdot t=22\cdot10^{6}\cdot t
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{x_{2,out}}\left(t\right)\right)=0+Var\left(x_{1,out}\left(t\right)\right)=0+0.3\cdot10^{12}\cdot t+16\cdot10^{12}\cdot t^{1.98}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{x_{2,out}}\left(t\right)=-\frac{4\cdot10^{6}\cdot t-22\cdot10^{6}\cdot\left(t+d\right)}{\sqrt{max\left(0.05\cdot10^{12}\cdot t,\,0.05\cdot10^{12}\cdot\left(t-0.09\right)+12.5\cdot10^{12}\cdot\left(t-0.04\right)^{1.7}\right)+0.3\cdot10^{12}\cdot\left(t+d\right)+16\cdot10^{12}\cdot\left(t+d\right)^{1.98}}}
\]

\end_inset


\end_layout

\begin_layout Standard
Sostituiamo 
\begin_inset Formula $d=0.09\:\left[s\right]$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{x_{2,out}}\left(t\right)=\text{espressione analitica in fnzione di }t
\]

\end_inset


\end_layout

\begin_layout Standard
Vediamo il grafico logaritmo della funzione 
\begin_inset Formula $\alpha_{x_{2,out}}\left(t\right)$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-063.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Il minimo di questa funzione è 
\begin_inset Formula $\alpha\approx3.5$
\end_inset


\end_layout

\begin_layout Standard
Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D_{x_{2,out}}>0.09\right)\approx10^{-4}
\]

\end_inset


\end_layout

\begin_layout Subsection*
Esercizio (blocco slides 18 examples)
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-064.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Dove abbiamo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
x_{1}\left(t\right),x_{2}\left(t\right),y_{1}\left(t\right),z_{1}\left(t\right)\sim\begin{cases}
E\left(..\right)=rt\\
Var\left(..\right)=rbt
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Itemize
Per il primo scheduler:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
S_{x_{2}}\left(t\right)=Ct-x_{1}\left(t\right)
\]

\end_inset


\begin_inset Formula 
\[
E\left(S_{x_{2}}\left(t\right)\right)=E\left(Ct-x_{1}\left(t\right)\right)=Ct-rt=\left(C-r\right)t
\]

\end_inset


\begin_inset Formula 
\[
Var\left(S_{x_{2}}\left(t\right)\right)=max\left(Var\left(Ct\right),Var\left(x_{1}\left(t\right)\right)\right)=Var\left(x_{1}\left(t\right)\right)=rbt
\]

\end_inset


\begin_inset Formula 
\[
\alpha_{x_{2}}\left(t\right)=-\frac{E\left(x_{2}\left(t\right)\right)-E\left(S_{x_{2}}\left(t\right)\right)}{\sqrt{Var\left(x_{2}\left(t\right)\right)+Var\left(S_{x_{2}}\left(t+d\right)\right)}}=\frac{C\left(t+d\right)-r\left(2t+d\right)}{\sqrt{2b\left(2t+d\right)}}
\]

\end_inset


\begin_inset Formula 
\[
P_{r}\left(D_{1}>d\right)=e^{-\frac{C\left(C-2t\right)}{2rb}d}=e^{-k_{1}d}\qquad;\: k_{1}=\frac{C\left(C-2r\right)}{2rb}
\]

\end_inset


\begin_inset Formula 
\[
f_{D_{1}}\left(t\right)=k_{1}e^{-k_{1}t}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Il 
\series bold
secondo scheduler
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
E\left(y_{2}\left(t\right)\right)=E\left(x_{2}\left(t\right)\right)=rt
\]

\end_inset


\begin_inset Formula 
\[
Var\left(x_{2}\left(t\right)\right)=max\left(Var\left(x_{2}\left(t\right)\right),Var\left(S_{x_{2}}\left(t\right)\right)\right)=max\left(rbt,rbt\right)=rbt
\]

\end_inset


\begin_inset Formula 
\[
E\left(S_{y_{2}}\left(t\right)\right)=Ct-E\left(y_{1}\left(t-max\left(0,\delta_{1}-\delta_{2}\right)\right)\right)=Ct-r\left(t-max\left(0,\delta_{1}-\delta_{2}\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
Var\left(S_{y_{2}}\left(t\right)\right)=Var\left(y_{1}\left(t-max\left(0,\delta_{1}-\delta_{2}\right)\right)\right)=rb\left(t-max\left(0,\delta_{1}-\delta_{2}\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
\alpha_{EDF}\left(t\right)=-\frac{E\left(y_{2}\left(t\right)\right)-E\left(S_{y_{2}}\left(t+d\right)\right)}{\sqrt{Var\left(y_{2}\left(t\right)\right)+Var\left(S_{y_{2}}\left(t+d\right)\right)}}=\frac{-rt+C\left(t+d\right)-r\left(t+d-max\left(0,\delta_{1}-\delta_{2}\right)\right)}{\sqrt{rbt+rb\left(t+d-max\left(0,\delta_{1}-\delta_{2}\right)\right)}}
\]

\end_inset

;
\begin_inset Formula 
\[
P_{r}\left(D_{2}>t\right)=exp\left(-\frac{C\left(C-2r\right)t}{2rb}\right)\cdot exp\left(-\frac{C\left(C-2r\right)\cdot max\left(0,\delta_{1}-\delta_{2}\right)}{2rb}\right)
\]

\end_inset


\begin_inset Formula 
\[
f_{D_{2}}\left(t\right)=\left(1-a\right)\delta\left(t\right)+ak_{1}e^{-k_{1}t}\quad;\: a=e^{-\frac{C\left(C-2r\right)max\left(0,\delta_{1}-\delta_{2}\right)}{2rb}}\;;\; k_{1}=\frac{C\left(C-2r\right)}{2rb}
\]

\end_inset

 
\end_layout

\end_deeper
\begin_layout Itemize
Il 
\series bold
terzo scheduler
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
E\left(z_{2}\left(t\right)\right)=E\left(y_{2}\left(t\right)\right)=rt
\]

\end_inset


\begin_inset Formula 
\[
Var\left(z_{2}\left(t\right)\right)=max\left(Var\left(y_{2}\left(t\right)\right),Var\left(S_{y_{2}}\left(t\right)\right)\right)=max\left(rbt,rb\left(t-max\left(0,\delta_{1}-\delta_{2}\right)\right)\right)=rbt
\]

\end_inset


\begin_inset Formula 
\[
\text{sappiamo che:}\quad S_{z_{2}}\left(t\right)=w_{2}Ct+\sum_{i\neq2}\left(\left(\frac{w_{2}}{\sum_{j\neq i}w_{j}}\right)\cdot\left(w_{i}\left(t-x_{i}\left(t\right)\right)\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
E\left(S_{z_{2}}\left(t\right)\right)=w_{2}Ct+w_{1}Ct-E\left(z_{1}\left(t\right)\right)=Ct-rt
\]

\end_inset


\begin_inset Formula 
\[
Var\left(S_{z_{2}}\left(t\right)\right)=Var\left(z_{1}\left(t\right)\right)=rbt
\]

\end_inset


\begin_inset Formula 
\[
\alpha_{GPS}\left(t\right)=-\frac{E\left(z_{2}\left(t\right)\right)-E\left(S_{z_{2}}\left(t+d\right)\right)}{\sqrt{Var\left(z_{2}\left(t\right)\right)+Var\left(S_{z_{2}}\left(t+d\right)\right)}}=\frac{C\left(t+d\right)-r\left(2t+d\right)}{\sqrt{rb\left(2t+d\right)}}
\]

\end_inset


\begin_inset Formula 
\[
P_{r}\left(D_{3}>d\right)=e^{-k_{1}d}\, k_{1}=...
\]

\end_inset


\begin_inset Formula 
\[
f_{D_{3}}\left(t\right)=k_{1}e^{-k_{1}t}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
End-to-end delay
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
D_{e2e}=D_{1}+D_{2}+D_{3}
\]

\end_inset


\begin_inset Formula 
\[
f_{D_{e2e}}\left(t\right)=f_{D_{1}}\left(t\right)*f_{D_{2}}\left(t\right)*f_{D_{3}}\left(t\right)=k_{1}e^{-k_{1}t}*\left(\left(1-a\right)\cdot\delta\left(t\right)+ak_{1}e^{-k_{1}t}\right)*k_{1}e^{-k_{1}t}=..........
\]

\end_inset


\begin_inset Formula 
\[
....=k_{1}e^{-k_{1}t}*k_{1}e^{-k_{1}t}*\left(1-a\right)\delta\left(t\right)+ak_{1}e^{-k_{1}t}*k_{1}e^{-k_{1}t}*k_{1}e^{-k_{1}t}=.....
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
Ci concentriamo sul caso del traffico 
\emph on
short-range dependent
\emph default
, altrimenti non è possibile calcolarlo in forma analitica.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
D=\sum_{i=1}^{N}D_{i}
\]

\end_inset


\end_layout

\begin_layout Standard
Nel caso più semplice:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
f_{D_{i}}=k_{i}e^{-k_{i}t}\:\text{ abbiamo due casi: }\:\begin{cases}
k_{i}=k_{j} & \:\forall i\neq j\\
k_{i}\neq k_{j} & \:\forall i\neq j
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
In entrambi i casi:
\begin_inset Formula 
\[
f_{D}\left(t\right)=f_{D_{1}}\left(t\right)*f_{D_{2}}\left(t\right)*...*f_{D_{N}}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Standard
Nel 
\series bold
\bar under
secondo caso
\series default
\bar default
 abbiamo un 
\emph on
hyper-exponential
\emph default
:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
f_{D}\left(t\right)=\sum_{i=1}^{N}K_{i}e^{-k_{i}t}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
K_{i}=\left\{ \left[\prod_{j=1}^{n}\frac{k_{j}}{k_{j}+s}\right]\left(s+k_{i}\right)\right\} _{s=-k_{i}}
\]

\end_inset


\end_layout

\begin_layout Standard
Nel 
\series bold
\bar under
primo caso
\series default
\bar default
 abbiamo:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
f_{D}\left(t\right)=\frac{k^{n}t^{n-1}}{\left(n-1\right)!}e^{-kt}
\]

\end_inset


\end_layout

\begin_layout Standard
Se torniamo alla 
\begin_inset Formula $f_{D_{e2e}}\left(t\right)$
\end_inset

 che stavamo calcolando:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
f_{D_{e2e}}\left(t\right)=\left(1-a\right)\cdot\left(k_{1}\cdot e^{-k_{1}\left(t\right)}*k_{1}e^{-k_{1}t}\right)+a\left(k_{1}e^{-k_{1}t}*k_{1}e^{-k_{1}t}*k_{1}e^{-k_{1}t}\right)=\left(1-a\right)k_{1}^{2}te^{-k_{1}t}+\frac{ak_{1}^{3}t^{2}}{2}e^{-k_{1}t}=\frac{ak_{1}^{3}t^{2}}{2}e^{-k_{1}t}+\left(1-a\right)k_{1}^{2}te^{-k_{1}t}
\]

\end_inset


\end_layout

\begin_layout Itemize
...
\end_layout

\begin_layout Subsection*
Tema d'esame reti internet multimediali 12 Luglio 2010 
\end_layout

\begin_layout Standard
...
\end_layout

\begin_layout Subsection*
Tema d'esame ????
\end_layout

\begin_layout Itemize
Inventiamo un tipo di scheduler: 
\begin_inset Formula 
\[
S_{i}\left(t\right)=0.9\cdot Ct-\sum_{j\neq i}1.1\cdot x_{j}\left(t\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $x_{i}\left(t\right)$
\end_inset

 sono short-range-dependent con parametri 
\begin_inset Formula $r,b$
\end_inset

.
 Quindi:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
\begin{cases}
E\left(x_{i}\left(t\right)\right)=rt\\
Var\left(x_{i}\left(t\right)\right)=rbt
\end{cases}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset Formula 
\[
E\left(S_{i}\left(t\right)\right)=E\left(0.9\cdot Ct-\sum_{j\neq i}1.1\cdot x_{j}\left(t\right)\right)=0.9\cdot Ct-E\left(\sum_{j\neq i}1.1\cdot x_{j}\left(t\right)\right)=0.9\cdot Ct-\sum_{j\neq i}1.1\cdot E\left(x_{j}\left(t\right)\right)=0.9\cdot Ct-1.1\cdot\sum_{j\neq i}rt
\]

\end_inset


\end_layout

\begin_layout Itemize
Sappiamo inoltre di avere 
\begin_inset Formula $N$
\end_inset

 classi di servizio.
 Quindi:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(S_{i}\left(t\right)\right)=0.9\cdot Ct-1.1\cdot\left(N-1\right)\cdot rt
\]

\end_inset


\end_layout

\begin_layout Itemize
La varianza:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{i}\left(t\right)\right)=Var\left(0.9\cdot Ct-\sum_{j\neq i}1.1\cdot x_{j}\left(t\right)\right)-Var\left(0.9\cdot Ct\right)+Var\left(\sum_{j\neq i}1.1\cdot x_{j}\left(t\right)\right)=\sum_{j\neq i}Var\left(1.1\cdot x_{j}\left(t\right)\right)=\sum_{j\neq i}1.1^{2}\cdot Var\left(x_{j}\left(t\right)\right)=1.21\cdot\sum_{j\neq i}rbt=
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{i}\left(t\right)\right)=1.21\cdot\left(N-1\right)\cdot rbt
\]

\end_inset


\end_layout

\begin_layout Itemize
Scrivere la funzione 
\begin_inset Formula $\alpha\left(t\right)$
\end_inset

 per la classe di servizio 
\begin_inset Formula $i$
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{i}\left(t\right)=-\frac{E\left(x_{i}\left(t\right)\right)-E\left(S_{i}\left(t+d\right)\right)}{\sqrt{Var\left(x_{i}\left(t\right)\right)+Var\left(S_{i}\left(t+d\right)\right)}}=-\frac{rt-\left(0.9\cdot C\cdot\left(t+d\right)-1.1\cdot\left(N-1\right)\cdot r\cdot\left(t+d\right)\right)}{\sqrt{rbt+1.21\cdot\left(N-1\right)\cdot rb\left(t+d\right)}}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
Esercizio blocco slides 17
\end_layout

\begin_layout Standard
Abbiamo uno scheduler SP a due classi con capacità 
\begin_inset Formula $C$
\end_inset

.
\end_layout

\begin_layout Itemize
Nella classe 1 abbiamo 
\begin_inset Formula $N_{1}$
\end_inset

 flussi di traffico con parametri 
\begin_inset Formula $r_{1}=64kbps$
\end_inset

 , 
\begin_inset Formula $b_{1}=128kbit$
\end_inset

 , poi abbiamo uno SLA: 
\begin_inset Formula $d_{1}=0.01$
\end_inset

, 
\begin_inset Formula $p_{1}=10^{-5}$
\end_inset


\end_layout

\begin_layout Itemize
Nella classe 2: 
\begin_inset Formula $N_{2}$
\end_inset

flussi di traffico, 
\begin_inset Formula $r_{2}=128kbps$
\end_inset

 , 
\begin_inset Formula $b_{2}=256kbps$
\end_inset

 , poi SLA: 
\begin_inset Formula $d_{2}=0.01$
\end_inset

 , 
\begin_inset Formula $p_{2}=10^{-3}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $C=10\, Mbps$
\end_inset


\end_layout

\begin_layout Standard
Calcolare la regione di ammissione per questo scheduler, cioè la funzione
 
\begin_inset Formula $N_{2}\left(N_{1}\right)$
\end_inset

 o 
\begin_inset Formula $N_{1}\left(N_{2}\right)$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
N_{2}\leq\begin{cases}
N_{2}\left(N_{1}\right)\rightarrow N_{1}\leq min\left(N_{1}^{*},N_{1,max}\right)\\
0\rightarrow\text{altrimenti}
\end{cases}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
N_{1,max}=\frac{2d_{1}C^{2}}{2d_{1}r_{1}C-r_{1}b_{1}ln\left(p_{1}\right)}=18.67
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
N_{1}*=\frac{Cd_{2}-b_{1}ln\left(p_{2}\right)-\sqrt{-ln\left(p_{2}\right)\left(2d_{2}b_{1}C-b_{1}^{2}ln\left(p_{2}\right)\right)}}{r_{1}d_{2}}=7.95
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
min\left(N_{1}^{*},N_{1,max}\right)=7.95
\]

\end_inset


\end_layout

\begin_layout Standard
Quindi se abbiamo 
\begin_inset Formula $\geq8$
\end_inset

 connessioni su 
\begin_inset Formula $N_{1},$
\end_inset

possiamo lavorare solo con connessioni della classe 1.
\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename net-065.png
	scale 50

\end_inset


\end_layout

\begin_layout Standard
Per disegnare il resto della curva che manca, dobbiamo utilizzare il solito
 formulozzo.
\end_layout

\begin_layout Subsection*
Esercizio 4 Giugno
\end_layout

\begin_layout Standard
Abbiamo uno scheduler FIFO con capacità di uscita 
\begin_inset Formula $C$
\end_inset

 e due flussi in ingresso:
\end_layout

\begin_layout Itemize
Un flusso con 
\begin_inset Formula $r,b$
\end_inset

 
\end_layout

\begin_layout Itemize
Un flusso con 
\begin_inset Formula $r,b,H$
\end_inset

 
\end_layout

\begin_layout Standard
Vogliamo calcolare 
\begin_inset Formula $P_{r}\left(D>d\right)$
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{2rt-C\left(t+d\right)}{\sqrt{rbt+rbt^{2H}}}
\]

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $r=10^{6}\,\left[\frac{bit}{s}\right]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $b=0.5\cdot10^{6}\,\left[bit\right]$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $H=0.9$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $C=2.1\cdot10^{6}$
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $d=0.1$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha_{min}=0.2
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D>d\right)=e^{-\frac{\alpha_{min}^{2}}{2}}\simeq0.5
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
C=3\, Mbps
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
P_{r}\left(D>d\right)\approx0.098
\]

\end_inset


\end_layout

\begin_layout Subsubsection*
Esercizio 2
\end_layout

\begin_layout Standard
Abbiamo 4 schedulers in cascata.
 
\end_layout

\begin_layout Itemize
WFQ con 3 classi e in ingresso 
\begin_inset Formula $x_{1}\left(t\right)$
\end_inset

, 
\begin_inset Formula $x_{2}\left(t\right)$
\end_inset

, 
\begin_inset Formula $x_{3}\left(t\right)$
\end_inset

, capacità di uscita 
\begin_inset Formula $C_{1}$
\end_inset


\end_layout

\begin_layout Itemize
SP con tre classi e in ingresso 
\begin_inset Formula $y_{1}\left(t\right)$
\end_inset

, 
\begin_inset Formula $y_{2}\left(t\right)=\text{output di }WFQ$
\end_inset

, 
\begin_inset Formula $y_{3}\left(t\right)$
\end_inset

 e capacità di uscita 
\begin_inset Formula $C_{2}$
\end_inset

 
\end_layout

\begin_layout Itemize
WFQ con in ingresso 
\begin_inset Formula $z_{1}\left(t\right)=\text{uscita di SP}$
\end_inset

, 
\begin_inset Formula $z_{2}\left(t\right)$
\end_inset

e 
\begin_inset Formula $z_{3}\left(t\right)$
\end_inset

 e capacità di uscita 
\begin_inset Formula $C_{3}$
\end_inset


\end_layout

\begin_layout Itemize
FIFO con in ingresso 
\begin_inset Formula $m\left(t\right)=\text{uscita di WFQ (il secondo)}$
\end_inset

 e capacità di uscita 
\begin_inset Formula $C$
\end_inset


\end_layout

\begin_layout Standard
(salto la parte numerica...)
\end_layout

\begin_layout Itemize
Vogliamo calcolare la probabilità 
\begin_inset Formula $P_{r}\left(D>d\right)$
\end_inset

 nell'ultimo scheduler FIFO di uscita.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
E\left(y_{2}\left(t\right)\right)=E\left(x_{3}\left(t\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
Var\left(y_{2}\left(t\right)\right)=max\left(Var\left(x_{3}\left(t\right)\right),Var\left(S_{x_{3}}\left(t\right)\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
Var\left(S_{x_{3}}\left(t\right)\right)=\sum_{j\neq3}\left(\frac{w_{1,3}}{\sum_{j\neq j}w_{1,k}}\right)^{2}\cdot Var\left(x_{j}\left(t\right)\right)=
\]

\end_inset


\begin_inset Formula 
\[
Var\left(y_{2}\left(t\right)\right)=max\left(r_{x_{3}}b_{x_{3}}t^{2H_{x_{3}}},\,\left(\frac{w_{1,3}}{w_{1,2}+w_{1,3}}\right)^{2}r_{x_{1}}b_{x_{1}}t^{2H_{x_{1}}}+\left(\frac{w_{1,3}}{w_{1,1}+w_{1,3}}\right)^{2}r_{x_{2}}b_{x_{2}}t^{2H_{x_{2}}}\right)
\]

\end_inset


\end_layout

\begin_layout Itemize
Passiamo all'analisi del terzo scheduler:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(z_{1}\left(t\right)\right)=max\left(Var\left(y_{2}\left(t\right)\right),Var\left(S_{y_{2}}\left(t\right)\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
S_{y_{2}}\left(t\right)=Ct-y_{1}\left(t\right)
\]

\end_inset


\begin_inset Formula 
\[
Var\left(S_{y_{2}}\left(t\right)\right)=Var\left(Ct-y_{1}\left(t\right)\right)=Var\left(Ct\right)+Var\left(y_{1}\left(t\right)\right)=Var\left(y_{1}\left(t\right)\right)
\]

\end_inset


\begin_inset Formula 
\[
Var\left(z_{2}\left(t\right)\right)=max\left(Var\left(y_{2}\left(t\right)\right),Var\left(y_{1}\left(t\right)\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(y_{2}\left(t\right)\right)=max\left(r_{x_{3}}b_{x_{3}}t^{2H_{x_{3}}},\,\left(\frac{w_{1,3}}{w_{1,2}+w_{1,3}}\right)^{2}r_{x_{1}}b_{x_{1}}t^{2H_{x_{1}}}+\left(\frac{w_{1,3}}{w_{1,1}+w_{1????}}\right)^{2}r_{x_{2}}b_{x_{2}}t^{2H_{x_{2}}}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(z_{1}\left(t\right)\right)=max\left(max\left(r_{x_{3}}b_{x_{3}}t^{2H_{x_{3}}},\,\left(\frac{w_{1,3}}{w_{1,2}+w_{?????}}\right)^{2}r_{x_{1}}b_{x_{1}}t^{2H_{x_{1}}}+\left(\frac{w_{1,3}}{w_{1,1}+w_{1,3}}\right)^{2}r_{x_{2}}b_{x_{2}}t^{2H_{x_{2}}}\right),\, r_{y_{1}}b_{y_{1}}t^{2H_{y_{1}}}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(m\left(t\right)\right)=max\left(Var\left(z_{1}\left(t\right)\right),Var\left(S_{z_{1}}\left(t\right)\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
Var\left(S_{z_{1}}\left(t\right)\right)=\sum_{j\neq1}\left(\frac{w_{3,1}}{\sum_{k\neq3}w_{3,k}}\right)^{2}Var\left(z_{j}\left(t\right)\right)=\left(\frac{w_{3,1}}{w_{3,1}+w_{3,3}}\right)^{2}Var\left(z_{2}\left(t\right)\right)+\left(\frac{w_{3,1}}{w_{3,1}+w_{3,2}}\right)^{2}Var\left(z_{3}\left(t\right)\right)
\]

\end_inset


\end_layout

\begin_layout Standard

\size footnotesize
\begin_inset Formula 
\[
Var\left(m\left(t\right)\right)=max\left(max\left(max\left(r_{x_{3}}b_{x_{3}}t^{2H_{3}},\,\left(\frac{w_{1,3}}{w_{1,2}+w_{1,3}}\right)^{2}r_{x_{1}}b_{x_{1}}t^{2H_{x_{1}}}+\left(\frac{w_{1,3}}{w_{1,1}+w_{1,3}}\right)^{2}r_{x_{2}}b_{x_{2}}t^{2H_{x_{2}}}\right),r_{y_{1}}b_{y_{1}}t^{2H_{y_{1}}}\right),\left(\frac{w_{3,1}}{?????}\right)^{2}r_{z_{2}}b_{z_{2}}t^{2H_{z_{2}}}+\left(\frac{???}{???}\right)^{2}r_{z_{3}}b_{z_{3}}t^{2Hz_{3}}\right)
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{E\left(m\left(t\right)\right)-C\left(t+d\right)}{\sqrt{Var\left(m\left(t\right)\right)}}\underset{\rightarrow}{\;\text{poichè gli schedulers sono in cond. stabili}}\;=
\]

\end_inset


\begin_inset Formula 
\[
\alpha\left(t\right)=-\frac{E\left(x_{3}\left(t\right)\right)-C\left(t+d\right)}{\sqrt{Var\left(m\left(t\right)\right)}}=-\frac{r_{x_{3}}t-C\left(t+d\right)}{\sqrt{Var\left(m\left(t\right)\right)}}
\]

\end_inset


\end_layout

\begin_layout Subsection*
Esercizio su traffico EF e BF
\end_layout

\begin_layout Standard
Ammettiamo di avere uno scheduler SP con due classi di servizio.
 La prima gestisce un flusso di traffico EF con 
\begin_inset Formula $N_{1}$
\end_inset

 flussi con rate 
\begin_inset Formula $r_{1}$
\end_inset

 e pacchetti di lunghezza massima 
\begin_inset Formula $L_{1}$
\end_inset

.
 Nella seconda classe invece arriva traffico di tipo 
\emph on
best-effort
\emph default
 con 
\begin_inset Formula $N_{2}$
\end_inset

 flussi con pacchetti di lunghezza massima 
\begin_inset Formula $L_{2}$
\end_inset

.
 Il traffico 
\emph on
best-effort
\emph default
 è di tipo 
\emph on
short-range-dependent
\emph default
 con parametri 
\begin_inset Formula $r_{2}$
\end_inset

 e 
\begin_inset Formula $b_{2}$
\end_inset

.
\end_layout

\begin_layout Standard
Calcolare il ritardo massimo dei pacchetti 
\begin_inset Formula $EF$
\end_inset

 e la probabilità che il delay dei pacchetti best-effort sia maggiore di
 
\begin_inset Formula $d_{2}$
\end_inset


\end_layout

\begin_layout Itemize
Per calcolare il ritardo massimo dei pacchetti 
\begin_inset Formula $EF$
\end_inset

 facciamo un semplice ragionamento:
\end_layout

\begin_deeper
\begin_layout Itemize
I pacchetti EF sono nella prima classe quindi vengono sempre serviti per
 primi appena arrivano
\end_layout

\begin_layout Itemize
L'unico caso in cui può esserci un ritardo è quando arriva un pacchetto
 EF esattamente nel momento in cui è iniziata la trasmissione di un pacchetto
 BE.
 Quindi il pacchetto dovrà aspettare la fine della trasmissione del pacchetto
 BE e poi dovrà spendere tempo per trasmettere se stesso.
 Considerando il caso pessimo dobbiamo pensare che il pacchetto EF che ci
 interessa trasmettere sia l'ultimo degli 
\begin_inset Formula $N_{1}$
\end_inset

 flussi EF, quindi deve aspettare anche la trasmissione degli 
\begin_inset Formula $N_{1}-1$
\end_inset

 pacchetti prima di lui.
 Avremo dunque:
\begin_inset Formula 
\[
d_{max_{EF}}=\frac{N_{1}\cdot L_{2}}{C}+\frac{L_{1}}{C}=\frac{L_{1}+\left(N_{1}\cdot L_{2}\right)}{C}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Per la seconda domanda facciamo alcune considerazioni:
\end_layout

\begin_deeper
\begin_layout Itemize
Considerato che non possiamo ignorare la lunghezza dei pacchetti in questo
 caso, sappiamo che la capacità 
\begin_inset Quotes eld
\end_inset

apparente
\begin_inset Quotes erd
\end_inset

 dei pacchetti EF, posta la presenza di pacchetti BE sarà
\begin_inset Formula 
\[
C_{EF}=\frac{L_{EF}}{L_{BE}+L_{BE}}\cdot C_{TOT}=\frac{L_{1}}{L_{1}+L_{2}}\cdot C_{TOT}
\]

\end_inset


\end_layout

\begin_layout Itemize
E quindi la capacità per i pacchetti BE sarà:
\begin_inset Formula 
\[
C_{BE}=C_{TOT}-C_{EF}
\]

\end_inset


\end_layout

\begin_layout Itemize
A questo punto possiamo dimenticare lo scheduler SP e considerare la classe
 dove arrivano i pacchetti BE come se fosse uno scheduler FIFO con capacità
 di uscita 
\begin_inset Formula $C_{BE}$
\end_inset

.
 Quindi applichiamo la formula per gli scheduler FIFO con traffico SRD:
\begin_inset Formula 
\[
P\left(D>d\right)=e^{-2\frac{C\left(C-nr\right)}{nrb}\cdot d}
\]

\end_inset

Dove 
\begin_inset Formula $n$
\end_inset

 è il numero di flussi in ingresso (
\begin_inset Formula $N_{2}$
\end_inset

) e tutti gli altri parametri ci sono già noti.
\end_layout

\end_deeper
\begin_layout Part*
Riferimenti
\end_layout

\begin_layout Standard
L'intero materiale qui presentato è basato su appunti e 
\emph on
slides
\emph default
 del corso 089043 
\begin_inset Quotes eld
\end_inset

Multimedia Internet
\begin_inset Quotes erd
\end_inset

 (A.A 2012/2013) tenuto presso il 
\emph on
Politecnico di Milano
\emph default
 dal prof.
 
\emph on
Paolo Giacomazzi (
\begin_inset CommandInset href
LatexCommand href
target "http://home.deib.polimi.it/giacomaz/"

\end_inset

)
\end_layout

\end_body
\end_document
